/* settings-modal-fixes.css
   Targeted, high-specificity overrides to ensure the Settings modal
   remains readable in both dark and light themes. This file is imported
   after App.css so it can override conflicting rules safely.
*/

/* Base surface & text for the settings modal */
.settings-modal .settings-content {
  background: var(--bg-surface, #ffffff) !important;
  color: var(--text, #0b1418) !important;
  border: 1px solid var(--glass-border, rgba(0,0,0,0.06)) !important;
  box-shadow: 0 20px 60px rgba(2,6,23,0.6) !important;
  z-index: 120000 !important;
}

/* Ensure headings, labels and form controls inside the modal inherit the readable color */
.settings-modal .settings-content h2,
.settings-modal .settings-content h3,
.settings-modal .settings-content label,
.settings-modal .settings-content p,
.settings-modal .settings-content .muted,
.settings-modal .settings-content small,
.settings-modal .settings-content .setting-item,
.settings-modal .settings-content .setting-item * {
  color: inherit !important;
  opacity: 1 !important;
}

/* Inputs, selects, textareas and buttons inside the settings modal */
.settings-modal .settings-content input,
.settings-modal .settings-content select,
.settings-modal .settings-content textarea,
.settings-modal .settings-content button {
  color: inherit !important;
  background: transparent !important;
  border: 1px solid var(--glass-border, rgba(0,0,0,0.06)) !important;
}

.settings-modal .settings-content input::placeholder,
.settings-modal .settings-content textarea::placeholder {
  color: var(--muted, rgba(0,0,0,0.38)) !important;
}

/* Stronger label color than muted for clarity */
.settings-modal .settings-content .setting-item label {
  color: var(--text, #0b1418) !important;
  font-weight: 600 !important;
}

/* Close button visibility */
.settings-modal .settings-content .close-button,
.settings-modal .close-button {
  color: var(--text) !important;
  background: transparent !important;
  border: 1px solid var(--glass-border) !important;
}

/* Light theme specifics: dark text on white surfaces */
body.light-theme .settings-modal .settings-content {
  background: #ffffff !important;
  color: #08141b !important;
  border-color: rgba(3,9,14,0.06) !important;
  box-shadow: 0 18px 48px rgba(2,6,23,0.08) !important;
}
body.light-theme .settings-modal .settings-content input,
body.light-theme .settings-modal .settings-content select,
body.light-theme .settings-modal .settings-content textarea {
  background: rgba(0,0,0,0.04) !important;
  color: #08141b !important;
}

/* Ensure toggle switches and sliders remain visible */
.settings-modal .settings-content .switch,
.settings-modal .settings-content .slider {
  color: inherit !important;
}

/* Provide a focused ring for keyboard navigation inside the modal */
.settings-modal .settings-content :focus {
  outline: 3px solid var(--focus, rgba(0,240,255,0.14)) !important;
  outline-offset: 3px !important;
}

/* For stubborn cases where earlier rules painted text white on white, add a final fallback */
.settings-modal .settings-content * {
  -webkit-font-smoothing: antialiased !important;
}

/* Temporary debug helper (commented out by default).
   Uncomment to show outlines around modal cards if you need to identify which
   exact element remains unreadable. Remove after debugging.
*/
/* .settings-modal .settings-content .card { outline: 2px dashed rgba(255,0,0,0.18) !important; } */

/* Dark-theme specific: force modal inner cards to use the dark surfaces
   because various global rules set them to white. We target both
   generic `.card` and panel/media/item variants used inside modals. */
body:not(.light-theme) .settings-modal .settings-content .card,
body:not(.light-theme) .settings-modal .settings-content .panel-card,
body:not(.light-theme) .settings-modal .settings-content .media-item,
body:not(.light-theme) .settings-modal .settings-content .setting-item,
body:not(.light-theme) .settings-modal .settings-content .media-item,
.settings-modal .settings-content .card,
.settings-modal .settings-content .panel-card {
  /* Force a dark surface for modal inner cards so they don't render as white */
  background-image: none !important;
  background-color: var(--bg-surface, rgba(6,8,12,0.88)) !important;
  color: var(--text, #e9f6ff) !important;
  border: 1px solid rgba(255,255,255,0.04) !important;
  box-shadow: 0 10px 30px rgba(0,0,0,0.7) !important;
  opacity: 1 !important;
}

/* ALSO target the settings-group tiles specifically (these are the small
   white-like boxes shown in Settings). Force them to use dark/glass surfaces
   in dark theme so the whole modal reads as a cohesive dark panel. */
body:not(.light-theme) .settings-modal .settings-content .settings-group,
body:not(.light-theme) .settings-modal .settings-content .settings-grid .settings-group {
  background-image: none !important;
  background-color: rgba(12,16,24,0.78) !important; /* solid dark glass */
  border: 1px solid rgba(255,255,255,0.032) !important;
  color: var(--text, #eaf6ff) !important;
  box-shadow: 0 8px 28px rgba(0,0,0,0.6) !important;
}

/* Light-theme: ensure settings tiles remain light/white so the modal reads
   consistently in light mode. This explicitly undoes the dark-theme rules. */
body.light-theme .settings-modal .settings-content .settings-group,
body.light-theme .settings-modal .settings-content .settings-grid .settings-group {
  background-image: none !important;
  background-color: #ffffff !important;
  border: 1px solid rgba(3,9,14,0.06) !important;
  color: #08141b !important;
  box-shadow: 0 8px 20px rgba(2,6,23,0.06) !important;
}

/* Ensure headings and small labels inside these cards are visible */
.settings-modal .settings-content .card h3,
.settings-modal .settings-content .card h4,
.settings-modal .settings-content .card p,
.settings-modal .settings-content .card label,
.settings-modal .settings-content .card small {
  color: inherit !important;
  opacity: 1 !important;
}

/* Fix toggle/switch visual thumb colors that can be very faint on dark */
/* Make switch thumb visible on dark backgrounds */
body:not(.light-theme) .settings-modal .settings-content .switch .slider:before {
  background: #f4f7fb !important;
}

/* Make sliders and range inputs clearer on dark backgrounds */
body:not(.light-theme) .settings-modal .settings-content input[type="range"] {
  accent-color: var(--accent, #00f0ff) !important;
}

/* Inputs/selects/textarea: darker backgrounds for legibility on dark theme */
body:not(.light-theme) .settings-modal .settings-content input,
body:not(.light-theme) .settings-modal .settings-content select,
body:not(.light-theme) .settings-modal .settings-content textarea {
  background-color: rgba(0,0,0,0.35) !important;
  border: 1px solid rgba(255,255,255,0.04) !important;
  color: var(--text, #e9f6ff) !important;
}

/* Final safety: if any element was forced to white text-on-white, force color inheritance */
body:not(.light-theme) .settings-modal .settings-content * {
  color: inherit !important;
  -webkit-font-smoothing: antialiased !important;
}
