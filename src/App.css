
/* Welcome splash styles */
.welcome-splash {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(180deg, rgba(2,6,23,0.92), rgba(6,12,32,0.95));
  z-index: 9999;
}
.splash-inner { display:flex; gap:28px; align-items:center; max-width:1100px; width:100%; padding:40px; }
.splash-left { flex:1; color: white; }
.splash-title { font-size:64px; font-weight:900; letter-spacing:2px; color: #00f6ff; text-shadow: 0 10px 40px rgba(0,246,255,0.06); }
.splash-sub { margin-top:8px; color: rgba(255,255,255,0.82); font-size:18px; }
.splash-cta-row { margin-top:18px; display:flex; gap:12px; }
.splash-enter { background: linear-gradient(90deg,#00e5ff,#6c63ff); color: #041223; padding:12px 20px; border-radius:12px; font-weight:800; border: none; cursor:pointer; box-shadow: 0 12px 40px rgba(6,12,32,0.6); }
.splash-about { background: transparent; color: rgba(255,255,255,0.9); padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); cursor:pointer; }
.splash-options { margin-top:12px; color: rgba(255,255,255,0.72); font-size:13px; }
.splash-right { width:380px; display:flex; align-items:center; justify-content:center; }
.splash-orb { width:260px; height:260px; position:relative; }
.splash-orb .core { position:absolute; inset:36px; border-radius:999px; background: radial-gradient(circle at 30% 30%, rgba(0,246,255,0.18), rgba(124,58,237,0.06)); filter: blur(18px); }
.splash-orb .ring { position:absolute; border-radius:999px; border:1px solid rgba(255,255,255,0.06); }
.splash-orb .r1 { width:260px; height:260px; top:0; left:0; animation: spinSlow 20s linear infinite; box-shadow: 0 10px 30px rgba(0,0,0,0.6); }
.splash-orb .r2 { width:190px; height:190px; top:34px; left:34px; animation: spinReverse 14s linear infinite; border-color: rgba(124,58,237,0.12); }
.splash-orb .r3 { width:120px; height:120px; top:70px; left:70px; animation: spinSlow 9s linear infinite; border-color: rgba(0,255,196,0.12); }

@media (max-width: 980px) {
  .splash-inner { flex-direction: column; align-items: center; text-align: center; }
  .splash-right { width:100%; margin-top:18px; }
  .splash-title { font-size:42px; }
}
/* AION - Clean, single App.css
   This file provides a compact, consistent theme and responsive layout.
   Dark-first with light-mode overrides. No duplicated blocks.
*/

:root{
  /* New premium design tokens (canonical for ChatPanel and new UI)
    Kept compact and tuned for a warmer, premium look. */
  --cp-accent-1: #ffd166; /* warm gold */
  --cp-accent-2: #805ad5; /* rich violet */
  --cp-accent-3: #00c2ff; /* bright cyan micro-accent */
  --cp-glass-bg: rgba(12,14,20,0.46);
  --cp-glass-border: rgba(255,255,255,0.07);
  --cp-elev: 0 18px 70px rgba(2,4,12,0.65);
  --cp-radius: 16px;
  --cp-ui-font: var(--font-sans);

  /* ChatPanel theme tokens - dark mode defaults (ChatPanel.css will override as needed) */
  --chat-text-primary: #e6f6ff;
  --chat-text-secondary: rgba(230, 246, 255, 0.7);
  --chat-bg-message: rgba(15, 18, 24, 0.85);
  --chat-bg-aion: rgba(8, 12, 18, 0.9);
  --chat-border-color: rgba(255, 255, 255, 0.08);
  --chat-shadow-soft: 0 4px 16px rgba(0, 0, 0, 0.4);
  --chat-shadow-medium: 0 12px 36px rgba(0, 0, 0, 0.5);
  --chat-shadow-elevated: 0 24px 60px rgba(0, 0, 0, 0.6);

  /* Core typography & layout tokens */
  --font-sans: Inter, 'Segoe UI', system-ui, -apple-system, 'Helvetica Neue', Arial;
  --font-display: 'Poppins', var(--font-sans);
  --font-mono: 'Fira Code', ui-monospace, SFMono-Regular, 'Segoe UI Mono', Menlo, Monaco, monospace;
  --max-width: 1240px;
  --r-sm: 10px; --r-md: 14px;
  --shadow-soft: 0 12px 48px rgba(4,8,20,0.6);
  --trans-fast: 180ms cubic-bezier(.2,.9,.2,1);

  /* Compatibility fallbacks used by various components */
  --text-primary: var(--text);
  --bg-elev: rgba(255,255,255,0.01);
  --bg-muted: rgba(255,255,255,0.01);
  --ease-in-out: cubic-bezier(.2,.9,.2,1);

  /* Page / surface colors (dark-first) */
  --bg-page: #060610;
  --bg-gradient: radial-gradient(1200px 600px at 10% 10%, rgba(255,209,102,0.03), transparent 8%), radial-gradient(800px 400px at 90% 90%, rgba(128,90,213,0.02), transparent 6%), var(--bg-page);
  --bg-surface: rgba(12,16,24,0.62);
  --card-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006));
  --text: #eaf6ff;
  --muted: #aab9c6;

  /* Map legacy accent variables to the new cp tokens so older components
    keep working but pick up the premium palette by default. */
  --accent: var(--cp-accent-1);
  --accent-2: var(--cp-accent-2);
  --accent-3: var(--cp-accent-3);

  --neon: rgba(255,209,102,0.12);
  --neon-2: rgba(128,90,213,0.10);
  --glass: rgba(255,255,255,0.03);
  --glass-strong: rgba(255,255,255,0.07);
  --border: rgba(255,255,255,0.045);
  --border-strong: rgba(255,255,255,0.07);
  --focus: rgba(255,209,102,0.12);
  --glow: 0 18px 80px rgba(128,90,213,0.06);
  --elev-1: 0 8px 30px rgba(2,6,23,0.56);
  --elev-2: 0 20px 80px rgba(2,6,23,0.66);
  --glass-border: rgba(255,255,255,0.045);
}

/* Palette overrides applied on the app container */
.app-container.palette-magenta {
  --accent: #ff5ac1;
  --accent-2: #8a2bff;
  --neon: rgba(255,90,193,0.14);
  --neon-2: rgba(138,43,255,0.12);
}
.app-container.palette-lime {
  --accent: #9cff3c;
  --accent-2: #4cff8a;
  --neon: rgba(156,255,60,0.14);
  --neon-2: rgba(76,255,138,0.12);
}

/* Details styling for file analysis */
details { background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006)); border-radius:8px; padding:8px; border:1px solid var(--glass-border); }
details summary { list-style:none; outline:none; cursor:pointer; }
details[open] { box-shadow: var(--elev-1); }

/* Compact AI summary card used in uploaded files list */
.ai-summary-card{
  padding:10px;
  border-radius:8px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006));
  border:1px solid var(--glass-border);
  box-shadow: var(--elev-1);
  color:var(--text);
}
.ai-summary-card .btn{padding:6px 10px;border-radius:8px;font-size:0.85rem}

/* Small spinner and badges for uploaded file cards */
.small-spinner{width:12px;height:12px;border:2px solid rgba(255,255,255,0.08);border-top-color:var(--accent);border-radius:50%;display:inline-block;animation:spin 0.8s linear infinite}
.ai-done-badge{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#031118;padding:2px 6px;border-radius:6px;font-weight:700;font-size:12px}
.ai-source-badge{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:2px 6px;border-radius:6px;font-size:12px}

@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

/* Modal for AI analysis (lightweight) */
.ai-analysis-modal-backdrop{position:fixed;inset:0;background:linear-gradient(180deg, rgba(1,2,6,0.6), rgba(2,4,8,0.75));display:flex;align-items:center;justify-content:center;z-index:999}
.ai-analysis-modal{width:min(920px,94%);max-height:86vh;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 20px 60px rgba(0,0,0,0.7);backdrop-filter:blur(8px)}
.ai-analysis-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
.ai-analysis-header h3{margin:0;font-size:1.05rem}
.ai-analysis-header .close-modal{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:6px 10px;border-radius:8px;cursor:pointer}
.ai-analysis-body{display:flex;flex-direction:column;gap:12px;margin-top:12px}
.ai-analysis-summary h4,.ai-analysis-full h4{margin:0 0 8px 0}
.ai-analysis-summary{padding:12px;background:linear-gradient(180deg, rgba(0,0,0,0.08), rgba(255,255,255,0.008));border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
.ai-analysis-full pre{background:transparent;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
.ai-analysis-footer{display:flex;justify-content:flex-end;margin-top:12px}

/* Light theme (applied by JS via `body.className = 'light-theme'`) */
body.light-theme{
  --bg-page:#f6f8fa;
  --bg-surface:#ffffff;
  --text:#08141b;
  --muted:#556077;
  /* Provide lighter variants of the cp tokens for light mode so the
     premium visuals remain readable without being too saturated. */
  --cp-accent-1: #ffb84d; /* warm/gold for CTAs on light */
  --cp-accent-2: #6a4c93; /* keep deep violet for contrast */
  --cp-accent-3: #00b6d4; /* cyan micro-accent */
  /* map legacy accent names so existing components continue to work */
  --accent: var(--cp-accent-1);
  --accent-2: var(--cp-accent-2);
  --border:rgba(3,9,14,0.06);
  --focus:rgba(0,119,204,0.12);

  /* ChatPanel light theme tokens override to ensure ChatPanel visuals match app theme */
  --chat-text-primary: #0f1419 !important;
  --chat-text-secondary: #666d7a !important;
  --chat-bg-message: rgba(255, 255, 255, 0.95) !important;
  --chat-bg-aion: rgba(245, 248, 252, 0.98) !important;
  --chat-border-color: rgba(0, 0, 0, 0.08) !important;
  --chat-shadow-soft: 0 4px 16px rgba(0, 0, 0, 0.08) !important;
  --chat-shadow-medium: 0 12px 36px rgba(0, 0, 0, 0.12) !important;
  --chat-shadow-elevated: 0 24px 60px rgba(0, 0, 0, 0.16) !important;
}

/* Ensure header brand/logo is clearly visible in light theme (override conflicting rules) */
body.light-theme .app-header .brand-logo,
body.light-theme .app-header .brand .logo,
body.light-theme .brand-logo,
body.light-theme .brand .logo {
  color: #0a5a7a !important;
  background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  text-shadow: none !important;
}

/* Light-theme: make ambient/particles subtle so they don't wash out UI */
body.light-theme .bg-ambient {
  mix-blend-mode: normal !important; /* don't screen over light background */
  opacity: 0.06 !important; /* very subtle on light backgrounds */
  filter: none !important;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(0,240,255,0.02), transparent 8%), radial-gradient(800px 400px at 90% 90%, rgba(159,107,255,0.015), transparent 6%), var(--bg-page);
  animation: ambientShift 60s linear infinite !important; /* very slow, non-distracting */
}

body.light-theme .bg-particles {
  opacity: 0.01 !important; /* nearly invisible on light themes */
  mix-blend-mode: normal !important;
}

/* Compatibility aliases and component compatibility helpers
   Ensures older/newer panels (MathPanel, MemoriesPanel, etc.) share the
   same CSS variable names and have readable colors in light and dark modes.
*/
:root {
  /* aliases for components that expect different var names */
  --bg-card: var(--card-bg);
  --text-primary: var(--text);
  --text-muted: var(--muted);
  --border-soft: var(--border);
  --border-focus: rgba(0,119,204,0.12);
  --focus-ring: var(--focus);
  --bg-modal-overlay: rgba(0,0,0,0.6);
  --bg-card-plain: var(--bg-surface);
}

/* Generic highlight used by MemoriesPanel and search results */
mark {
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #031316;
  padding: 0 4px;
  border-radius: 4px;
  font-weight: 600;
}
body.light-theme mark {
  /* on light backgrounds use a slightly more saturated accent and white text */
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #ffffff;
}

/* MemoriesPanel compatibility helpers */
.memory-manager { color: var(--text); }
.memory-manager .panel { background: var(--bg-surface); border:1px solid var(--glass-border); }
.memory-manager .search-input { background: transparent; border:1px solid var(--border-soft); color:var(--text); }
.memory-manager .pinned-card { background: var(--bg-card); border:1px solid var(--glass-border); padding:8px 12px; border-radius:10px; color:var(--text); box-shadow: var(--elev-1); }
.memory-manager .pins-drawer { background: linear-gradient(180deg, var(--bg-card), rgba(255,255,255,0.006)); border:1px solid var(--glass-border); padding:12px; border-radius:10px; box-shadow: var(--elev-2); }
.memory-manager .draggable-item { padding:10px; border-radius:10px; background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border:1px solid rgba(255,255,255,0.02); margin-bottom:8px; }
.memory-manager .draggable-item.dragging { opacity:0.7; transform:scale(.996); box-shadow:0 20px 60px rgba(0,0,0,0.6); }
.memory-manager .result-item { display:flex; gap:12px; align-items:flex-start; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); }
.memory-manager .result-content { color:var(--text); }

/* Edit modal & backdrop used by MemoriesPanel */
.mem-edit-backdrop { position: fixed; inset: 0; display:flex; align-items:center; justify-content:center; background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.6)); z-index:2200; }
.mem-edit-modal { width: min(820px, 94%); max-height:86vh; overflow:auto; background: linear-gradient(180deg, var(--bg-surface), var(--bg-card)); border-radius:12px; padding:18px; border:1px solid var(--glass-border); color:var(--text); box-shadow: var(--elev-2); }
.mem-edit-modal textarea { width:100%; min-height:120px; padding:10px; border-radius:8px; border:1px solid var(--glass-border); background:transparent; color:var(--text); }
.mem-edit-footer { display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }

/* MathPanel compatibility (fallbacks and light-theme safety) */
.math-panel { background: var(--bg-surface); border:1px solid var(--glass-border); border-radius:10px; padding:12px; color:var(--text); }
.math-panel .math-canvas { background: transparent; border-radius:8px; }
.math-panel.light-theme, body.light-theme .math-panel { background: var(--bg-surface); color: var(--text); }

/* small utilities to ensure consistent visual density */
.action-btn { padding:6px 8px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; color:var(--text); }
.action-btn:hover { background: var(--glass); transform: translateY(-2px); }

/* Ensure pinned strip previews are readable on light theme too */
body.light-theme .memory-manager .pinned-card { background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96)); color: var(--text); border: 1px solid rgba(3,9,14,0.06); }

@media (prefers-reduced-motion: no-preference) {
  body.light-theme .bg-ambient, body.light-theme .bg-particles { will-change: transform, background-position; }
}

/* Base reset */
*{box-sizing:border-box}
html,body,#root{height:100%}
body{margin:0;background:var(--bg-page);color:var(--text);font-family:var(--font-sans);-webkit-font-smoothing:antialiased}

.app-container{max-width:var(--max-width);margin:22px auto;padding:18px;display:flex;flex-direction:column;gap:16px;position:relative;z-index:10}

/* Header */
.app-header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006));border-radius:var(--cp-radius);border:1px solid var(--glass-border);box-shadow:var(--cp-elev);backdrop-filter: blur(10px) saturate(130%);-webkit-backdrop-filter: blur(10px) saturate(130%)}
.brand{display:flex;align-items:center;gap:14px}
.brand .logo{font-family:var(--font-display);font-weight:800;letter-spacing:1px;font-size:1.18rem;color:var(--text);position:relative;text-shadow:0 10px 40px rgba(2,6,23,0.6);background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent}
.brand .logo::after{content:'';position:absolute;left:50%;transform:translateX(-50%);bottom:-8px;width:48%;height:8px;border-radius:8px;background:linear-gradient(90deg,var(--accent),var(--accent-2));filter:blur(10px);opacity:0.85}

.brand .logo{ /* subtle float to keep the logo feeling alive */
  animation: none; /* disabled strong neon for a more premium, stable look */
}
.app-header { border-left: 1px solid transparent; border-right: 1px solid transparent; }

/* animated header sheen */
.app-header::after{
  content: '';
  position: absolute;
  left: -30%;
  top: 0;
  height: 100%;
  width: 30%;
  background: linear-gradient(120deg, rgba(255,255,255,0.02), rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  transform: skewX(-18deg) translateX(-100%);
  pointer-events: none;
  filter: blur(8px);
  animation: sheen 6s linear infinite;
}
@keyframes sheen{0%{transform:skewX(-18deg) translateX(-100%)}50%{transform:skewX(-18deg) translateX(120%)}100%{transform:skewX(-18deg) translateX(-100%)}}
.brand .tag{font-size:0.85rem;color:var(--muted)}
.header .controls{display:flex;gap:8px;align-items:center}
.icon-btn{background:transparent;border:1px solid transparent;padding:8px;border-radius:10px;color:var(--text);cursor:pointer;transition:var(--trans-fast)}
.icon-btn:hover{background:var(--glass);transform:translateY(-2px)}

/* Layout */
.main{display:grid;grid-template-columns:280px 1fr;gap:20px}
@media (max-width:960px){.main{grid-template-columns:1fr}}

.sidebar{background:var(--bg-surface);padding:12px;border-radius:12px;border:1px solid var(--border);box-shadow:var(--shadow-soft)}
.nav{display:flex;flex-direction:column;gap:8px}
.nav .tab{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;color:var(--muted);cursor:pointer;border:1px solid transparent}
.nav .tab:hover{background:var(--glass)}
.nav .tab.active{background:linear-gradient(180deg, rgba(46,199,255,0.06), rgba(90,160,255,0.02));color:var(--text);border-color:rgba(46,199,255,0.08);box-shadow:0 10px 26px rgba(10,24,34,0.45)}

.content-area{display:flex;flex-direction:column;gap:16px}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006));padding:16px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow-soft);backdrop-filter: blur(6px)}
.panel h2{margin:0 0 12px 0;font-size:1.125rem}

/* ENHANCED PREMIUM PANEL DESIGN */
.panel {
  background: linear-gradient(135deg, rgba(6,12,32,0.4) 0%, rgba(12,16,24,0.5) 50%, rgba(6,6,20,0.4) 100%);
  border: 1.5px solid rgba(0,212,255,0.12);
  box-shadow: 
    0 16px 48px rgba(2,6,23,0.7),
    inset 0 1px 0 rgba(255,255,255,0.05),
    0 0 30px rgba(0,212,255,0.05);
  backdrop-filter: blur(8px);
  position: relative;
  overflow: hidden;
}

.panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.25), transparent);
}

.panel h2 {
  background: linear-gradient(135deg, #00d4ff 0%, #b24bff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1.25rem;
  font-weight: 800;
  letter-spacing: 0.5px;
}

/* ENHANCED MAIN CONTENT */
.main-content {
  display: flex;
  flex-direction: column;
  gap: 18px;
  position: relative;
  z-index: 12;
}

.main-content::before {
  content: '';
  position: absolute;
  top: -100px;
  right: -200px;
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, rgba(0,212,255,0.08), transparent 70%);
  border-radius: 50%;
  pointer-events: none;
  z-index: -1;
}

/* Tab Container Enhancements */
.tab-container {
  display: flex;
  gap: 6px;
  overflow-x: auto;
  padding: 12px;
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  border: 1.5px solid rgba(0,212,255,0.12);
  border-radius: 14px;
  backdrop-filter: blur(8px);
  box-shadow: 0 12px 36px rgba(2,6,23,0.6);
}

.tab-button {
  padding: 10px 16px;
  border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.1);
  background: rgba(0,0,0,0.2);
  color: var(--muted);
  cursor: pointer;
  font-weight: 600;
  font-size: 0.9rem;
  white-space: nowrap;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: hidden;
}

.tab-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transform: translateX(-100%);
  transition: transform 0.6s ease;
}

.tab-button:hover {
  border-color: rgba(0,212,255,0.3);
  background: rgba(0,212,255,0.08);
  color: #00d4ff;
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0,212,255,0.15);
}

.tab-button.active {
  background: linear-gradient(135deg, #00d4ff, #b24bff);
  color: #041316;
  border-color: transparent;
  box-shadow: 0 12px 36px rgba(0,212,255,0.3);
  font-weight: 800;
}

.tab-button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* Input Section Enhancements */
.input-section {
  padding: 18px;
  background: linear-gradient(135deg, rgba(6,12,32,0.5), rgba(12,16,24,0.6));
  border: 1.5px solid rgba(0,212,255,0.15);
  border-radius: 14px;
  box-shadow: 0 16px 48px rgba(2,6,23,0.7);
  backdrop-filter: blur(8px);
}

.chat-input {
  background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(0,0,0,0.2));
  border: 1.5px solid rgba(0,212,255,0.2);
  border-radius: 12px;
  padding: 14px;
  color: var(--text);
  font-family: var(--font-sans);
  transition: all 0.3s ease;
}

.chat-input:focus {
  outline: none;
  border-color: #00d4ff;
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.05));
  box-shadow: 0 0 20px rgba(0,212,255,0.25);
}

.send-button {
  background: linear-gradient(135deg, #00d4ff, #b24bff);
  border: none;
  color: #041316;
  padding: 10px 16px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 700;
  transition: all 0.3s ease;
  box-shadow: 0 8px 24px rgba(0,212,255,0.2);
}

.send-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 12px 36px rgba(0,212,255,0.3);
}

.send-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Quick Feelings Enhancements */
.quick-feelings {
  margin-top: 12px;
  padding: 12px;
  background: rgba(0,212,255,0.05);
  border: 1.5px solid rgba(0,212,255,0.15);
  border-radius: 12px;
}

.feeling-buttons {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
}

.feeling-button {
  padding: 8px 14px;
  border-radius: 20px;
  border: 1.5px solid rgba(255,255,255,0.15);
  background: rgba(0,0,0,0.2);
  color: var(--text);
  cursor: pointer;
  font-weight: 600;
  font-size: 0.85rem;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.feeling-button:hover {
  border-color: rgba(0,212,255,0.4);
  background: rgba(0,212,255,0.1);
  color: #00d4ff;
  transform: scale(1.05);
  box-shadow: 0 6px 18px rgba(0,212,255,0.15);
}

.card{background:var(--bg-elev);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
.mono { font-family: var(--font-mono); font-size:0.95rem; }

/* Custom scrollbar for modern UI */
::-webkit-scrollbar{width:10px;height:10px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:linear-gradient(180deg, rgba(0,240,255,0.08), rgba(159,107,255,0.06));border-radius:999px;border:2px solid transparent;background-clip:padding-box}
::-webkit-scrollbar-thumb:hover{filter:brightness(1.08)}

/* Chat */
.chat-wrapper{display:flex;flex-direction:column;height:640px;border-radius:var(--cp-radius);overflow:hidden;border:1px solid var(--glass-border);background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.004));box-shadow:var(--elev-2);position:relative}

/* subtle inner rim glow */
.chat-wrapper::before{content:'';position:absolute;inset:0;border-radius:14px;padding:1px;background:linear-gradient(90deg, rgba(0,240,255,0.06), rgba(159,107,255,0.04));-webkit-mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000);mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000);pointer-events:none}
/* PREMIUM CHAT MESSAGES CONTAINER */
.chat-messages {
  flex: 1;
  overflow: auto;
  padding: 20px 24px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  background: linear-gradient(180deg, rgba(6,12,32,0.2), rgba(12,16,24,0.1));
  position: relative;
}

.chat-messages::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.1), transparent);
}

/* PREMIUM MESSAGE STYLING */
.message {
  max-width: 78%;
  padding: 14px 18px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
  border: 1.5px solid rgba(255,255,255,0.08);
  animation: slideIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  transition: all 0.3s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message:hover {
  border-color: rgba(0,212,255,0.15);
  box-shadow: 0 12px 36px rgba(0,212,255,0.1);
}

/* USER MESSAGE - CYAN/BLUE GRADIENT */
.message.user {
  align-self: flex-end;
  background: linear-gradient(135deg, rgba(0,212,255,0.15), rgba(178,75,255,0.1));
  color: var(--text);
  border: 1.5px solid rgba(0,212,255,0.25);
  box-shadow: 0 12px 40px rgba(0,212,255,0.15);
  border-radius: 18px 18px 4px 18px;
  max-width: 75%;
}

.message.user::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1.5px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.3), transparent);
  border-radius: 18px 18px 0 0;
}

.message.user:hover {
  border-color: rgba(0,212,255,0.4);
  box-shadow: 0 16px 48px rgba(0,212,255,0.2);
  transform: translateY(-2px);
}

/* AION MESSAGE - MAGENTA/PURPLE GRADIENT */
.message.aion {
  align-self: flex-start;
  border-radius: 18px 18px 18px 4px;
  background: linear-gradient(135deg, rgba(15,18,22,0.4), rgba(178,75,255,0.05));
  border: 1.5px solid rgba(178,75,255,0.2);
  box-shadow: 0 12px 40px rgba(178,75,255,0.1);
  max-width: 75%;
}

.message.aion::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1.5px;
  background: linear-gradient(90deg, transparent, rgba(178,75,255,0.4), transparent);
  border-radius: 18px 18px 0 0;
}

/* PREMIUM CHAT INPUT AREA */
.chat-input-area {
  display: flex;
  gap: 12px;
  padding: 16px 20px;
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  align-items: center;
  border-top: 1.5px solid rgba(0,212,255,0.15);
  backdrop-filter: blur(8px);
  position: relative;
}

.chat-input-area::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.15), transparent);
}

/* PREMIUM INPUT FIELD */
.input {
  flex: 1;
  padding: 12px 16px;
  border-radius: 12px;
  border: 1.5px solid rgba(0,212,255,0.2);
  background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(0,0,0,0.2));
  color: var(--text);
  outline: none;
  font-family: var(--font-sans);
  font-size: 1rem;
  transition: all 0.3s ease;
}

.input::placeholder {
  color: rgba(255,255,255,0.35);
}

.input:focus {
  border-color: #00d4ff;
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.05));
  box-shadow: 0 0 20px rgba(0,212,255,0.25), 0 0 0 8px rgba(0,212,255,0.08);
}

/* PREMIUM SEND BUTTON */
.send-btn {
  background: linear-gradient(135deg, #00d4ff, #b24bff);
  color: #041316;
  padding: 12px 24px;
  border-radius: 12px;
  border: none;
  font-weight: 800;
  font-size: 0.95rem;
  letter-spacing: 0.5px;
  cursor: pointer;
  box-shadow: 0 12px 36px rgba(0,212,255,0.25), inset 0 -2px 8px rgba(0,0,0,0.15);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: hidden;
}

.send-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.6s ease;
}

.send-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 18px 48px rgba(0,212,255,0.35), inset 0 -2px 8px rgba(0,0,0,0.2);
}

.send-btn:hover::before {
  left: 100%;
}

.send-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* Elevated glass button variant */
.btn.elevated{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
  border: 1px solid var(--glass-border);
  box-shadow: var(--elev-2);
  padding: 10px 14px; border-radius: 12px; font-weight:700; color:var(--text);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.btn.elevated:hover{ transform: translateY(-4px); box-shadow: 0 30px 80px rgba(0,0,0,0.6); }

/* Input and textarea polished */
.chat-input, textarea.chat-input { font-size: 1rem; font-family: var(--font-sans); padding: 12px 14px; border-radius: 12px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006)); border:1px solid var(--glass-border); color:var(--text); box-shadow: var(--elev-1); }
.chat-input::placeholder, textarea.chat-input::placeholder { color: rgba(233,246,255,0.46); }
.chat-input:focus, textarea.chat-input:focus { outline: none; box-shadow: 0 12px 40px rgba(46,199,255,0.06), 0 0 0 8px rgba(0,240,255,0.06); border-color: var(--accent); }

.btn{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--text);cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#041316;font-weight:700;border:none;box-shadow:0 8px 36px rgba(159,107,255,0.06)}

.status-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.status-item{background:transparent;padding:12px;border-radius:8px;border:1px solid var(--border)}
@media(max-width:900px){.status-grid{grid-template-columns:1fr}}

.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center}
.modal{background:var(--bg-surface);width:min(780px,96%);border-radius:12px;padding:18px;border:1px solid var(--border)}

/* Utilities */
.flex{display:flex}.flex-col{flex-direction:column}.gap-sm{gap:8px}.gap-md{gap:16px}
.small{font-size:0.9rem}

:focus{outline:none}
:focus-visible{box-shadow:0 0 0 6px var(--focus);border-radius:8px}

.fade-up{animation:fadeUp .36s var(--trans-fast) both}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

@media (max-width:720px){.chat-wrapper{height:480px}.sidebar{display:none}.header .brand .tag{display:none}}

/* Simple helpers */
.kv{display:flex;justify-content:space-between;align-items:center}

/* End of App.css */

/* Glassy header variant to ensure high contrast for the brand/logo */
.header-glass {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-bottom: 1px solid rgba(255,255,255,0.06);
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
}

/* Stronger brand mark for light and dark themes */
/* Keep brand-glass minimal - typography only */
.brand-glass .brand-logo { color: var(--text-primary); }

/* Ensure brand is visible in light-theme too */
/* Light theme gradient fallback */
body.light-theme .brand-logo {
  background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
}

/* Ambient animated background + particles */

/* animated gradient overlay */
.bg-ambient {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background: var(--bg-gradient);
  opacity: 0.9;
  mix-blend-mode: screen;
  animation: ambientShift 18s linear infinite;
}

@keyframes ambientShift{
  0% { transform: translate3d(0,0,0) scale(1); filter: hue-rotate(0deg); }
  50% { transform: translate3d(1.5%, -1%, 0) scale(1.02); filter: hue-rotate(20deg); }
  100% { transform: translate3d(0,0,0) scale(1); filter: hue-rotate(0deg); }
}

/*
  Compatibility helpers
  The project contains many component-scoped class names (ChatPanel, panels, lightbox, etc.).
  Provide compact, low-risk fallbacks here so existing components pick up the premium theme
  without each component having to define the same variables.
*/

/* Layout helpers */
.main-content { display:block; position:relative; z-index:12; }
.input-section { margin-top: 14px; }
.input-container { display:flex; gap:12px; align-items:flex-end; background: linear-gradient(180deg, rgba(255,255,255,0.006), rgba(255,255,255,0.002)); padding:12px; border-radius:12px; border:1px solid var(--glass-border); }
.input-actions { display:flex; gap:8px; align-items:center }

/* Buttons & CTAs */
.primary-cta, .primary-cta.btn, .btn.primary, .send-button { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color: #061016; padding:10px 14px; border-radius:12px; border:none; font-weight:800; cursor:pointer; box-shadow: var(--elev-1); transition: transform .16s var(--ease-in-out); }
.primary-cta:hover, .btn.primary:hover, .send-button:hover { transform: translateY(-3px); box-shadow: var(--elev-2); }
.ghost-cta { background: transparent; border:1px solid var(--glass-border); color: var(--text); padding:8px 12px; border-radius:10px; }
.prompt-chip { background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006)); border-radius:999px; padding:6px 10px; border:1px solid var(--glass-border); color:var(--muted); cursor:pointer }

/* Chat / Message compat */
/* Chat panel visuals (messages, avatars, typing indicator) are managed by
  `ChatPanel.css` to keep the premium, theme-aware appearance isolated.
  App.css intentionally does not define message/typing/avatar styles
  to avoid overriding ChatPanel's specialized rules. */

/* Welcome/hero visuals are handled by ChatPanel.css's .welcome-hero and
  related classes. App.css does not provide duplicate welcome/hero rules
  to avoid conflicts with the panel's premium styling. */
.stat-value { font-weight:900; font-size:1.5rem; color:var(--text) }
.stat-label { font-size:0.85rem; color:var(--muted) }

/* Orb visuals */
.orb-wrap { width:320px; height:320px; display:flex; align-items:center; justify-content:center }
.orb-core { width:240px; height:240px; border-radius:999px; background: radial-gradient(circle at 30% 30%, rgba(255,209,102,0.06), rgba(128,90,213,0.04)); filter: blur(18px) }
.orb-glow { position:absolute; width:320px; height:320px; border-radius:999px; box-shadow: 0 40px 120px rgba(128,90,213,0.06) }
.orb-ring { position:absolute; border-radius:999px; border:1px solid rgba(255,255,255,0.03) }

/* subtle particle field using repeating-radial-gradient animated by background-position */
.bg-particles{
  position: fixed; inset: 0; z-index:1; pointer-events:none; opacity:0.05;
  background-image: radial-gradient(circle at 10% 20%, rgba(255,255,255,0.04) 0.5px, transparent 1px), radial-gradient(circle at 40% 70%, rgba(0,240,255,0.04) 0.6px, transparent 1px), radial-gradient(circle at 80% 30%, rgba(159,107,255,0.03) 0.7px, transparent 1px);
  background-size: 180px 180px, 260px 260px, 360px 360px;
  animation: particlesDrift 40s linear infinite;
}

@keyframes particlesDrift{
  from { background-position: 0 0, 0 0, 0 0; }
  to   { background-position: -600px -300px, 500px 250px, -900px 600px; }
}

/* Respect energy-saver and reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .bg-ambient, .bg-particles, .background-animation { animation: none !important; transition: none !important; }
}
.energy-saver .bg-ambient, .energy-saver .bg-particles, .energy-saver .background-animation {
  animation: none !important;
  opacity: 0.02 !important;
}

/* Tabs */
.tab-container { display:flex; gap:8px; overflow-x:auto; padding-bottom:6px; margin-bottom:18px; }
.tab-button { padding:8px 16px; border-radius:999px; background: var(--bg-muted); color: var(--text-primary); border:1px solid transparent; cursor:pointer; font-weight:600; white-space:nowrap; }

/* --- Brand visibility fallbacks (kept minimal) --- */
/* Minimal fallbacks so component-specific brand/logo styles can override as needed. Avoid using !important. */
.app-header .brand-logo, .brand-logo {
  /* Minimal fallbacks so that component-specific styles can override as needed. */
  color: inherit;
  background: transparent;
  border: none;
  box-shadow: none;
}
.app-header .brand-name, .brand-name {
  text-shadow: 0 2px 6px rgba(0,0,0,0.12);
}

/* Helper: center the brand in header */
.center-brand .app-header { justify-content: center !important; }
.center-brand .header-left, .center-brand .header-right { position: absolute; top: 50%; transform: translateY(-50%); }

.tab-button:hover { transform: translateY(-2px); }
.tab-button.active { background: rgba(255,255,255,0.03); color:var(--text-primary); border-color:transparent; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

/* Stronger neon/glass treatment for sidebar tabs */
.nav .tab{transition:transform .14s ease, box-shadow .14s ease, border-color .14s ease, background .14s ease}
.nav .tab{background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.02)}
.nav .tab:hover{transform:translateY(-4px);box-shadow:0 10px 36px rgba(0,240,255,0.06);border-color:rgba(0,240,255,0.08)}
.nav .tab{position:relative;overflow:hidden}
.nav .tab::after{content:'';position:absolute;left:0;bottom:0;height:3px;width:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .28s cubic-bezier(.2,.9,.2,1)}
.nav .tab:hover::after{width:100%}
.nav .tab.active{background:linear-gradient(180deg, rgba(0,240,255,0.04), rgba(159,107,255,0.02));border-color:rgba(0,240,255,0.12);box-shadow:0 18px 60px rgba(0,240,255,0.12);color:var(--text)}

/* Avatar neon ring & pulse */
.avatar, .aion-avatar, .user-avatar { position:relative; overflow:visible; }
.avatar::after, .aion-avatar::after, .user-avatar::after {
  content: '';
  position: absolute;
  left: -6px; top: -6px; right: -6px; bottom: -6px;
  border-radius: 999px;
  pointer-events: none;
  background: radial-gradient(circle at 30% 20%, rgba(0,240,255,0.22), transparent 12%), radial-gradient(circle at 70% 80%, rgba(159,107,255,0.16), transparent 14%);
  filter: blur(8px);
  opacity: 0.9;
  transform: scale(0.98);
  transition: transform .28s ease, opacity .28s ease;
}
.avatar.pulse::after, .aion-avatar.pulse::after, .user-avatar.pulse::after { animation: avatarPulse 2.6s ease-in-out infinite; }
@keyframes avatarPulse{0%{transform:scale(0.96);opacity:0.85}50%{transform:scale(1.06);opacity:1}100%{transform:scale(0.96);opacity:0.85}}

/* Pulse AION avatar by default (no JSX changes required) */
.aion-avatar::after { animation: avatarPulse 2.6s ease-in-out infinite; }

/* ensure chat messages are above ambient background layers */
.chat-wrapper, .panel, .sidebar { position: relative; z-index: 12 }

/* Accessibility helper: visually-hidden but available to screen readers */
.sr-only {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
  border: 0; padding: 0; margin: -1px;
}

/* ======================================================================
   Modal / lightbox / creative-panel visibility fixes
   Ensure settings modals and the Creative panel are readable in both
   dark and light themes. This addresses cases where backdrop/overlay
   or transparent cards made text nearly invisible.
   ======================================================================
*/

/* Increase stacking context so modals and creative panel sit above ambient layers */
.modal-backdrop, .ai-analysis-modal-backdrop, .mem-edit-backdrop, .lightbox-backdrop { z-index: 99999; }

/* Generic modal/content surface styling */
.modal, .ai-analysis-modal, .mem-edit-modal, .lightbox-content, .creative-panel, .pins-drawer {
  background: linear-gradient(180deg, var(--bg-surface), var(--bg-card));
  color: var(--text);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  box-shadow: 0 24px 80px rgba(2,6,23,0.7);
  -webkit-font-smoothing:antialiased;
}

/* Ensure textual children inside modals inherit readable colors */
.modal *, .ai-analysis-modal *, .mem-edit-modal *, .lightbox-content *, .creative-panel * {
  color: inherit;
}

/* Inputs and textareas inside modals */
.mem-edit-modal input, .mem-edit-modal textarea, .ai-analysis-modal input, .ai-analysis-modal textarea, .modal input, .modal textarea {
  background: transparent; color: var(--text); border: 1px solid var(--glass-border); padding:8px; border-radius:8px;
}
.mem-edit-modal input::placeholder, .mem-edit-modal textarea::placeholder, .ai-analysis-modal input::placeholder { color: var(--muted); }

/* Creative panel adjustments */
.creative-panel {
  position: relative;
  z-index: 50; /* above default content but below full-screen modals */
  background: linear-gradient(180deg, var(--bg-surface), rgba(255,255,255,0.01));
  border: 1px solid var(--glass-border);
  color: var(--text);
  padding: 18px;
  border-radius: 12px;
}
.creative-panel .creative-header h3, .creative-panel .creative-description, .creative-panel label { color: var(--text); }
.creative-panel .generate-button, .creative-panel .action-button { color: var(--text); border:1px solid var(--glass-border); background: transparent; }

/* Light-theme specific overrides to ensure contrast on white surfaces */
body.light-theme .modal, body.light-theme .ai-analysis-modal, body.light-theme .mem-edit-modal, body.light-theme .creative-panel, body.light-theme .lightbox-content {
  background: linear-gradient(180deg, #ffffff, #fbfbfb);
  color: var(--text);
  border: 1px solid rgba(3,9,14,0.06);
  box-shadow: 0 18px 60px rgba(2,6,23,0.12);
}

/* Ensure mark highlights remain legible in both themes */
mark { padding:0 4px; border-radius:4px; font-weight:600; }
body.light-theme mark { color: #041316; }

/* Lightbox backdrop clickable area should remain semi-opaque in light theme */
body.light-theme .lightbox-backdrop, body.light-theme .modal-backdrop { background: rgba(0,0,0,0.45); }

/* Final overrides: ensure Creative panel is readable regardless of earlier rules
   This block is intentionally placed at the end and uses slightly higher
   specificity to beat earlier generic panel styles. */
.app-container .creative-panel {
  background: var(--bg-surface) !important;
  color: var(--text) !important;
  border: 1px solid var(--glass-border) !important;
  box-shadow: 0 18px 48px rgba(0,0,0,0.55) !important;
  opacity: 1 !important;
}

/* Inputs, textareas, selects inside creative panel */
.app-container .creative-panel textarea,
.app-container .creative-panel input,
.app-container .creative-panel select {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
  border: 1px solid var(--glass-border);
  color: var(--text) !important;
}

/* Make prompt textarea more prominent */
.app-container .creative-panel textarea {
  background: rgba(0,0,0,0.45);
  color: var(--text) !important;
  min-height: 64px;
  padding: 12px;
  border-radius: 8px;
}

/* Light theme: ensure dark text on light panel */
body.light-theme .app-container .creative-panel {
  background: #ffffff !important;
  color: #08141b !important;
  border: 1px solid rgba(3,9,14,0.06) !important;
}
body.light-theme .app-container .creative-panel textarea,
body.light-theme .app-container .creative-panel input,
body.light-theme .app-container .creative-panel select {
  background: rgba(0,0,0,0.04);
  color: #08141b !important;
}

/* Ensure header and labels are fully opaque and visible */
.app-container .creative-panel .creative-header h3,
.app-container .creative-panel .creative-description,
.app-container .creative-panel label,
.app-container .creative-panel .type-button,
.app-container .creative-panel .preset { opacity: 1 !important; color: inherit !important; }

/* Settings / modal card visibility fixes
   Some modal implementations render card tiles with very light text over
   white backgrounds. Force readable backgrounds and text for modal cards
   used by Settings, AI Analysis and other rich modals. */
.ai-analysis-modal .card,
.ai-analysis-modal .media-item,
.rich-modal-content .card,
.rich-modal-content .media-item,
.settings-modal .card,
.settings-modal .media-item,
.ai-analysis-modal .panel-card,
.rich-modal-content .panel-card {
  background: linear-gradient(180deg, var(--bg-card), rgba(255,255,255,0.01)) !important;
  color: var(--text) !important;
  border: 1px solid var(--glass-border) !important;
  box-shadow: 0 8px 30px rgba(0,0,0,0.45) !important;
}

.ai-analysis-modal .card h3,
.rich-modal-content .card h3,
.ai-analysis-modal .card h4,
.rich-modal-content .card h4,
.settings-modal .card h3,
.settings-modal .card h4 {
  color: var(--text) !important;
  opacity: 1 !important;
}

/* Make sure nested controls are readable */
.ai-analysis-modal .card *,
.rich-modal-content .card *,
.settings-modal .card * {
  color: inherit !important;
}

/* Light theme: white cards keep dark text */
body.light-theme .ai-analysis-modal .card,
body.light-theme .rich-modal-content .card,
body.light-theme .settings-modal .card {
  background: #ffffff !important;
  color: #08141b !important;
  border: 1px solid rgba(3,9,14,0.06) !important;
}

/* ---------------------------
   Icon & Action Buttons
   --------------------------- */
.icon-button { width:48px; height:48px; border-radius:12px; display:flex; align-items:center; justify-content:center; cursor:pointer; background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); box-shadow: 0 6px 18px rgba(0,0,0,0.45); backdrop-filter: blur(6px); transition: transform .18s var(--ease-in-out); }
.icon-button:hover { transform: translateY(-4px); box-shadow: 0 10px 30px rgba(0,0,0,0.55); }
.icon-button i { display:block; width:22px; height:22px; background-size:contain; background-repeat:no-repeat; background-position:center; }

/* Premium SVG icon mappings (use currentColor for theming) */
.icon-button i { color: var(--text-primary); }
.icon-button:hover i { color: var(--text-primary); opacity: 0.95; }

/* Microphone icon */
.icon-mic i, .icon-mic { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2z'/></svg>"); }

/* Settings (gear) icon */
.icon-settings i, .icon-settings { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M19.14 12.936a7.997 7.997 0 0 0 0-1.872l2.036-1.58a.5.5 0 0 0 .12-.637l-1.93-3.34a.5.5 0 0 0-.607-.22l-2.396.96a8.12 8.12 0 0 0-1.62-.94l-.36-2.54a.5.5 0 0 0-.497-.42h-3.86a.5.5 0 0 0-.497.42l-.36 2.54c-.57.24-1.11.56-1.62.94l-2.396-.96a.5.5 0 0 0-.607.22L2.7 8.847a.5.5 0 0 0 .12.637l2.036 1.58a7.997 7.997 0 0 0 0 1.872L2.82 15.53a.5.5 0 0 0-.12.637l1.93 3.34c.154.267.48.37.757.27l2.396-.96c.51.38 1.05.7 1.62.94l.36 2.54c.05.28.28.48.56.48h3.86c.28 0 .51-.2.56-.48l.36-2.54c.57-.24 1.11-.56 1.62-.94l2.396.96c.277.1.603 0 .757-.27l1.93-3.34a.5.5 0 0 0-.12-.637l-2.02-1.58zM12 15.5A3.5 3.5 0 1 1 12 8.5a3.5 3.5 0 0 1 0 7z'/></svg>"); }

/* Star / favorite icon */
.icon-star i, .icon-star { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/></svg>"); }

/* Send / paper-plane icon */
.icon-send i, .icon-send { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M2 21l21-9L2 3v7l15 2-15 2v7z'/></svg>"); }

/* Upload icon (ensure it exists as premium SVG) */
.icon-upload i, .icon-upload { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M5 20h14v-2H5v2zm7-18L5.33 9h3.84v6h4.66V9h3.84L12 2z'/></svg>"); }

/* Ensure icons scale nicely */
.icon-button i { width:20px; height:20px; }

.send-button { width:56px; height:56px; border-radius:14px; display:flex; align-items:center; justify-content:center; background: linear-gradient(135deg,#ffffff,#e6e6e6); color:#0b0f14; border:none; box-shadow: 0 12px 30px rgba(0,0,0,0.45); }
.send-button:hover { transform: translateY(-4px) scale(1.03); }

/* ---------------------------
   Premium panel enhancements
   Applies to SearchPanel, MathPanel, FileUploadPanel and other panels
   --------------------------- */
.panel-card {
  background: linear-gradient(180deg, #fff 60%, #eaeaea 100%);
  border: 1px solid #111;
  border-radius: 14px;
  padding: 16px;
  box-shadow: 0 12px 36px rgba(0,0,0,0.18);
}

.result-card, .file-item, .uploaded-file-card, .agent-card, .math-panel, .search-results {
  transition: transform 0.18s var(--ease-in-out), box-shadow 0.18s var(--ease-in-out);
}
.result-card:hover, .file-item:hover, .uploaded-file-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 48px rgba(2,6,23,0.55);
}

/* Lightbox / modal polish */
.lightbox, .video-lightbox, .rich-modal { background: var(--bg-modal-overlay); display:flex; align-items:center; justify-content:center; }
.lightbox-content, .video-lightbox-content, .rich-modal-body {
  background: linear-gradient(180deg, var(--bg-card), rgba(255,255,255,0.01));
  border-radius: 12px;
  padding: 18px;
  width: min(92vw, 1200px);
  max-height: 88vh;
  overflow: auto;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 28px 80px rgba(2,6,23,0.7);
}

/* Buttons */
.btn-primary, .primary-cta { background: linear-gradient(90deg,#ffffff,#efefef); color: #0b0f14; border: none; padding: 10px 14px; border-radius: 12px; box-shadow: 0 12px 36px rgba(0,0,0,0.5); }
.btn-ghost, .ghost-cta { background: transparent; border: 1px solid rgba(255,255,255,0.06); color: var(--text-primary); padding: 8px 12px; border-radius: 10px; }

/* Utility for inner panels */
.panel-header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
.panel-subtitle { color: var(--text-muted); font-size: 0.9rem; }

/* Ensure images and media look crisp and contained */
.lazy-img { width:100%; height:auto; border-radius:8px; object-fit:cover; }

/* Small responsive tweak for panels */
@media (max-width: 768px) {
  .panel-card { padding: 12px; border-radius: 12px; }
  .brand-mark { width: 56px; height: 56px; }
}

/* ---------------------------
   Chat: messages & input
   --------------------------- */
/* Chat panel layout and interactive elements are controlled in
  `ChatPanel.css`. App.css intentionally avoids defining
  `.chat-container`, `.message-wrapper`, `.message-content`,
  `.aion-avatar`, `.message-actions`, and `.typing-indicator` so the
  ChatPanel component can provide a consistent premium look without
  being overridden by global app styles. */

/* Empty state */
.empty-chat-container { display:flex; flex-direction:column; align-items:center; justify-content:center; padding:30px; gap:12px; color:var(--text-muted); text-align:center; }
.welcome-logo { width:90px; height:90px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:900; font-size:2.6rem; color:var(--color-secondary); background:var(--color-primary); border:2px solid var(--color-secondary); box-shadow: 0 6px 24px rgba(0,0,0,0.18); }

/* Input area */
.input-section { border-top: 1px solid var(--border-strong); padding-top:18px; margin-top:auto; }
.input-container { position:relative; }

/* ================================ */
/* SearchPanel specific styles      */
/* ================================ */

/* Rich Result Modal */
.rich-modal { position: fixed; inset: 0; background: var(--bg-modal-overlay); display:flex; align-items:center; justify-content:center; z-index:1200; padding:20px; }
.rich-modal-content { width:100%; max-width:1100px; max-height:90vh; overflow:auto; background: linear-gradient(180deg,var(--bg-surface), var(--bg-card)); border-radius:14px; border:1px solid var(--border-strong); box-shadow: var(--shadow-lg); display:flex; flex-direction:column; }
.rich-modal-header { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 20px; border-bottom:1px solid var(--border-strong); }
.rich-modal-header h3 { margin:0; font-size:1.05rem; }
.rich-modal-meta { display:flex; gap:10px; align-items:center; color:var(--text-muted); font-size:.9rem; }
.rich-modal .close { background:transparent; border:none; color:var(--text-muted); font-size:1.6rem; cursor:pointer; }

.rich-modal-body { display:flex; gap:18px; padding:18px; }
.rich-left { width:58%; display:flex; flex-direction:column; gap:12px; }
.rich-right { width:42%; display:flex; flex-direction:column; gap:12px; }

.rich-media-carousel { display:flex; gap:10px; flex-wrap:wrap; align-items:flex-start; }
.rich-media-carousel .media-item { width: calc(50% - 10px); background: var(--bg-card); border-radius:8px; overflow:hidden; padding:8px; border:1px solid var(--border-soft); }
.rich-media-carousel .media-item.image img { width:100%; height:160px; object-fit:cover; display:block; border-radius:6px; }
.rich-media-carousel .media-item.video video { width:100%; height:160px; display:block; border-radius:6px; }
.rich-media-carousel .media-item.file { display:flex; gap:10px; align-items:center; padding:12px; }
.file-card { display:flex; gap:10px; align-items:center; }
.file-card .icon-file { width:44px; height:44px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:8px; display:flex; align-items:center; justify-content:center; }
.file-meta .file-name { font-weight:700; color:var(--text-primary); }

.rich-links { border-top:1px dashed rgba(255,255,255,0.03); padding-top:10px; }
.links-list { display:flex; flex-direction:column; gap:8px; max-height:220px; overflow:auto; }
.outlink-item { display:flex; justify-content:space-between; align-items:center; gap:10px; padding:8px; border-radius:8px; background: transparent; }
.outlink-item a { color:var(--color-secondary); font-weight:700; }

.quick-actions { display:flex; gap:8px; flex-wrap:wrap; }
.quick-actions button { padding:8px 12px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; cursor:pointer; color:var(--text-primary); }

.insights { background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); padding:12px; border-radius:8px; border:1px solid var(--border-soft); }
.insight-text { min-height:120px; color:var(--text-muted); white-space:pre-wrap; }
.insight-actions { display:flex; gap:8px; margin-top:8px; }

.file-attachments ul { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; }
.attachment-item { display:flex; justify-content:space-between; align-items:center; gap:8px; padding:8px; border-radius:8px; border:1px solid var(--border-soft); }

/* Image & Video Galleries (re-usable) */
.image-gallery-container, .video-gallery-container { background: transparent; padding:8px 0; }
.image-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(140px,1fr)); gap:10px; }
.image-item { cursor:pointer; border-radius:8px; overflow:hidden; border:1px solid var(--border-soft); background:var(--bg-card); transition: transform .12s ease, box-shadow .12s ease; }
.image-item:hover { transform: translateY(-4px); box-shadow:var(--shadow-sm); }
.image-wrapper img.lazy-img { width:100%; height:120px; object-fit:cover; display:block; }
.image-caption { padding:8px; font-size:.9rem; color:var(--text-muted); }

.lightbox-content { position:relative; max-width:84%; max-height:84%; display:flex; align-items:center; justify-content:center; }
.lightbox-close { position:absolute; right:8px; top:8px; background:transparent; border:none; font-size:2rem; color:white; cursor:pointer; z-index:2; }
.lightbox-nav { position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.4); border:none; color:white; font-size:2rem; padding:8px 12px; border-radius:8px; cursor:pointer; }
.lightbox-nav.prev { left:8px; }
.lightbox-nav.next { right:8px; }
.lightbox img { max-width:100%; max-height:80vh; border-radius:8px; }

/* Lightbox overlay */
.lightbox-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 20px;
}
.lightbox-content {
  max-width: 95%;
  max-height: 95%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}
.lightbox-media {
  max-width: 100%;
  max-height: 80vh;
  border-radius: 8px;
  box-shadow: var(--shadow-lg);
}
.lightbox-close {
  position: absolute;
  top: 18px;
  right: 18px;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: 2rem;
  cursor: pointer;
}

/* Attachment metadata & progress */
.attachment-meta { display:flex; align-items:center; gap:8px; }
.attachment-name { font-weight:700; color:var(--text-primary); }
.attachment-size { font-size:0.85rem; color:var(--text-muted); }
.attachment-type { font-size:0.8rem; color:var(--text-muted); }
.attachment-progress { width:160px; height:8px; background:var(--bg-muted); border-radius:999px; overflow:hidden; }
.attachment-progress > .fill { height:100%; background: linear-gradient(90deg,var(--accent-color),var(--color-secondary)); width:0%; transition: width .25s ease; }

/* Video Lightbox */
.video-lightbox .video-lightbox-content { max-width:900px; width:100%; background:transparent; border-radius:12px; }
.video-player-wrap video { width:100%; height:auto; border-radius:8px; }

/* Video thumbnails */
.video-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(200px,1fr)); gap:12px; }
.video-item { cursor:pointer; border-radius:8px; overflow:hidden; border:1px solid var(--border-soft); background:var(--bg-card); }
.video-thumb { position:relative; height:120px; display:flex; align-items:center; justify-content:center; }
.video-thumb img, .video-thumb video { width:100%; height:100%; object-fit:cover; }
.video-play-overlay { position:absolute; left:8px; bottom:8px; background: rgba(0,0,0,0.5); padding:6px 8px; border-radius:6px; color:white; font-weight:700; }

/* Advanced Filters panel */
.advanced-filters { position:relative; }
.filter-toggle { padding:10px 12px; border-radius:10px; border:1px solid var(--border-soft); background:transparent; cursor:pointer; color:var(--text-primary); }
.filter-panel { position:absolute; right:0; top:48px; width:360px; max-width:calc(100vw - 24px); background:var(--bg-surface); border:1px solid var(--border-strong); border-radius:12px; padding:14px; box-shadow:var(--shadow-lg); z-index:1100; }
.filter-tabs { display:flex; gap:8px; margin-bottom:10px; }
.filter-tab-content { max-height:320px; overflow:auto; padding-right:8px; }
.filter-group { margin-bottom:12px; }
.filter-group label { display:block; margin-bottom:6px; color:var(--text-muted); }
.filter-options { display:flex; gap:8px; flex-wrap:wrap; }
.filter-option { display:flex; gap:8px; align-items:center; }
.filter-actions { display:flex; justify-content:space-between; gap:8px; margin-top:8px; }
.clear-filters, .apply-filters { padding:8px 12px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; cursor:pointer; }

/* Knowledge graph svg wrapper */
.knowledge-graph-svg-wrapper { width:100%; height:100%; min-height:260px; border-radius:8px; overflow:hidden; }

/* Timeline & plan */
.search-timeline { background: linear-gradient(180deg,var(--bg-card), rgba(255,255,255,0.01)); border:1px solid var(--border-soft); padding:12px; border-radius:10px; }
.timeline { display:flex; gap:8px; overflow:auto; padding:8px 0; }
.timeline-step { min-width:220px; padding:10px; border-radius:8px; background:transparent; border:1px solid transparent; }
.timeline-step.current { border-color: var(--color-secondary); box-shadow: var(--shadow-sm); }

/* ---------------------------
   ProceduresPanel specific styles
   Ensures ProceduresPanel.js uses the app theme without editing the component
   --------------------------- */
.procedures-panel { /* prefer dark panel by default to match rest of app */
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px;
  box-shadow: var(--shadow-soft);
}

.procedures-panel .panel-header { margin-bottom:12px }

.procedures-panel .back-button {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  padding: 8px 10px;
  border-radius: 10px;
  cursor: pointer;
}
.procedures-panel .back-button:hover { background: var(--glass); transform: translateY(-2px) }

.procedures-actions { display:flex; gap:16px; flex-wrap:wrap; align-items:flex-start; margin-bottom:12px }
.create-procedure-form { display:flex; flex-direction:column; gap:8px; min-width:240px; max-width:560px }
.create-procedure-form .input, .create-procedure-form input, .create-procedure-form textarea { width:100% }

.procedure-search { display:flex; gap:8px; align-items:center }
.procedure-search input { min-width:180px }

/* Reuse app input/button tokens where possible */
.procedures-panel input, .procedures-panel textarea { padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:transparent; color:var(--text); outline:none }
.procedures-panel input:focus, .procedures-panel textarea:focus { box-shadow:0 10px 30px rgba(2,10,14,0.6), 0 0 0 6px var(--focus) }

.procedures-panel button { padding:8px 12px; border-radius:10px; border:1px solid var(--border); background:transparent; color:var(--text); cursor:pointer }
.procedures-panel button.primary, .procedures-panel button.btn-primary { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:#041316; border:none }
.procedures-panel button.ghost { background:transparent; border:1px solid rgba(255,255,255,0.03) }

.procedure-list { display:flex; flex-direction:column; gap:12px; margin-top:8px }
.procedure-item { padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent) }
.procedure-head { display:flex; justify-content:space-between; align-items:center; gap:8px }
.procedure-head strong { font-size:1rem }
.procedure-item ol { margin:8px 0 0 18px }
.procedure-item pre { white-space:pre-wrap; background: rgba(255,255,255,0.02); padding:8px; border-radius:8px }

@media (max-width:720px) {
  .procedures-actions { flex-direction:column }
  .procedure-search { width:100%; justify-content:flex-start }
}
.progress-bar { height:8px; width:100%; background:var(--bg-muted); border-radius:999px; overflow:hidden; }
.progress-fill { height:100%; background: linear-gradient(90deg,var(--color-secondary),var(--color-primary)); }

/* Result detail sections */
.result-details { padding:12px 0 0 0; }
.detail-section { margin-bottom:12px; }
.concept-tag, .entity-tag { background: rgba(255,255,255,0.02); padding:6px 8px; border-radius:8px; margin-right:6px; display:inline-block; color:var(--text-muted); }

/* Accessibility & small screens */
@media (max-width: 980px) {
  .rich-modal-body { flex-direction:column; }
  .rich-left, .rich-right { width:100%; }
  .image-grid { grid-template-columns: repeat(auto-fill, minmax(120px,1fr)); }
  .video-grid { grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); }
}

@media (max-width: 520px) {
  .filter-panel { left:8px; right:8px; top:56px; width:auto; }
  .rich-modal-content { margin:8px; }
  .lightbox-content { max-width:95%; }
}

/* Modal animation & accessibility helpers */
.modal-fade-in { animation: modalEnter .22s ease forwards; }
.modal-fade-out { animation: modalExit .18s ease forwards; }
@keyframes modalEnter { from { opacity: 0; transform: translateY(6px) scale(.995); } to { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes modalExit { from { opacity: 1; transform: translateY(0) scale(1); } to { opacity: 0; transform: translateY(6px) scale(.995); } }

/* When modal open, prevent body scroll (applied to body.modal-open via JS) */
body.modal-open { overflow: hidden; padding-right: 12px; }

/* Focus ring for interactive elements inside modal */
.rich-modal-content :focus { outline: 3px solid var(--focus-ring); outline-offset: 2px; }

.chat-input { width:100%; min-height:56px; max-height:220px; padding:14px 120px 14px 25px; border-radius:999px; background:var(--bg-surface); color:var(--text-primary); border:1px solid var(--border-strong); resize:none; font-size:1rem; }
.chat-input:focus { box-shadow: 0 0 0 4px var(--focus-ring); border-color: var(--border-focus); outline:none; }
.input-actions { position:absolute; right:10px; top:50%; transform: translateY(-50%); display:flex; gap:8px; align-items:center; }

/* Panels */
.panel-card, .agent-card { background: var(--bg-card); border-radius: var(--rounded); border:1px solid var(--border-strong); padding:20px; box-shadow:none; margin-bottom:20px; }
.panel-header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }

/* Creative panel */
.creative-panel { padding:18px; background: var(--bg-card); border-radius: var(--rounded); }
.type-button { padding:8px 12px; border-radius:10px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; font-weight:700; }

/* Uploaded files panel (premium) */
.uploaded-files-panel { padding:12px 0; }
.uploaded-files-grid { display:flex; gap:12px; flex-wrap:wrap; align-items:flex-start; }
.uploaded-file-card { display:flex; flex-direction:column; gap:8px; align-items:flex-start; padding:12px; min-width:160px; max-width:320px; box-sizing: border-box; }
.uploaded-file-card .file-thumb { width:100%; height:110px; max-height:180px; border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.005)); }
.uploaded-file-card .file-thumb img { width:100%; height:100%; object-fit:cover; display:block; max-width:100%; max-height:100%; }

/* defensive: ensure images inside cards never overflow the layout */
.uploaded-file-card img, .uploaded-file-card .file-thumb img { max-width:100%; height:auto; display:block; }

/* Search panel (consolidated) */
.search-panel { display:flex; flex-direction:column; gap:16px; flex:1; overflow-y:auto; padding:18px; }
.search-panel-header { display:flex; justify-content:space-between; align-items:center; gap:12px; padding-bottom:15px; border-bottom:1px solid var(--border-strong); }
.search-input-container { display:flex; gap:12px; align-items:center; }
.search-input { width:100%; padding:10px 12px; border:1px solid var(--border-soft); border-radius:8px; background:transparent; color:var(--text-primary); }
.provider-selector {
  display: -webkit-box; /* fallback */
  display: -ms-flexbox; /* IE10 */
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-box-pack: start;
  -ms-flex-pack: start;
  justify-content: flex-start;
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin-left: 6px;
}
.provider-toggle {
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 14px;
  background: rgba(255,255,255,0.02);
  color: var(--text-primary);
  font-size: 13px;
  cursor: pointer;
  border: 1px solid var(--border-soft);
  text-decoration: none;
  user-select: none;
}
.provider-toggle input[type='checkbox'] { 
  /* accent-color is supported in modern browsers; fallback handled via custom checkbox if needed */
  -webkit-appearance: checkbox;
  appearance: checkbox;
}

/* Accessible focus ring for keyboard users */
.provider-toggle:focus, .provider-toggle input[type='checkbox']:focus {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

/* Create a lightweight custom checkbox visual that works in browsers without accent-color support.
   HTML structure expected: <label class="provider-toggle"><input type="checkbox" /><span>Label</span></label>
*/
.provider-toggle { position: relative; }
.provider-toggle input[type='checkbox'] {
  /* Visually hide native checkbox but keep it accessible to screen readers */
  position: absolute !important;
  opacity: 0 !important;
  width: 1px !important;
  height: 1px !important;
  margin: -1px !important;
  padding: 0 !important;
  overflow: hidden !important;
  clip: rect(0 0 0 0) !important;
  clip-path: inset(50%) !important;
  border: 0 !important;
  white-space: nowrap !important;
}
.provider-toggle span { display: inline-flex; align-items: center; }
.provider-toggle span::before {
  content: '';
  display: inline-block;
  width: 16px;
  height: 16px;
  min-width: 16px;
  border-radius: 4px;
  border: 1px solid var(--border-soft);
  background: transparent;
  box-sizing: border-box;
  margin-right: 8px;
}
.provider-toggle input[type='checkbox']:checked + span::before {
  background: #2563eb;
  border-color: #2563eb;
}
.provider-toggle input[type='checkbox']:checked + span::after {
  content: '';
  color: #fff;
  font-size: 12px;
  line-height: 16px;
  margin-left: -12px; /* pull into the box */
  pointer-events: none;
}

/* Provider icon styling */
.provider-icon { width:18px; height:18px; margin-right:8px; flex-shrink:0; display:inline-block; }
.provider-toggle span { display:inline-flex; align-items:center; }

/* Show a subtle focus ring on the whole toggle when focused for keyboard users */
.provider-toggle:focus { outline: none; box-shadow: 0 0 0 3px var(--focus-ring); border-radius: 14px; }

/* Tooltip text is provided by title attribute; ensure visible on focus for keyboard users */
.provider-toggle[title]:focus::after { content: attr(title); position: absolute; bottom: -34px; left: 50%; transform: translateX(-50%); background: var(--bg-surface); color: var(--text-muted); padding:6px 8px; border-radius:6px; border:1px solid var(--border-soft); font-size:12px; white-space:nowrap; }

/* Gap fallback for older browsers that don't support gap on flex containers */
.provider-selector > .provider-toggle { margin-right: 8px; margin-bottom: 6px; }

/* High contrast / forced-colors support */
@media (forced-colors: active) {
  .result-source-badge {
    forced-color-adjust: none;
    background: ButtonFace;
    color: ButtonText;
    border: 1px solid ButtonText;
  }
  .provider-toggle span::before {
    forced-color-adjust: none;
    background: ButtonFace;
    border-color: ButtonText;
  }
  /* Ensure highlighted marks and interactive controls remain visible in forced-color mode */
  mark { forced-color-adjust: none; background: Highlight; color: HighlightText; }
  .action-btn { forced-color-adjust: none; border-color: ButtonText; color: ButtonText; background: ButtonFace; }
  .mem-edit-modal, .pins-drawer { forced-color-adjust: none; background: Canvas; color: CanvasText; border-color: ButtonText; }
}

/* Ensure provider toggles are keyboard accessible: focus visible on inner span when label focused */
.provider-toggle:focus-within span::before { box-shadow: 0 0 0 3px var(--focus-ring); }

.result-source-badge {
  display: inline-block;
  padding: 3px 9px;
  border-radius: 999px;
  font-size: 11px;
  line-height: 1;
  color: #fff;
  background: #6b7280;
  margin-left: 8px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.result-source-badge.google { background: #4285F4; }
.result-source-badge.youtube { background: #FF0000; }
.result-source-badge.reddit { background: #FF5700; }
.result-source-badge.aion { background: #7c3aed; }
.result-source-badge.duckduckgo { background: #DE5833; }

/* High-contrast / small-screen adjustments */
@media (max-width: 520px) {
  .provider-selector { gap: 6px; margin-left: 0; }
  .provider-toggle { padding: 6px 8px; font-size: 12px; }
  .result-source-badge { padding: 2px 6px; font-size: 10px; margin-left: 6px; }
}

/* Allow badges to be keyboard focusable when used as buttons */
.result-source-badge[tabindex] { cursor: pointer; }

.image-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap:10px; }
.lightbox, .video-lightbox { position:fixed; inset:0; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:1000; padding:20px; }

/* --------------------------
   SearchPanel - Result List
   -------------------------- */
.search-results { display:flex; flex-direction:column; gap:12px; }
.search-result { display:block; border-radius:12px; padding:12px; background:linear-gradient(180deg,var(--bg-card), rgba(255,255,255,0.01)); border:1px solid var(--border-soft); transition: box-shadow .12s var(--ease-in-out), transform .12s var(--ease-in-out); }
.search-result:hover { box-shadow: var(--shadow-md); transform: translateY(-4px); }
.result-main { display:flex; gap:12px; align-items:flex-start; }
.result-header { display:flex; align-items:flex-start; gap:12px; width:100%; }
.result-favicon { width:36px; height:36px; border-radius:8px; object-fit:contain; flex-shrink:0; }
.result-title-container { flex:1 1 auto; }
.result-title-container h4 { margin:0 0 6px 0; font-size:1rem; color:var(--text-primary); }
.result-meta { display:flex; gap:8px; align-items:center; color:var(--text-muted); font-size:.85rem; }
.result-meta .result-source { font-weight:700; color:var(--text-muted); }

/* Action buttons on each result */
.result-actions { display:flex; gap:8px; align-items:center; margin-left:auto; }
.result-actions button { background:transparent; border:1px solid transparent; padding:8px; border-radius:8px; cursor:pointer; color:var(--text-muted); display:inline-flex; align-items:center; justify-content:center; }
.result-actions button:hover { color:var(--text-primary); background:var(--bg-hover); transform: translateY(-2px); }
.result-actions i { display:inline-block; width:18px; height:18px; background-size:contain; background-repeat:no-repeat; }
.open-media-btn, .view-details-btn, .download-all-btn { padding:6px 10px; margin-left:6px; border-radius:8px; background:transparent; border:1px solid var(--border-soft); color:var(--text-primary); }
.open-media-btn:hover, .view-details-btn:hover, .download-all-btn:hover { background: linear-gradient(90deg,var(--color-primary),var(--color-secondary)); color: white; }
.bookmark-btn i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M6 2h12v20l-6-4-6 4V2z'/></svg>"); }
.share-btn i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.03-.47-.09-.7l7.02-4.11c.54.5 1.25.82 2.07.82 1.66 0 3-1.34 3-3S19.66 2 18 2s-3 1.34-3 3c0 .24.03.47.09.7L8.07 9.81C7.54 9.31 6.83 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.83 0 1.54-.31 2.07-.81l7.12 4.22c-.06.2-.09.41-.09.61 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z'/></svg>"); }
.cite-btn i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M12 2L3 5v6c0 5 3.72 9.74 9 11 5.28-1.26 9-6 9-11V5l-9-3z'/></svg>"); }
.download-btn i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M5 20h14v-2H5v2zm7-18L5 9h3v6h4V9h3L12 2z'/></svg>"); }
.expand-toggle i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M7 10l5 5 5-5z'/></svg>"); }

/* Result content & media */
.result-content { display:flex; gap:12px; margin-top:8px; align-items:flex-start; }
.result-snippet { color:var(--text-muted); margin:0; flex:1; }
.result-media { width:180px; max-width:35%; border-radius:8px; overflow:hidden; flex-shrink:0; position:relative; background:var(--bg-surface); }
.result-media img, .result-media video { width:100%; height:100%; object-fit:cover; display:block; }
.play-overlay { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); font-size:26px; color:rgba(255,255,255,0.95); background:rgba(0,0,0,0.35); padding:8px 12px; border-radius:40px; pointer-events:none; }
.media-debug { font-size:.7rem; color:var(--text-muted); margin-top:8px; }

/* Quality & reliability indicators */
.result-quality-indicators { display:flex; gap:12px; align-items:center; margin-left:auto; }
.quality-indicator { display:flex; gap:8px; align-items:center; }
.score-bar { width:120px; height:8px; background:var(--bg-muted); border-radius:6px; overflow:hidden; }
.score-fill { height:100%; background: linear-gradient(90deg,var(--color-secondary),var(--color-primary)); }
.score-value { font-size:.85rem; color:var(--text-muted); }
.sentiment-dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
.sentiment-dot.positive { background:#2ecc71; }
.sentiment-dot.negative { background:#e74c3c; }
.sentiment-dot.neutral { background:var(--text-muted); }

/* Pagination controls */
.pagination-controls { display:flex; justify-content:space-between; align-items:center; gap:12px; padding:8px 0; }
.pagination-left, .pagination-center, .pagination-right { display:flex; align-items:center; gap:8px; }
.pagination-center button { padding:6px 10px; border-radius:8px; background:var(--bg-hover); border:1px solid var(--border-soft); color:var(--text-primary); }

/* Cluster and Timeline views */
.cluster-view, .timeline-view { background: linear-gradient(180deg,var(--bg-card), rgba(255,255,255,0.01)); border:1px solid var(--border-soft); padding:12px; border-radius:10px; }
.cluster { border-bottom:1px dashed rgba(255,255,255,0.02); padding:10px 0; }
.timeline-item { padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.02); }

/* Knowledge graph controls */
.knowledge-graph-container { padding:10px; background:var(--bg-card); border-radius:12px; border:1px solid var(--border-strong); }
.graph-controls { display:flex; gap:8px; align-items:center; margin-bottom:8px; }
.graph-mode-btn { padding:8px 10px; border-radius:8px; background:transparent; border:1px solid var(--border-soft); color:var(--text-primary); cursor:pointer; }
.graph-mode-btn.active { background: linear-gradient(90deg,var(--color-primary),var(--color-secondary)); color:white; border-color:transparent; }
.reset-zoom-btn { padding:8px 10px; border-radius:8px; background:transparent; border:1px solid var(--border-soft); cursor:pointer; }

/* Responsive overrides */
@media (max-width: 900px) {
  .result-content { flex-direction:column; }
  .result-media { width:100%; max-width:100%; }
  .result-actions { margin-top:8px; }
}

/* =================================================================== */
/* Math Panel Styles                                                     */
/* =================================================================== */
.math-panel {
  padding: 18px;
  background: var(--bg-card);
  border-radius: var(--rounded);
  border: 1px solid var(--border-strong);
  color: var(--text-primary);
  display: flex;
  flex-direction: column;
  gap: 16px;
  min-height: 400px;
}

/* Math Header */
.math-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.math-header h3 {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
}

/* Math Input Section */
.math-input-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.math-input-container textarea {
  width: 100%;
  min-height: 72px;
  padding: 12px 16px;
  border-radius: 12px;
  border: 1px solid var(--border-soft);
  background: var(--bg-surface);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 0.95rem;
  resize: vertical;
}

.math-input-container textarea:focus {
  border-color: var(--color-secondary);
  box-shadow: 0 0 0 3px var(--focus-ring);
  outline: none;
}

/* Math Controls */
.math-controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.math-control-button {
  padding: 8px 14px;
  border-radius: 10px;
  border: 1px solid var(--border-soft);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  color: var(--text-primary);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.math-control-button:hover {
  transform: translateY(-2px);
  background: var(--bg-hover);
}

.math-control-button.primary {
  background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
  color: white;
  border: none;
}

/* Math Canvas */
.math-canvas-container {
  position: relative;
  flex: 1;
  min-height: 200px;
  border-radius: 12px;
  background: var(--bg-surface);
  border: 1px solid var(--border-soft);
  overflow: hidden;
}

canvas.math-canvas {
  width: 100%;
  height: 100%;
  touch-action: none;
}

/* Math Solution Display */
.math-solution {
  background: linear-gradient(180deg, var(--bg-surface), var(--bg-card));
  border: 1px solid var(--border-soft);
  border-radius: 12px;
  padding: 16px;
}

.solution-header {
  margin-bottom: 12px;
  font-weight: 600;
}

.solution-steps {
  display: flex;
  flex-direction: column;
  gap: 8px;
  color: var(--text-muted);
}

.solution-step {
  padding: 8px;
  border-radius: 8px;
  background: rgba(255,255,255,0.02);
}

/* LaTeX Styling */
.katex-container {
  overflow-x: auto;
  padding: 8px 0;
}

.katex { 
  font-size: 1.1em;
  line-height: 1.4;
}

/* Graph Controls */
.graph-settings {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  padding: 12px;
  background: var(--bg-surface);
  border-radius: 10px;
  border: 1px solid var(--border-soft);
}

.graph-setting {
  display: flex;
  align-items: center;
  gap: 8px;
}

.graph-setting label {
  font-size: 0.9rem;
  color: var(--text-muted);
}

.graph-setting input {
  width: 80px;
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid var(--border-soft);
  background: var(--bg-card);
  color: var(--text-primary);
}

/* Math Quick Actions */
.quick-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 8px;
}

.quick-action {
  padding: 6px 10px;
  border-radius: 8px;
  background: transparent;
  border: 1px solid var(--border-soft);
  color: var(--text-primary);
  font-size: 0.9rem;
  cursor: pointer;
}

.quick-action:hover {
  background: var(--bg-hover);
  transform: translateY(-1px);
}

/* Math Examples Panel */
.math-examples {
  background: var(--bg-surface);
  border-radius: 10px;
  border: 1px solid var(--border-soft);
  padding: 12px;
}

.math-examples h4 {
  margin: 0 0 10px 0;
  font-size: 0.95rem;
  color: var(--text-muted);
}

.examples-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 8px;
}

.example-card {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid var(--border-soft);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  cursor: pointer;
}

.example-card:hover {
  background: var(--bg-hover);
  transform: translateY(-2px);
}

.example-type {
  font-size: 0.8rem;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.example-text {
  font-family: var(--font-mono);
  font-size: 0.9rem;
}

/* Pan/Zoom Controls */
.canvas-controls {
  position: absolute;
  bottom: 12px;
  right: 12px;
  display: flex;
  gap: 8px;
  padding: 4px;
  border-radius: 8px;
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
}

.canvas-control-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  border: none;
  background: transparent;
  color: var(--text-primary);
  cursor: pointer;
}

.canvas-control-btn:hover {
  background: var(--bg-hover);
}

/* Loading States */
.math-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 20px;
  color: var(--text-muted);
}

.math-loading .spinner {
  width: 20px;
  height: 20px;
  border: 2px solid transparent;
  border-top-color: var(--text-muted);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

/* Error States */
.math-error {
  padding: 12px;
  border-radius: 8px;
  background: rgba(231, 76, 60, 0.1);
  border: 1px solid rgba(231, 76, 60, 0.2);
  color: #e74c3c;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .math-panel {
    padding: 12px;
    min-height: 300px;
  }

  .examples-grid {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  }

  .graph-settings {
    flex-direction: column;
    align-items: stretch;
  }
  
  .graph-setting input {
    width: 100%;
  }
}

/* Modals & notifications */
.settings-modal, .modal-backdrop { position:fixed; inset:0; background-color:var(--bg-modal-overlay); display:flex; align-items:center; justify-content:center; z-index:1000; padding:20px; }
.settings-content, .modal-content { background-color: var(--bg-surface); border-radius:15px; width:100%; max-width:900px; max-height:90vh; overflow:hidden; display:flex; flex-direction:column; box-shadow:var(--shadow-lg); border:1px solid var(--border-strong); }
.settings-header { padding:20px; border-bottom:1px solid var(--border-strong); display:flex; justify-content:space-between; align-items:center; }

/* Notifications */
.notification { position:fixed; left:50%; transform: translateX(-50%); bottom:20px; z-index:1002; padding:12px 20px; border-radius:10px; color:white; font-weight:700; box-shadow:var(--shadow-lg); animation: slideUp .28s ease; }
.notification.info { background: var(--color-accent); }
.notification.success { background: #2ecc71; }
.notification.warning { background: #f4b400; color:#121212; }
.notification.error { background: #e74c3c; }

/* Utilities, helpers and responsiveness */
@keyframes fadeIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
@keyframes slideUp { from { transform: translate(-50%, 20px); opacity:0; } to { transform: translate(-50%, 0); opacity:1; } }
@keyframes spin { from { transform: rotate(0); } to { transform: rotate(360deg); } }
@keyframes bounce { 0%,80%,100% { transform: scale(0); } 40% { transform: scale(1.0); } }

@media (max-width: 900px) {
  .generation-actions, .math-input-container { flex-direction:column; }
  .icon-button { width:44px; height:44px; }
  .send-button { width:52px; height:52px; }
}

@media (max-width: 480px) {
  .app-header { flex-direction:column; align-items:flex-start; gap:8px; }
  .chat-input { padding: 14px 100px 14px 20px; }
  .uploaded-file-card { min-width:140px; }
}

/* Backwards compatibility aliases */
/* merged into top-level :root to avoid duplicates */

/* END consolidated App.css */

/* =================================================================== */
/* 5. TAB NAVIGATION                                                   */
/* =================================================================== */
.tab-container {
  display:flex;
  gap:8px;
  overflow-x:auto;
  padding-bottom:6px;
  margin-bottom: 18px;
}
.tab-container::-webkit-scrollbar { display:none; }

.tab-button {
  padding:8px 16px;
  border-radius: 999px;
  background: var(--bg-muted);
  color: var(--text-primary);
  border: 1px solid transparent;
  cursor: pointer;
  font-weight: 600;
  font-size:.92rem;
  transition: all .15s ease;
  white-space: nowrap;
}
.tab-button:hover { background: var(--bg-hover); transform: translateY(-2px); }
.tab-button.active { background: var(--color-primary); color: white; border-color: var(--color-primary); box-shadow:var(--shadow-sm); }
.tab-button:disabled { opacity:.5; cursor:not-allowed; }

/* =================================================================== */
/* 6. CHAT & INPUT AREA                                                */
/* =================================================================== */

/* --- Chat Container & Messages --- */
/* PREMIUM CHAT CONTAINER */
.chat-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
  flex: 1 1 auto;
  overflow-y: auto;
  padding-right: 8px;
  margin-bottom: 18px;
  background: linear-gradient(180deg, rgba(6,12,32,0.2), rgba(12,16,24,0.1));
}

.conversation-history {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding-bottom: 10px;
}

/* MESSAGE WRAPPER - ENHANCED */
.message-wrapper {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  width: 100%;
}

.message-wrapper.user {
  justify-content: flex-end;
  align-items: flex-end;
}

/* AVATARS - PREMIUM STYLING */
.avatar, .aion-avatar, .user-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  flex-shrink: 0;
  box-shadow: 0 6px 20px rgba(0,0,0,0.4);
  border: 1.5px solid rgba(255,255,255,0.1);
}

.aion-avatar {
  background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(178,75,255,0.2));
  color: #00d4ff;
  border-color: rgba(0,212,255,0.3);
  font-weight: 800;
  font-size: 1.1rem;
}

.user-avatar {
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.1));
  color: #00d4ff;
  border-color: rgba(0,212,255,0.25);
  font-weight: 700;
}

/* MESSAGE CONTENT - PREMIUM */
.message-content, .aion-message {
  max-width: 78%;
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  border-radius: 16px;
  padding: 14px 18px;
  position: relative;
  border: 1.5px solid rgba(255,255,255,0.08);
  color: var(--text-primary);
  word-wrap: break-word;
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
  transition: all 0.3s ease;
}

.message-content:hover, .aion-message:hover {
  border-color: rgba(0,212,255,0.15);
  box-shadow: 0 12px 36px rgba(0,0,0,0.4);
}

/* USER MESSAGE - CYAN ACCENT */
.message-wrapper.user .message-content {
  background: linear-gradient(135deg, rgba(0,212,255,0.15), rgba(178,75,255,0.08));
  color: var(--text);
  border: 1.5px solid rgba(0,212,255,0.25);
  border-radius: 16px 16px 4px 16px;
  box-shadow: 0 12px 40px rgba(0,212,255,0.12);
}

.message-wrapper.user .message-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1.5px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.3), transparent);
  border-radius: 16px 16px 0 0;
}

.message-wrapper.user .message-content:hover {
  border-color: rgba(0,212,255,0.4);
  box-shadow: 0 16px 48px rgba(0,212,255,0.18);
}

/* AION MESSAGE - MAGENTA ACCENT */
.message-wrapper .aion-message {
  border-radius: 16px 16px 16px 4px;
  background: linear-gradient(135deg, rgba(15,18,22,0.4), rgba(178,75,255,0.05));
  border: 1.5px solid rgba(178,75,255,0.2);
  box-shadow: 0 12px 40px rgba(178,75,255,0.08);
}

.message-wrapper .aion-message::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1.5px;
  background: linear-gradient(90deg, transparent, rgba(178,75,255,0.3), transparent);
  border-radius: 16px 16px 0 0;
}

.message-wrapper .aion-message:hover {
  border-color: rgba(178,75,255,0.35);
  box-shadow: 0 16px 48px rgba(178,75,255,0.12);
}
/* MESSAGE HEADER - PREMIUM */
.message-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
  font-size: 0.8rem;
  color: var(--text-muted);
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(0,212,255,0.08);
}

.message-header .time {
  opacity: 0.6;
  font-size: 0.75rem;
  font-weight: 500;
}

/* MESSAGE BODY - PREMIUM */
.message-body {
  line-height: 1.7;
  color: inherit;
  font-size: 0.95rem;
}

.message-body p:last-child {
  margin-bottom: 0;
}

.message-body a {
  color: #00d4ff;
  font-weight: 600;
  transition: all 0.2s ease;
  border-bottom: 1px solid rgba(0,212,255,0.3);
}

.message-body a:hover {
  color: #b24bff;
  border-color: rgba(178,75,255,0.5);
}

/* CODE BLOCKS - PREMIUM */
.message-body pre {
  background: linear-gradient(135deg, rgba(0,0,0,0.5), rgba(0,0,0,0.3));
  padding: 16px;
  border-radius: 10px;
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: 0.88rem;
  margin: 0.75em 0;
  border: 1px solid rgba(0,212,255,0.12);
  box-shadow: 0 6px 18px rgba(0,0,0,0.3);
}

body.light-theme .message-body pre {
  background: rgba(0,0,0,0.08);
  color: var(--text-primary);
  border-color: rgba(0,0,0,0.1);
}

.message-body code {
  font-family: var(--font-mono);
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.08));
  padding: 3px 8px;
  border-radius: 6px;
  color: #00d4ff;
  font-size: 0.9em;
  border: 1px solid rgba(0,212,255,0.15);
}

body.light-theme .message-body code {
  background: rgba(0,0,0,0.08);
  color: var(--text-primary);
  border-color: rgba(0,0,0,0.1);
}

/* MESSAGE ACTIONS - PREMIUM */
.message-actions {
  position: absolute;
  top: 10px;
  right: 10px;
  display: flex;
  gap: 6px;
  padding: 6px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.1));
  border: 1px solid rgba(0,212,255,0.2);
  opacity: 0;
  transform: translateY(-4px);
  transition: all 0.2s ease;
  backdrop-filter: blur(6px);
}

.aion-message:hover .message-actions,
.message-wrapper.user .message-content:hover .message-actions {
  opacity: 1;
  transform: translateY(0);
}

/* ACTION BUTTONS - PREMIUM */
.action-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: 1px solid rgba(0,212,255,0.15);
  background: rgba(0,0,0,0.2);
  color: #00d4ff;
  cursor: pointer;
  font-size: 0.95rem;
  transition: all 0.2s ease;
}

.action-btn:hover {
  background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(178,75,255,0.15));
  border-color: rgba(0,212,255,0.35);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,212,255,0.15);
}

.action-btn.copied {
  background: linear-gradient(135deg, rgba(0,212,255,0.3), rgba(178,75,255,0.2));
  border-color: #00d4ff;
  color: #00d4ff;
  box-shadow: 0 0 12px rgba(0,212,255,0.25);
}

.action-btn.speaking {
  background: linear-gradient(135deg, rgba(255,165,0,0.3), rgba(255,100,0,0.2));
  border-color: #ffa500;
  color: #ffa500;
  box-shadow: 0 0 12px rgba(255,165,0,0.25);
}

/* TYPING INDICATOR - PREMIUM */
.typing-indicator {
  display: flex;
  gap: 8px;
  align-items: center;
  padding: 12px 14px;
  color: var(--text-muted);
  background: linear-gradient(135deg, rgba(6,12,32,0.3), rgba(12,16,24,0.4));
  border-radius: 12px;
  border: 1px solid rgba(0,212,255,0.12);
  width: fit-content;
}

.typing-indicator .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: linear-gradient(135deg, #00d4ff, #b24bff);
  animation: bounce 0.9s infinite ease-in-out;
  box-shadow: 0 0 8px rgba(0,212,255,0.4);
}

.typing-indicator .dot:nth-child(1) {
  animation-delay: -0.24s;
}

.typing-indicator .dot:nth-child(2) {
  animation-delay: -0.12s;
}

.typing-indicator .dot:nth-child(3) {
  animation-delay: 0s;
}

/* EMPTY CHAT CONTAINER - PREMIUM */
.empty-chat-container {
  display: flex;
  flex: 1;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 30px;
  gap: 16px;
  color: var(--text-muted);
  text-align: center;
  background: linear-gradient(180deg, rgba(6,12,32,0.1), rgba(12,16,24,0.05));
  position: relative;
  overflow: hidden;
}

.empty-chat-container::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -30%;
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, rgba(0,212,255,0.05), transparent 70%);
  border-radius: 50%;
  pointer-events: none;
}

.empty-chat-container::after {
  content: '';
  position: absolute;
  bottom: -40%;
  left: -20%;
  width: 350px;
  height: 350px;
  background: radial-gradient(circle, rgba(178,75,255,0.04), transparent 70%);
  border-radius: 50%;
  pointer-events: none;
}
.welcome-logo { width:84px; height:84px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:2rem; color: white; background:linear-gradient(45deg,var(--color-primary),var(--color-secondary)); box-shadow:var(--shadow-md); }
/* Ultra Professional Logo Style */
.welcome-logo {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 2.6rem;
  color: var(--color-secondary);
  background: var(--color-primary);
  border: 2px solid var(--color-secondary);
  box-shadow: 0 6px 24px rgba(0,0,0,0.18);
  letter-spacing: 2px;
  transition: background 0.3s, color 0.3s;
}
body.light-theme .welcome-logo {
  background: var(--color-secondary);
  color: var(--color-primary);
  border: 2px solid var(--color-primary);
}

/* --- Input Area --- */
.input-section { border-top: 1px solid var(--border-strong); padding-top: 18px; margin-top: auto; }
.input-container { position:relative; }
.chat-input {
  width:100%; min-height:56px; max-height:220px;
  padding:14px 120px 14px 25px;
  border-radius: 999px; background: var(--bg-surface); color: var(--text-primary);
  border: 1px solid var(--border-strong); resize: none; font-size: 1rem;
  transition: box-shadow .12s ease, border-color .12s ease;
}
.chat-input:focus { box-shadow: 0 0 0 4px var(--focus-ring); border-color: var(--border-focus); outline: none; }
.chat-input::placeholder { color: var(--text-placeholder); }

.input-actions { position:absolute; right:10px; top:50%; transform: translateY(-50%); display:flex; gap:8px; align-items:center; }
.send-button { width:40px; height:40px; font-size: 1.2rem; }
.send-button:hover { transform: scale(1.06); box-shadow: var(--shadow-sm); }
.send-button:disabled { background: var(--bg-card); cursor:not-allowed; transform:none; opacity:.6; }
.mic-button.pulse::before { content: ''; position: absolute; inset: -5px; border-radius: 50%; background-color: var(--status-error); animation: pulse 1.5s infinite; opacity: 0.3; }

.quick-feelings { margin-top: 12px; display:flex; flex-direction:column; gap:8px; }
.feelings-title { font-size:.9rem; color:var(--text-muted); font-weight:600; }
.feeling-buttons { display:flex; gap:8px; flex-wrap:wrap; }
.feeling-button { padding:8px 15px; border-radius:20px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; font-weight:600; transition: all .12s ease; font-size: 0.8rem; }
.feeling-button:hover { transform: translateY(-2px); background: var(--bg-hover); }

/* =================================================================== */
/* 7. GENERAL PANEL STYLES                                             */
/* =================================================================== */
.panel-card, .agent-card {
  background: var(--bg-card);
  border-radius: var(--rounded);
  border: 1px solid var(--border-strong);
  padding: 20px;
  box-shadow: none;
  margin-bottom: 20px;
}
.agent-card:last-child { margin-bottom: 0; }

.panel-header, .math-header, .quantum-header, .neural-header, .creative-header, .goals-header, .knowledge-header {
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px;
}
.back-button {
  background: none; border: none;
  color: var(--text-muted);
  font-size: 0.9rem;
  cursor: pointer;
  display: flex; align-items: center; gap: 5px;
}
.back-button:hover { text-decoration: underline; }

/* =================================================================== */
/* Creative Panel specific styles                                      */
/* =================================================================== */
.creative-panel { padding: 18px; background: var(--bg-card); border-radius: var(--rounded); border: 1px solid var(--border-strong); }
.creative-header h3 { margin: 0; font-size: 1.1rem; }

.creative-controls { display:flex; flex-direction:column; gap:14px; margin-bottom: 12px; }
.type-selector .type-buttons { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
.type-button { padding:8px 12px; border-radius: 10px; border:1px solid var(--border-soft); background: transparent; color: var(--text-primary); cursor:pointer; font-weight:700; transition: var(--transition-fast); }
.type-button i { margin-right:8px; opacity:0.9; }
.type-button:hover { transform: translateY(-2px); background: var(--bg-hover); }
.type-button.active { background: linear-gradient(90deg,var(--color-primary),var(--color-secondary)); color: white; box-shadow: var(--shadow-sm); border-color: transparent; }

.custom-prompt textarea { width:100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-soft); background: var(--bg-surface); color:var(--text-primary); resize: vertical; font-size:1rem; }
.quick-prompts { margin-top: 8px; display:flex; gap:8px; flex-wrap:wrap; }
.quick-prompt-btn { padding:6px 10px; border-radius:999px; border:1px solid var(--border-soft); background: transparent; color: var(--text-primary); cursor:pointer; font-size:.86rem; }
.quick-prompt-btn:hover { background: var(--bg-hover); transform: translateY(-2px); }

.generation-actions { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.generate-button { padding:10px 14px; border-radius: 10px; border: 1px solid var(--border-soft); background: transparent; color: var(--text-primary); cursor:pointer; font-weight:700; }
.generate-button.primary { background: linear-gradient(90deg,var(--color-primary),var(--color-secondary)); color:white; border-color: transparent; box-shadow: var(--shadow-sm); }
.generate-button:disabled { opacity:0.6; cursor:not-allowed; transform:none; }

.status-row { margin-top: 8px; display:flex; gap:12px; align-items:center; }
.typing-indicator, .busy-indicator { font-size:0.9rem; color:var(--text-muted); padding:6px 8px; border-radius:8px; background: rgba(255,255,255,0.02); }

.creative-output-section { margin-top: 12px; padding-top: 12px; border-top: 1px dashed var(--border-soft); }
.output-header { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.output-actions { display:flex; gap:8px; }
.action-button { padding:8px 10px; background: transparent; border: 1px solid var(--border-soft); color: var(--text-primary); border-radius: 8px; cursor:pointer; font-weight:600; }
.action-button:hover { transform: translateY(-2px); background: var(--bg-hover); }

.output-content { margin-top: 12px; }
.code-block { background: rgba(0,0,0,0.35); padding: 14px; border-radius: 8px; overflow:auto; font-family: var(--font-mono); font-size:0.95rem; color: var(--text-primary); }
.markdown-output p { margin: 0 0 10px 0; }

.image-output-section, .video-output-section { margin-top: 12px; }
.image-container, .video-container { display:flex; flex-direction:column; gap:8px; align-items:flex-start; }
.image-container img { max-width: 100%; border-radius: 8px; border: 1px solid var(--border-soft); }
.download-button { padding:8px 12px; border-radius:8px; background: transparent; color: var(--text-primary); border:1px solid var(--border-soft); text-decoration:none; }
.download-button:hover { background: var(--bg-hover); transform: translateY(-2px); }

.generation-history { margin-top: 18px; padding-top: 12px; border-top: 1px dashed var(--border-soft); }
.generation-history ul { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px; }
.history-item { display:flex; justify-content:space-between; align-items:center; gap:10px; padding:8px; border-radius:8px; background: var(--bg-surface); border:1px solid var(--border-soft); }
.history-meta { font-size:0.9rem; color:var(--text-muted); }
.prompt-snippet { color:var(--text-primary); font-weight:600; }
.history-actions { display:flex; gap:8px; }

/* responsive adjustments */
@media (max-width: 720px) {
  .generation-actions { flex-direction:column; align-items:stretch; }
  .type-buttons { gap:6px; }
  .quick-prompts { gap:6px; }
}

/* =================================================================== */
/* 8. ADVANCED SEARCH PANEL                                            */
/* =================================================================== */

.search-panel { display:flex; flex-direction:column; gap: 0; flex: 1; overflow-y: auto; }

/* =================================================================== */
/* 9. PREMIUM UI OVERRIDES - polished buttons, icons, logo, uploads     */
/* =================================================================== */

/* Upgrade icon buttons to a premium glass-gradient style */
.icon-button {
  width:48px; height:48px; border-radius:12px;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
  background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.04);
  box-shadow: 0 6px 18px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.02);
  transition: transform .18s var(--ease-in-out), box-shadow .18s var(--ease-in-out), background .18s var(--ease-in-out);
  backdrop-filter: blur(6px) saturate(120%);
}
.icon-button:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 10px 30px rgba(0,0,0,0.55); }
.icon-button:active { transform: translateY(-1px) scale(.99); }

/* Icon glyphs use inline SVG data URIs for crisp rendering */
.icon-button i { display:block; width:22px; height:22px; background-size:contain; background-repeat:no-repeat; background-position:center; }

.icon-mic { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2z'/></svg>"); }
.icon-send { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M2 21l21-9L2 3v7l15 2-15 2v7z'/></svg>"); }
.icon-upload { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M5 20h14v-2H5v2zm7-18L5.33 9h3.84v6h4.66V9h3.84L12 2z'/></svg>"); }
.icon-spinner { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'><path fill='none' d='M25 5A20 20 0 1 0 45 25' stroke='currentColor' stroke-width='4' stroke-linecap='round' /></svg>"); animation: spin 1s linear infinite; }

@keyframes spin { to { transform: rotate(360deg); } }

/* Premium send button overrides */
.send-button {
  width:56px; height:56px; border-radius:14px; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%); color: white; border: none; box-shadow: 0 12px 30px rgba(3,169,244,0.18);
  transition: transform .12s var(--ease-in-out), box-shadow .12s var(--ease-in-out);
}
.send-button:hover { transform: translateY(-4px) scale(1.03); box-shadow: 0 18px 40px rgba(3,169,244,0.22); }
.send-button:disabled { opacity: 0.6; transform: none; box-shadow: none; }
.send-button .icon-send { width:20px; height:20px; }

/* Replace mic pulse indicator with subtle ring */
.mic-button.active { box-shadow: 0 6px 18px rgba(0,0,0,0.45), 0 0 0 6px rgba(0,212,255,0.06); }

/* Give all action buttons consistent premium appearance */
.action-btn, .action-button, .generate-button, .type-button, .feeling-button, .history-actions button {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.04);
  color: var(--text-primary);
  padding: 8px 12px; border-radius:10px; font-weight:700; cursor:pointer; transition: all .14s var(--ease-in-out);
}
.action-btn:hover, .action-button:hover, .generate-button:hover, .type-button:hover, .feeling-button:hover { transform: translateY(-3px); background: var(--bg-hover); }

/* Uploaded files panel - premium cards */
.uploaded-files-panel { padding: 12px 0; }
.uploaded-files-panel h5 { margin: 0 0 10px 0; font-size: 0.95rem; color: var(--text-muted); }
.uploaded-file-card { display:flex; flex-direction:column; gap:8px; align-items:flex-start; padding:12px; min-width: 180px; max-width: 260px; }
.uploaded-file-card .file-thumb { width:100%; height:110px; border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.005)); border-radius:8px; }
.uploaded-file-card .file-thumb img { width:100%; height:100%; object-fit:cover; display:block; }
.uploaded-file-card .file-meta { display:flex; width:100%; justify-content:space-between; align-items:center; gap:8px; }
.uploaded-file-card small { color: var(--text-muted); }
.uploaded-file-card .progress { width:100%; height:8px; background: rgba(255,255,255,0.03); border-radius:999px; overflow:hidden; }
.uploaded-file-card .progress > i { display:block; height:100%; width:0%; background: linear-gradient(90deg,#00d4ff,#0066ff); transition: width .4s ease; }
.uploaded-file-card .analysis-excerpt { font-size:0.85rem; color:var(--text-muted); max-height:3.6em; overflow:hidden; }

/* Insert/Remove/Open buttons group */
.uploaded-file-card > div > button { padding:6px 8px; border-radius:8px; background: transparent; border:1px solid rgba(255,255,255,0.04); }

/* Premium AION logo: stylized 'A' emblem */
.welcome-logo {
  width:96px; height:96px; border-radius:18px; display:flex; align-items:center; justify-content:center; position:relative;
  background: linear-gradient(135deg,#001f3f 0%, #0047b3 100%); color: #fff; box-shadow: 0 12px 36px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.06);
}
.welcome-logo::before {
  content: '';
  position:absolute; width:52px; height:52px; border-radius:10px; transform: rotate(20deg);
  background: linear-gradient(180deg,#00d4ff,#0066ff); top:50%; left:50%; transform-origin:center; transform: translate(-50%,-52%) rotate(20deg);
  filter: blur(0.6px);
  opacity: 0.95;
}
.welcome-logo span { position:relative; z-index:2; font-weight:900; font-size:2rem; letter-spacing:2px; }

/* Make tabs look more premium */
.tab-button { padding:10px 18px; border-radius: 999px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); box-shadow:none; }
.tab-button.active { background: linear-gradient(90deg,#00d4ff,#0066ff); color:white; border-color: transparent; box-shadow: 0 10px 30px rgba(3,169,244,0.12); }

/* Make message bubbles crisper and premium */
.message-content, .aion-message { border-radius: 16px; padding:14px 18px; box-shadow: 0 8px 24px rgba(0,0,0,0.45); border: 1px solid rgba(255,255,255,0.02); }
.message-wrapper.user .message-content { box-shadow: 0 8px 24px rgba(0,0,0,0.55); }

/* Small responsive tweaks */
@media (max-width: 720px) {
  .icon-button { width:44px; height:44px; }
  .send-button { width:52px; height:52px; }
  .uploaded-file-card { min-width: 140px; }
}

/* Accessibility: focus outlines */
.icon-button:focus, .send-button:focus, .tab-button:focus, .action-button:focus { outline: 3px solid rgba(0,212,255,0.12); outline-offset: 2px; }

:root {
  /* Search panel tokens should reference global accents so the sitewide
     premium palette is consistent. Keep panel-specific tokens if needed. */
  --search-card-bg: var(--bg-card);
  --search-border: var(--border-soft);
  --search-text: var(--text-primary);
  --muted: rgba(180,180,180,0.7);
  --accent: var(--cp-accent-1); /* use premium global accent */
  --accent-contrast: #fff;
}

/* SearchPanel specific styles */
/* ENHANCED PREMIUM SEARCH PANEL */
.search-panel {
  display: flex;
  flex-direction: column;
  gap: 16px;
  color: var(--search-text);
  position: relative;
}

.search-panel::before {
  content: '';
  position: absolute;
  bottom: -100px;
  left: -200px;
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, rgba(178,75,255,0.06), transparent 70%);
  border-radius: 50%;
  pointer-events: none;
  z-index: -1;
}

.search-panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1.5px solid rgba(0,212,255,0.12);
  margin-bottom: 6px;
}

.search-panel-header h3 {
  background: linear-gradient(135deg, #00d4ff 0%, #b24bff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1.1rem;
  font-weight: 800;
}

.search-input-container {
  display: flex;
  gap: 12px;
  align-items: center;
  padding: 14px;
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  border: 1.5px solid rgba(0,212,255,0.15);
  border-radius: 14px;
  backdrop-filter: blur(8px);
  box-shadow: 0 12px 36px rgba(2,6,23,0.6);
}

.search-input-wrapper { 
  position: relative; 
  flex: 1;
}

.search-input { 
  width: 100%; 
  padding: 12px 14px; 
  border: 1.5px solid rgba(0,212,255,0.2);
  border-radius: 10px; 
  background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(0,0,0,0.2));
  color: var(--search-text);
  font-family: var(--font-sans);
  transition: all 0.3s ease;
}

.search-input:focus {
  outline: none;
  border-color: #00d4ff;
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.05));
  box-shadow: 0 0 20px rgba(0,212,255,0.25);
}

.search-input::placeholder {
  color: rgba(255,255,255,0.4);
}

.query-suggestions-popup { 
  position: absolute; 
  top: calc(100% + 8px); 
  left: 0; 
  right: 0; 
  background: linear-gradient(135deg, rgba(6,12,32,0.9), rgba(12,16,24,0.95));
  border: 1.5px solid rgba(0,212,255,0.2);
  border-radius: 12px; 
  box-shadow: 0 16px 48px rgba(0,212,255,0.15), inset 0 1px 0 rgba(255,255,255,0.05);
  z-index: 40; 
  max-height: 220px; 
  overflow: auto;
  backdrop-filter: blur(8px);
}

.suggestion-item { 
  padding: 10px 12px; 
  cursor: pointer;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  transition: all 0.2s ease;
  color: rgba(255,255,255,0.8);
}

.suggestion-item:hover { 
  background: linear-gradient(90deg, rgba(0,212,255,0.1), transparent);
  color: #00d4ff;
  border-left: 3px solid #00d4ff;
  padding-left: 14px;
}

.image-gallery-container, .video-gallery-container { 
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  border: 1.5px solid rgba(0,212,255,0.12);
  padding: 16px; 
  border-radius: 14px;
  box-shadow: 0 12px 36px rgba(2,6,23,0.6);
  backdrop-filter: blur(8px);
}

.image-gallery-container::before, .video-gallery-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.2), transparent);
}

.gallery-header { 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(0,212,255,0.1);
}

.gallery-header h4 {
  background: linear-gradient(135deg, #00d4ff 0%, #b24bff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 800;
}

.image-grid, .video-grid { 
  display: grid; 
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
  gap: 12px;
}

.image-item, .video-item { 
  cursor: pointer; 
  border-radius: 12px; 
  overflow: hidden; 
  background: linear-gradient(135deg, rgba(0,212,255,0.05), rgba(178,75,255,0.02));
  border: 1.5px solid rgba(0,212,255,0.15);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 6px 18px rgba(0,0,0,0.3);
  position: relative;
}

.image-item:hover, .video-item:hover {
  transform: translateY(-6px) scale(1.05);
  border-color: rgba(0,212,255,0.4);
  box-shadow: 0 12px 36px rgba(0,212,255,0.2);
}

.image-wrapper { 
  display: flex; 
  flex-direction: column;
}

.lazy-img { 
  width: 100%; 
  height: 140px; 
  object-fit: cover; 
  display: block;
  transition: transform 0.3s ease;
}

.image-item:hover .lazy-img, .video-item:hover .lazy-img {
  transform: scale(1.1);
}

.image-caption, .video-caption { 
  font-size: 12px; 
  color: var(--muted); 
  padding: 8px; 
  background: rgba(0,0,0,0.4);
}

.image-count, .video-count { 
  font-size: 12px; 
  color: #00d4ff;
  font-weight: 700;
}

.play-overlay { 
  position: absolute; 
  inset: auto 8px 8px auto; 
  background: linear-gradient(135deg, rgba(0,212,255,0.8), rgba(178,75,255,0.6));
  color: #041316; 
  padding: 8px 10px; 
  border-radius: 8px; 
  font-weight: 800;
  box-shadow: 0 6px 18px rgba(0,212,255,0.3);
}

.video-thumb { 
  position: relative;
}

.video-play-overlay { 
  position: absolute; 
  left: 50%; 
  top: 50%; 
  transform: translate(-50%,-50%); 
  background: linear-gradient(135deg, #00d4ff, #b24bff);
  color: #041316; 
  padding: 10px 14px; 
  border-radius: 50%; 
  font-size: 18px;
  font-weight: 800;
  box-shadow: 0 8px 24px rgba(0,212,255,0.3);
  transition: all 0.3s ease;
}

.video-item:hover .video-play-overlay {
  transform: translate(-50%,-50%) scale(1.15);
  box-shadow: 0 12px 36px rgba(0,212,255,0.4);
}
/* Lightbox - PREMIUM ENHANCED */
.lightbox, .video-lightbox { 
  position: fixed; 
  left: 0; 
  top: 0; 
  width: 100vw; 
  height: 100vh; 
  background: rgba(0,0,0,0.85); 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  z-index: 1000; 
  padding: 20px;
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.lightbox-content, .video-lightbox-content { 
  background: linear-gradient(135deg, rgba(6,12,32,0.95), rgba(12,16,24,0.98));
  color: var(--search-text); 
  border-radius: 16px; 
  max-width: 1100px; 
  width: 100%; 
  max-height: 90vh; 
  overflow: auto; 
  position: relative; 
  padding: 20px;
  border: 1.5px solid rgba(0,212,255,0.2);
  box-shadow: 0 32px 96px rgba(0,212,255,0.2), inset 0 1px 0 rgba(255,255,255,0.05);
}

.lightbox-close { 
  position: absolute; 
  right: 14px; 
  top: 10px; 
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.1));
  border: 1.5px solid rgba(0,212,255,0.2);
  color: #00d4ff; 
  font-size: 28px; 
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 8px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
}

.lightbox-close:hover {
  background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(178,75,255,0.2));
  border-color: #00d4ff;
  box-shadow: 0 0 20px rgba(0,212,255,0.3);
}

.lightbox-nav { 
  position: absolute; 
  top: 50%; 
  transform: translateY(-50%); 
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.1));
  border: 1.5px solid rgba(0,212,255,0.2);
  color: #00d4ff; 
  font-size: 34px; 
  cursor: pointer;
  padding: 8px 14px;
  border-radius: 10px;
  transition: all 0.3s ease;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.lightbox-nav:hover {
  background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(178,75,255,0.2));
  border-color: #00d4ff;
  box-shadow: 0 0 20px rgba(0,212,255,0.3);
}

.lightbox-nav.prev { 
  left: 12px;
}

.lightbox-nav.next { 
  right: 12px;
}

.lightbox-caption { 
  margin-top: 12px; 
  display: flex; 
  justify-content: space-between; 
  align-items: center;
  padding: 12px;
  background: rgba(0,212,255,0.05);
  border-radius: 8px;
  border: 1px solid rgba(0,212,255,0.1);
}

/* Result item - PREMIUM ENHANCED */
.search-result { 
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  border: 1.5px solid rgba(0,212,255,0.15);
  border-radius: 12px; 
  padding: 14px; 
  margin-bottom: 12px;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  backdrop-filter: blur(8px);
  box-shadow: 0 8px 24px rgba(2,6,23,0.6);
  position: relative;
  overflow: hidden;
}

.search-result::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.2), transparent);
}

.search-result:hover {
  border-color: rgba(0,212,255,0.3);
  box-shadow: 0 16px 48px rgba(0,212,255,0.15);
  background: linear-gradient(135deg, rgba(6,12,32,0.5), rgba(12,16,24,0.6));
  transform: translateY(-2px);
}

.result-header { 
  display: flex; 
  gap: 12px; 
  align-items: flex-start;
}

.result-favicon { 
  width: 20px; 
  height: 20px; 
  object-fit: contain;
}

.result-title-container h4 { 
  margin: 0; 
  font-size: 16px;
  color: #00d4ff;
  font-weight: 800;
  transition: color 0.3s ease;
}

.search-result:hover .result-title-container h4 {
  color: #b24bff;
}

.result-meta { 
  font-size: 12px; 
  color: var(--muted);
  margin-top: 4px;
}

.result-actions { 
  margin-left: auto; 
  display: flex; 
  gap: 8px; 
  align-items: center;
}

.bookmark-btn {
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  color: rgba(255,255,255,0.6);
  cursor: pointer;
  padding: 6px 10px;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.bookmark-btn:hover {
  background: rgba(0,212,255,0.1);
  border-color: rgba(0,212,255,0.3);
  color: #00d4ff;
}

.bookmark-btn.active { 
  background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(178,75,255,0.2));
  border-color: #00d4ff;
  color: #00d4ff;
  box-shadow: 0 0 15px rgba(0,212,255,0.2);
}

.result-snippet { 
  color: var(--muted); 
  margin-top: 8px;
  line-height: 1.4;
}

.result-media { 
  margin-top: 10px; 
  position: relative;
}

.result-media img { 
  max-width: 320px; 
  border-radius: 10px;
  border: 1px solid rgba(0,212,255,0.15);
  transition: all 0.3s ease;
}

.result-media img:hover {
  border-color: rgba(0,212,255,0.4);
  box-shadow: 0 8px 24px rgba(0,212,255,0.15);
  transform: scale(1.02);
}

.result-quality-indicators { 
  display: flex; 
  gap: 12px; 
  align-items: center; 
  margin-top: 10px;
}

.score-bar { 
  width: 120px; 
  height: 8px; 
  background: rgba(255,255,255,0.05); 
  border-radius: 8px; 
  overflow: hidden;
  border: 1px solid rgba(0,212,255,0.1);
}

.score-fill { 
  height: 100%; 
  background: linear-gradient(90deg, #00d4ff, #b24bff);
  box-shadow: 0 0 10px rgba(0,212,255,0.3);
}

.reliability-indicator span { color: var(--muted); }

/* Advanced filters */
.advanced-filters { position: relative; }
.filter-toggle { padding:8px 10px; border-radius:8px; border:1px solid var(--search-border); background: transparent; cursor:pointer; }
.filter-panel { position:absolute; right:0; top:calc(100% + 6px); width: 420px; max-width:calc(100vw - 24px); background: var(--search-card-bg); border: 1px solid var(--search-border); box-shadow: 0 10px 30px rgba(0,0,0,0.12); border-radius:8px; padding:12px; z-index:60; }
.filter-tabs { display:flex; gap:6px; margin-bottom:8px; }
.filter-group { margin-bottom:10px; }
.filter-actions { display:flex; justify-content:space-between; gap:8px; }

/* Knowledge graph */
.knowledge-graph-container { background: var(--search-card-bg); border: 1px solid var(--search-border); padding:12px; border-radius:10px; }
.graph-controls { display:flex; gap:8px; align-items:center; margin-bottom:8px; }
.graph-mode-btn { padding:6px 8px; border-radius:6px; border:1px solid var(--search-border); background:transparent; cursor:pointer; }
.graph-mode-btn.active { background: var(--accent); color: var(--accent-contrast); }
.knowledge-graph-svg-wrapper { width:100%; height:400px; }
.knowledge-graph-svg-wrapper svg { width:100%; height:100%; }
.node-details-panel { margin-top:10px; padding:10px; border-top:1px dashed var(--search-border); }

/* Pagination */
.pagination-controls { display:flex; justify-content:space-between; gap:8px; align-items:center; margin-bottom:12px; }
.pagination-left, .pagination-center, .pagination-right { display:flex; gap:8px; align-items:center; }

/* Responsive */
@media (max-width: 800px) {
  .image-grid, .video-grid { grid-template-columns: repeat(2, 1fr); }
  .knowledge-graph-svg-wrapper { height: 300px; }
  .filter-panel { left: 8px; right: 8px; width: auto; }
}

@media (max-width: 480px) {
  .image-grid, .video-grid { grid-template-columns: repeat(1, 1fr); }
  .search-input-container { flex-direction: column; align-items: stretch; }
  .filter-panel { width: calc(100vw - 16px); left:8px; right:8px; }
}

/* =================================================================== */
/* Math Panel Styles - integrates with root theme variables               */
/* =================================================================== */
.math-panel {
  padding: 18px;
  background: var(--bg-card);
  border-radius: var(--rounded);
  border: 1px solid var(--border-strong);
  color: var(--text-primary);
}

.math-header h3 { margin: 0; font-size: 1.05rem; }
.math-input-container { display:flex; gap:12px; align-items:flex-start; margin-bottom: 12px; }
.math-input-container textarea { flex:1; min-height:72px; padding:12px; border-radius:10px; border:1px solid var(--border-soft); background:var(--bg-surface); color:var(--text-primary); resize:vertical; }
.math-input-container button { padding:10px 14px; border-radius:10px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; font-weight:700; }
.math-input-container button:disabled { opacity:.6; cursor:not-allowed; }
.math-error { color: var(--status-error); margin-top:8px; font-weight:600; }

.input-history { margin-top:10px; }
.input-history ul { list-style:none; margin:0; padding:0; display:flex; gap:8px; flex-wrap:wrap; }
.input-history li { background: var(--bg-surface); padding:8px 10px; border-radius:8px; border:1px solid var(--border-soft); cursor:pointer; font-size:0.9rem; }
.input-history li:hover { transform: translateY(-2px); background: var(--bg-hover); }

.smart-suggestions { margin-top:12px; }
.smart-suggestions ul { list-style:none; padding:0; margin:0; display:flex; gap:8px; flex-wrap:wrap; }
.example-button { padding:8px 12px; border-radius:999px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; font-weight:600; }
.example-button:hover { background: var(--bg-hover); transform: translateY(-2px); }
.history-controls { margin-top:8px; display:flex; gap:8px; }
.history-controls button { padding:6px 10px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; }

.graph-controls-section { margin-top:18px; }
.plot-controls { display:flex; gap:8px; align-items:center; }
.plot-controls input { flex:1; padding:8px 10px; border-radius:8px; border:1px solid var(--border-soft); background:var(--bg-surface); color:var(--text-primary); }
.plot-controls button { padding:8px 12px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; }
.graph-settings { margin-top:10px; background:transparent; padding:8px; border-radius:8px; }
.setting-row { display:flex; gap:8px; align-items:center; }
.setting-row label { display:flex; gap:8px; align-items:center; font-size:0.9rem; color:var(--text-muted); }

.solution-tabs { display:flex; gap:8px; margin-bottom:12px; }
.solution-tabs button { padding:8px 12px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; }
.solution-tabs button.active { background: linear-gradient(90deg,var(--color-primary),var(--color-secondary)); color: white; border-color: transparent; box-shadow: var(--shadow-sm); }

.solution-content { display:flex; flex-direction:column; gap:12px; }
.math-visualization { display:flex; flex-direction:column; gap:12px; align-items:flex-start; }
.visualization-notes { color:var(--text-muted); font-size:0.92rem; }

.math-calculator .calculator-grid { display:grid; grid-template-columns: repeat(5, 1fr); gap:8px; }
.math-calculator button { padding:8px 10px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; }

.math-solution { display:flex; flex-direction:column; gap:12px; }
.math-problem p { font-weight:600; }
.math-answer { background: var(--bg-surface); padding:12px; border-radius:10px; border:1px solid var(--border-soft); }
.latex-render { margin-top:8px; }
.solution-row { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.action-buttons { display:flex; gap:8px; }
.action-buttons button { padding:6px 10px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; }

.math-steps-container { background: var(--bg-surface); padding:12px; border-radius:8px; border:1px solid var(--border-soft); }
.math-steps-list { margin:0; padding-left: 18px; }
.math-step { display:flex; gap:12px; margin-bottom:8px; }
.step-number { width:28px; height:28px; background:var(--bg-muted); color:var(--text-primary); display:flex; align-items:center; justify-content:center; border-radius:6px; font-weight:700; }
.step-content { flex:1; }

.solution-actions { display:flex; gap:12px; align-items:center; margin-top:8px; }
.solution-actions button { padding:8px 12px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); cursor:pointer; }

.example-problems ul { list-style:disc; padding-left:20px; color:var(--text-muted); }
.example-problems li { margin-bottom:6px; }

.math-capabilities { margin-top:20px; }
.capabilities-list { display:flex; gap:12px; flex-wrap:wrap; }
.capability { background: var(--bg-surface); padding:10px 12px; border-radius:8px; border:1px solid var(--border-soft); display:flex; gap:8px; align-items:center; min-width:160px; }
.capability-icon { font-size:1.2rem; }
.capability-name { font-weight:700; }
.capability-desc { color:var(--text-muted); font-size:0.9rem; }

@media (max-width: 720px) {
  .math-input-container { flex-direction:column; }
  .plot-controls { flex-direction:column; align-items:stretch; }
  .calculator-grid { grid-template-columns: repeat(4, 1fr); }
  .capabilities-list { flex-direction:column; }
}
/* Small additions to ensure MathPanel specific classes have consistent styling */
.math-top-controls { margin-bottom: 12px; }
.math-top-controls select { padding:6px 8px; border-radius:8px; border:1px solid var(--border-soft); background:var(--bg-surface); color:var(--text-primary); }
.math-description { margin-bottom: 12px; color:var(--text-muted); }
.math-solution-container { margin-top:12px; }
.back-button { padding:8px 10px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; cursor:pointer; color:var(--text-primary); }
.math-formula { margin-top:8px; }
.math-latex, .latex-render { display:block; margin-top:8px; }
.math-latex-error { color: var(--status-error); }
.math-solution .math-answer p { margin:6px 0; }
.math-visualization canvas { max-width:100%; height:auto; }
.view-controls button { margin-right:6px; }
.toggle-steps { display:flex; align-items:center; gap:8px; margin-left:12px; }
.solve-mode { margin-left: 8px; display:flex; gap:8px; align-items:center; }
.no-math .empty-state { padding:18px; background:var(--bg-surface); border-radius:8px; border:1px solid var(--border-soft); }
.math-top-controls button { padding:8px 10px; border-radius:8px; border:1px solid var(--border-soft); background:transparent; cursor:pointer; }

/* Premium UI refinements */
.math-header { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.back-button { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:none; background: linear-gradient(90deg, rgba(74,144,226,0.12), rgba(233,30,99,0.08)); color: var(--text-primary); box-shadow: var(--shadow-sm); }
.back-button:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
.premium-btn { padding:10px 16px; border-radius:12px; background: linear-gradient(90deg, var(--color-primary), var(--color-secondary)); color:white; border:none; font-weight:700; box-shadow: var(--shadow-sm); }
.premium-btn:active { transform: translateY(1px); }
.premium-outline { padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); }
.katex-loader { font-size:0.95rem; color:var(--text-muted); }
.search-panel-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-strong); }
.search-input-container { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
.search-input-container input { flex: 1; min-width: 200px; padding: 10px 15px; border-radius: 8px; border: 1px solid var(--border-strong); background-color: var(--bg-surface); color: var(--text-primary); font-size: 1rem; }
.search-input-container button { padding: 10px 20px; border-radius: 8px; border: none; background-color: var(--color-primary); color: white; font-weight: 600; cursor: pointer; transition: var(--transition-fast); }
.search-input-container button:hover { opacity: 0.9; }
.search-input-container button:disabled { opacity: 0.5; cursor: not-allowed; }

/* --- Advanced Filters --- */
.advanced-filters { position: relative; display: inline-block; }
.filter-toggle { display: flex; align-items: center; gap: 8px; padding: 10px 16px; border: 1px solid var(--border-strong); border-radius: 8px; color: var(--text-primary); cursor: pointer; font-weight: 600; transition: var(--transition-fast); }
.filter-toggle:hover { background: var(--bg-hover); }
.filter-count { background: var(--color-primary); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; }
.filter-panel { position: absolute; top: 110%; right: 0; background: var(--bg-surface); border: 1px solid var(--border-strong); border-radius: 12px; padding: 16px; width: 300px; z-index: 100; box-shadow: var(--shadow-md); }
.filter-group { margin-bottom: 16px; }
.filter-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.9rem; }
.filter-group input, .filter-group select { width: 100%; padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border-soft); background: var(--bg-card); color: var(--text-primary); }
.date-inputs { display: flex; align-items: center; gap: 8px; }
.date-inputs span { color: var(--text-muted); }
.filter-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px; }
.clear-filters, .apply-filters { padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; transition: var(--transition-fast); }
.clear-filters { background: transparent; color: var(--status-error); border: 1px solid var(--status-error); }
.apply-filters { background: var(--color-primary); color: white; }

/* --- Session & Export Controls --- */
.agent-controls { display: flex; gap: 10px; }
.session-controls { display: flex; gap: 10px; }
.session-controls button, .session-controls select { padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border-strong); background: var(--bg-surface); color: var(--text-primary); }
.export-options { display: flex; gap: 8px; }
.export-options button { padding: 10px 12px; background: var(--bg-surface); }

/* --- Loading, Empty & Error States --- */
.search-loading, .no-results, .search-error { text-align: center; padding: 40px; }
.spinner { width: 40px; height: 40px; border: 4px solid var(--bg-muted); border-top: 4px solid var(--color-primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 16px auto; }
.progress-container { width: 100%; max-width: 300px; margin-top: 16px; }
.progress-bar { width: 100%; height: 8px; background: var(--bg-muted); border-radius: 4px; overflow: hidden; }
.suggestion-button { display: block; width: 100%; text-align: left; padding: 12px 16px; margin-bottom: 8px; background: var(--bg-card); border: 1px solid var(--border-soft); border-radius: 8px; cursor: pointer; color: var(--text-primary); font-size: 0.95rem; }
.suggestion-button:hover { background: var(--bg-hover); }

/* --- Search Summary --- */
.summary-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.summary-mode-selector { display: flex; gap: 4px; background: var(--bg-muted); border-radius: 8px; padding: 4px; }
.summary-mode-selector button { padding: 6px 12px; border-radius: 6px; border: none; background: transparent; color: var(--text-muted); cursor: pointer; transition: var(--transition-fast); }
.summary-mode-selector button.active { background: var(--color-primary); color: white; }
.export-button { padding: 8px 12px; background: var(--bg-muted); }

/* --- Results Area --- */
.results-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.results-controls { display: flex; gap: 10px; align-items: center; }
.results-controls select { padding: 6px 10px; border-radius: 8px; background: var(--bg-surface); border: 1px solid var(--border-strong); color: var(--text-primary); }
.view-mode-selector { display: flex; gap: 4px; background: var(--bg-muted); border-radius: 8px; padding: 4px; }
.view-mode-selector button { padding: 6px 12px; border-radius: 6px; border: none; background: transparent; color: var(--text-muted); cursor: pointer; transition: var(--transition-fast); }
.view-mode-selector button.active { background: var(--color-primary); color: white; }
.icon-list::before { content: ''; } .icon-cluster::before { content: ''; } .icon-timeline::before { content: ''; }

.search-result { padding: 16px; border: 1px solid var(--border-soft); border-radius: 8px; margin-bottom: 12px; transition: var(--transition-fast); }
.search-result:hover { background: var(--bg-hover); border-color: var(--border-strong); }
.result-header { display: flex; gap: 12px; align-items: flex-start; }
.result-favicon { width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px; }
.result-header h4 { flex: 1; margin: 0; font-size: 1.1rem; }
.result-header h4 a { color: var(--text-primary); text-decoration: none; }
.result-header h4 a:hover { color: var(--color-secondary); }
.expand-toggle { background: none; border: none; color: var(--text-muted); font-size: 1rem; cursor: pointer; }
.result-snippet { margin: 8px 0; color: var(--text-muted); }
.result-meta { display: flex; gap: 15px; font-size: 0.8rem; color: var(--text-muted); margin-top: 12px; flex-wrap: wrap; }
.reliability-indicator { display: flex; gap: 2px; }
.reliability-indicator span { color: var(--text-muted); }
.reliability-indicator span.active { color: var(--status-warning); }

/* --- Expanded Result Details --- */
.result-details { margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-soft); }
.detail-section { margin-bottom: 16px; }
.detail-section h5 { margin-bottom: 8px; font-size: 0.9rem; }
.concept-tags { display: flex; flex-wrap: wrap; gap: 8px; }
.concept-tag { padding: 4px 10px; background: var(--bg-muted); border-radius: 16px; font-size: 0.8rem; }
.citation { display: block; padding: 12px; background: var(--bg-muted); border-radius: 8px; font-family: var(--font-mono); font-size: 0.85rem; }

/* --- Image Gallery --- */
.image-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; }
.image-item { border-radius: 8px; overflow: hidden; cursor: pointer; transition: var(--transition-fast); }
.image-item:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
.image-item img { width: 100%; height: 120px; object-fit: cover; }
.lightbox { position: fixed; inset: 0; background: var(--bg-modal-overlay); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 20px; }
.lightbox-content img { max-width: 90vw; max-height: 80vh; border-radius: 8px; box-shadow: var(--shadow-lg); }
.lightbox-caption { position: absolute; bottom: 20px; left: 20px; right: 20px; background: rgba(0,0,0,0.7); color: white; padding: 16px; border-radius: 0 0 8px 8px; text-align: center; }

/* --- Cluster & Timeline Views --- */
.clusters-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; }
.cluster { background: var(--bg-surface); border: 1px solid var(--border-soft); border-radius: 8px; padding: 16px; }
.cluster-result { padding: 8px; background: var(--bg-muted); border-radius: 6px; margin-bottom: 8px; }
.timeline-year { margin-bottom: 24px; }
.timeline-item { display: flex; gap: 12px; padding: 8px; background: var(--bg-surface); border-radius: 6px; margin-bottom: 8px; }
.timeline-date { min-width: 80px; font-size: 0.8rem; color: var(--text-muted); }

/* --- Knowledge Graph --- */
.knowledge-graph-card { padding: 10px; }
.knowledge-graph-svg-wrapper svg text { fill: var(--text-primary); font-size: 12px; pointer-events: none; }
.knowledge-graph-svg-wrapper svg line { stroke: var(--border-strong); }
.knowledge-graph-svg-wrapper svg .nodes g circle { fill: var(--color-secondary); transition: var(--transition-fast); }
.knowledge-graph-svg-wrapper svg .nodes g:hover circle { fill: var(--color-primary); transform: scale(1.1); }
.knowledge-graph-svg-wrapper svg .nodes g.center-node circle { fill: var(--status-success); }
.knowledge-graph-svg-wrapper svg .nodes g.center-node text { font-weight: bold; }

/* =================================================================== */
/* 9. OTHER PANELS (Soul, Memories, Math, etc.)                        */
/* =================================================================== */
/* --- Soul Panel --- */
.soul-grid { display:grid; gap:16px; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
.soul-stat .stat-value { font-size: 1.8rem; font-weight: 700; margin-bottom: 8px; color: var(--color-primary); }
.soul-stat .stat-bar { width: 100%; height: 8px; background: var(--bg-muted); border-radius: 4px; overflow: hidden; }
.soul-stat .stat-fill { height: 100%; background: linear-gradient(90deg, var(--color-secondary), var(--color-primary)); border-radius: 4px; transition: width 0.5s ease; }
.soul-stat.system-health.optimal { border-left: 4px solid var(--status-success); }
.soul-stat.system-health.overloaded { border-left: 4px solid var(--status-warning); }
.soul-stat.system-health.healing { border-left: 4px solid var(--status-info); }
.soul-actions { display: flex; flex-direction: column; gap: 10px; }
.soul-action-button { padding: 12px 16px; border-radius: 8px; border: none; background: var(--bg-muted); color: var(--text-primary); font-weight: 600; cursor: pointer; transition: var(--transition-fast); text-align: center; }
.soul-action-button:hover { background: var(--bg-hover); transform: translateY(-2px); }
.soul-action-button.positive-feedback { background: var(--status-success); color: white; }
.soul-action-button.negative-feedback { background: var(--status-error); color: white; }

/* --- Memories, Goals, Knowledge Panels --- */
.memory-item, .goal-item, .knowledge-item { padding: 15px; border-left: 4px solid var(--color-secondary); margin-bottom: 12px; }
.goal-item.completed { border-left-color: var(--status-success); opacity: 0.8; }
.memory-time, .goal-time, .knowledge-time { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 6px; }
.knowledge-meta { display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:10px; border-top:1px solid var(--border-soft); padding-top:8px; }
.knowledge-edit-view textarea { width: 100%; min-height:80px; padding:8px; border-radius:6px; border:1px solid var(--border-soft); background:var(--bg-muted); color:var(--text-primary); }
.knowledge-actions .action-button.save { border-color:var(--status-success); color:var(--status-success); }
.knowledge-actions .action-button.delete { border-color:var(--status-error); color:var(--status-error); }

/* --- Creative Panel --- */
.type-selector { margin-bottom: 15px; }
.type-buttons { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; }
.type-button { display: flex; align-items: center; gap: 8px; padding: 10px 15px; border: 1px solid var(--border-soft); background: var(--bg-muted); border-radius: 8px; cursor: pointer; transition: var(--transition-fast); }
.type-button.active { background: var(--color-primary); color: white; border-color: var(--color-primary); }
.custom-prompt textarea { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-soft); background: var(--bg-surface); color: var(--text-primary); resize: vertical; }
.generate-button { padding: 12px 20px; border-radius: 8px; border: none; background: var(--bg-muted); color: var(--text-primary); cursor: pointer; transition: var(--transition-fast); }
.generate-button.primary { background: var(--color-primary); color: white; }
.image-container img { max-width: 100%; border-radius: 8px; }

/* =================================================================== */
/* 10. MODALS & NOTIFICATIONS                                          */
/* =================================================================== */
.settings-modal, .modal-backdrop { position: fixed; inset: 0; background-color: rgba(10,10,10,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 20px; }
.settings-content, .modal-content { background-color: var(--bg-surface); border-radius: 12px; width: 100%; max-width: 1100px; max-height: 90vh; overflow: auto; display: block; box-shadow: var(--shadow-lg); border: 1px solid var(--border-strong); padding: 18px; }
.modal-content { max-width: 520px; padding: 20px; }
.settings-header { padding: 12px 0; border-bottom: 1px solid var(--border-strong); display: flex; justify-content: space-between; align-items: center; }
.settings-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 18px; padding: 12px 0 18px; }
@media (max-width: 860px) {
  .settings-grid { grid-template-columns: 1fr; }
}

/* Header search & filter contrast improvements */
.search-box { display:flex; align-items:center; gap:8px; background: var(--bg-surface); border:1px solid var(--border-soft); padding:8px 12px; border-radius:10px; }
.search-box input { border: none; outline: none; background: transparent; color: var(--text-primary); min-width: 200px; }
.filter-buttons button { margin-left:8px; padding:8px 12px; border-radius:999px; border:1px solid var(--border-soft); background: var(--bg-muted); color:var(--text-primary); cursor:pointer; }
.filter-buttons button.active { background: linear-gradient(90deg,var(--color-primary),var(--color-secondary)); color:#fff; border-color:transparent; }
.setting-item label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-muted); }
.setting-item input[type="text"], .setting-item select { width:100%; padding:8px 10px; border-radius:8px; border:1px solid var(--border-soft); background:var(--bg-surface); color:var(--text-primary); }
.switch { position:relative; width:52px; height:28px; display:inline-block; }
.switch input { display:none; }
.slider { position:absolute; inset:0; border-radius:28px; background:var(--bg-muted); cursor:pointer; transition: all .12s ease; }
.slider:before { content:""; position:absolute; left:4px; bottom:4px; width:20px; height:20px; background:#fff; border-radius:50%; transition: all .12s ease; }
.switch input:checked + .slider { background: var(--color-primary); }
.switch input:checked + .slider:before { transform: translateX(24px); }
.settings-footer { padding: 15px 20px; border-top: 1px solid var(--border-strong); display: flex; justify-content: flex-end; }
.modal-actions { display:flex; gap:12px; justify-content:center; margin-top:18px; }
.modal-button { padding:8px 14px; border-radius:8px; cursor:pointer; border:none; }
.modal-button.cancel { background: var(--bg-muted); color: var(--text-primary); }
.modal-button.confirm { background: var(--status-error); color: white; }

.notification { position:fixed; left:50%; transform: translateX(-50%); bottom:20px; z-index:1002; padding:12px 20px; border-radius:10px; color: white; font-weight:700; box-shadow: var(--shadow-lg); animation: slideUp .28s ease; }
.notification.info { background: var(--status-info); }
.notification.success { background: var(--status-success); }
.notification.warning { background: var(--status-warning); color: #121212; }
.notification.error { background: var(--status-error); }

/* Media gallery and result media */
.image-gallery-container, .video-gallery-container { margin-bottom: 12px; }
.image-grid, .video-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(140px,1fr)); gap:10px; }
.image-item, .video-item { background: var(--bg-surface); border:1px solid var(--border-soft); border-radius:8px; padding:6px; cursor:pointer; }
.image-wrapper img, .video-thumb img { width:100%; height:100px; object-fit:cover; border-radius:6px; }
.image-caption, .video-caption { font-size:0.85rem; color:var(--text-muted); margin-top:6px; }

.lightbox { position:fixed; inset:0; background: rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; z-index:2000; }
.lightbox-content { position:relative; max-width:90%; max-height:90%; background: transparent; padding:12px; }
.lightbox-content img { max-width:100%; max-height:80vh; display:block; border-radius:8px; }
.lightbox-close { position:absolute; top:-6px; right:-6px; background:var(--bg-card); border:1px solid var(--border-soft); border-radius:50%; width:36px; height:36px; font-size:1.2rem; cursor:pointer; }
.lightbox-nav { position:absolute; top:50%; transform:translateY(-50%); background:var(--bg-card); border:1px solid var(--border-soft); width:44px; height:44px; border-radius:50%; cursor:pointer; }
.lightbox-nav.prev { left:-50px; }
.lightbox-nav.next { right:-50px; }

/* Video lightbox */
.video-lightbox { position:fixed; inset:0; background: rgba(0,0,0,0.9); display:flex; align-items:center; justify-content:center; z-index:2100; }
.video-lightbox-content { position:relative; max-width:1000px; width:90%; padding:12px; background:transparent; }
.video-player-wrap { background: var(--bg-surface); padding:8px; border-radius:8px; }
.video-play-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:2rem; color:rgba(255,255,255,0.9); pointer-events:none; }
.video-thumb-small { position:relative; }
.video-thumb-small .play-overlay { position:absolute; top:6px; right:6px; background: rgba(0,0,0,0.5); color:white; padding:4px 6px; border-radius:6px; }

/* Result media */
.result-media img { max-width: 220px; margin-top:8px; border-radius:8px; border:1px solid var(--border-soft); }

/* Pagination controls */
.pagination-controls { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px; }
.pagination-controls select, .pagination-controls input { padding:6px 8px; border-radius:6px; border:1px solid var(--border-soft); background:var(--bg-surface); color:var(--text-primary); }
.pagination-controls button { padding:6px 10px; border-radius:6px; border:1px solid var(--border-soft); background:transparent; cursor:pointer; }

/* =================================================================== */
/* 11. ANIMATIONS & RESPONSIVE                                         */
/* =================================================================== */
@keyframes fadeIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
@keyframes slideUp { from { transform: translate(-50%, 20px); opacity:0; } to { transform: translate(-50%, 0); opacity:1; } }
@keyframes spin { from { transform: rotate(0); } to { transform: rotate(360deg); } }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); } }
@keyframes bounce { 0%,80%,100% { transform: scale(0); } 40% { transform: scale(1.0); } }

@media (max-width: 900px) {
  .search-input-container { flex-direction: column; }
  .settings-grid { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .soul-grid { grid-template-columns: 1fr; }
  .clusters-container, .image-grid { grid-template-columns: 1fr; }
}

@media (max-width: 480px) {
  .app-header { flex-direction: column; align-items:flex-start; gap:8px; }
  .header-left, .header-right { width:100%; justify-content:space-between; }
  .chat-input { padding: 14px 100px 14px 20px; }
  .input-actions { right:5px; }
  .feeling-buttons { justify-content: center; }
}

/* =================================================================== */
/* 5. CHAT PANEL (conversation list, messages, typing)                 */
/* =================================================================== */

/* main chat container */
/* ...existing code... */

/* === Theme tokens & utility helpers ===
   These variables provide a consistent theme surface that the search panel
   and other components can safely reference. Consumers can override them
   in a top-level :root or a theme-specific wrapper (e.g. .theme-dark). */
:root {
  --bg: #f7fafc;
  --card-bg: #ffffff;
  --muted: #6b7280;
  --primary: #2a8fd4;
  --primary-600: #1f74b3;
  --accent: #4ad3ff;
  --soft-border: #e6e9ef;
  --glass: rgba(255,255,255,0.8);
  --radius: 8px;
  --transition: 0.14s ease;
}

/* Dark theme example - users can add this class to root to switch */
.theme-dark {
  --bg: #0b1220;
  --card-bg: #071022;
  --muted: #9aa6b2;
  --primary: #4aa3ff;
  --soft-border: rgba(255,255,255,0.06);
}

/* Accessibility focus ring for keyboard users */
:focus {
  outline: none;
}
.focus-ring:focus {
  box-shadow: 0 0 0 4px rgba(42,143,212,0.12);
  border-radius: var(--radius);
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* Skeleton placeholder utility */
.skeleton { background: linear-gradient(90deg, rgba(0,0,0,0.04) 0%, rgba(0,0,0,0.02) 50%, rgba(0,0,0,0.04) 100%); border-radius:6px; min-height:10px; }
.skeleton.img { height:110px; width:100%; display:block; }

/* Lazy image helper */
.aion-lazy-wrapper{
  position:relative;
  width:100%;
  min-height:56px;
  display:block;
  border-radius:8px;
  overflow:hidden;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));
}
.aion-shimmer{
  position:absolute;
  inset:0;
  background: linear-gradient(90deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.035) 50%, rgba(255,255,255,0.02) 100%);
  transform: translateX(-120%);
  animation: aion-shimmer 1.4s linear infinite;
}
.aion-placeholder-svg{ display:flex; align-items:center; justify-content:center; width:100%; height:100%; }
.aion-lazy-img{ width:100%; height:auto; display:block; opacity:0; transition: opacity .28s ease, transform .28s ease; }
.aion-lazy-img.loaded{ opacity:1; transform: none; }
.aion-gallery-img{ width:100%; height:220px; object-fit:cover; display:block; border-radius:8px; }

/* Pinned-card shimmer (moved here from MemoriesPanel.css) */
.pinned-card.shimmer { position:relative; overflow:hidden; }
.pinned-card.shimmer::after { content:''; position:absolute; inset:0; background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0) 100%); transform:translateX(-120%); animation: aion-shimmer 2.4s linear infinite; pointer-events:none; }

@keyframes aion-shimmer { from { transform:translateX(-120%);} to { transform:translateX(120%);} }

.aion-lazy-img, .lazy-img { background: #f3f6f9; display:block; }

/* Visually-hidden helper for accessibility */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* Small utility spacing */
.gap-small { gap:8px; }
.gap-medium { gap:12px; }
.gap-large { gap:18px; }

/* === SearchPanel: Visual Results, Galleries, Lightboxes, and Result Cards === */

/* Cards and general layout */
.search-panel { padding: 18px; box-sizing: border-box; color: #222; }
.agent-card { background: #fff; border-radius: 8px; box-shadow: 0 1px 4px rgba(16,24,40,0.06); padding: 12px; margin-bottom: 16px; }
.search-panel-header { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom: 12px; }
.header-main h3 { margin:0; font-size:1.1rem; }
.header-status { display:flex; align-items:center; gap:8px; }
.status-indicator { display:inline-block; padding:6px 10px; border-radius:999px; font-size:12px; color:#083344; background:#e6f7ff; }
.progress-ring { width:30px; height:30px; border-radius:50%; background: conic-gradient(#2a8fd4 var(--progress), #e6eef7 0); }

/* Search input and controls */
.search-input-container { display:flex; gap:12px; align-items:flex-start; margin-bottom:14px; }
.search-input-wrapper { position:relative; flex:1; }
.search-input { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e6e9ef; outline:none; font-size:14px; }
.search-input:focus { box-shadow:0 0 0 3px rgba(42,143,212,0.08); border-color:#2a8fd4; }
.query-suggestions-popup { position:absolute; left:0; right:0; top:42px; background:#fff; border:1px solid #e6e9ef; border-radius:6px; max-height:220px; overflow:auto; z-index:60; box-shadow:0 6px 18px rgba(16,24,40,0.08); }
.suggestion-item { padding:8px 10px; cursor:pointer; }
.suggestion-item:hover { background:#f5f7fb; }

.btn-primary { background:#2a8fd4; color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
.btn-primary:disabled { opacity:0.5; cursor:not-allowed; }

/* Advanced filters panel */
.advanced-filters { position:relative; }
.filter-toggle { display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:8px; background:#fff; border:1px solid #e6e9ef; cursor:pointer; }
.filter-panel { position:absolute; top:40px; left:0; width:360px; background:#fff; border-radius:8px; box-shadow:0 6px 24px rgba(2,6,23,0.08); padding:12px; z-index:55; }
.filter-tabs { display:flex; gap:6px; margin-bottom:8px; }
.filter-tabs button { background:transparent; border:1px solid transparent; padding:6px 8px; border-radius:6px; cursor:pointer; }
.filter-tabs button.active { border-color:#e6e9ef; background:#f7fbff; }
.filter-group { margin-bottom:10px; }
.filter-options { display:flex; flex-wrap:wrap; gap:6px; }
.filter-option { display:flex; align-items:center; gap:8px; }
.checkmark { width:14px; height:14px; display:inline-block; border-radius:3px; border:1px solid #cfd8e3; }

/* Pagination controls */
.pagination-controls { display:flex; justify-content:space-between; align-items:center; gap:12px; padding:8px 6px; margin-bottom:8px; }
.pagination-left, .pagination-center, .pagination-right { display:flex; align-items:center; gap:8px; }
.pagination-center button { padding:6px 8px; border-radius:6px; border:1px solid #e6e9ef; background:#fff; cursor:pointer; }
.pagination-center button:disabled { opacity:0.45; cursor:not-allowed; }
.pagination-right input { width:70px; padding:6px; border-radius:6px; border:1px solid #e6e9ef; }

/* Search result card */
.search-result { display:block; border-radius:8px; padding:12px; border:1px solid transparent; transition:box-shadow .12s ease, border-color .12s ease; margin-bottom:10px; background:linear-gradient(180deg, #fff, #fcfdff); }
.search-result:hover { box-shadow:0 8px 28px rgba(16,24,40,0.06); border-color:#e6eef7; }
.result-main { display:flex; gap:12px; align-items:flex-start; cursor:pointer; }
.result-header { display:flex; gap:10px; align-items:flex-start; width:100%; }
.result-favicon { width:28px; height:28px; border-radius:4px; object-fit:cover; }
.result-title-container h4 { margin:0; font-size:15px; }
.result-meta { color:#6b7280; font-size:12px; margin-top:6px; }
.result-actions { margin-left:auto; display:flex; gap:6px; align-items:center; }
.result-snippet { color:#374151; margin:6px 0 8px 0; }

.result-media { margin-top:8px; max-width:360px; border-radius:8px; overflow:hidden; }
.result-media img, .result-media video { width:100%; height:auto; display:block; }
.video-thumb-small { position:relative; display:inline-block; max-width:220px; border-radius:6px; overflow:hidden; }
.video-thumb-small img { display:block; }
.video-thumb-small .play-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#fff; font-size:28px; background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.35)); }

.result-quality-indicators { display:flex; gap:12px; align-items:center; margin-top:8px; }
.quality-indicator { display:flex; align-items:center; gap:8px; }
.score-bar { width:120px; height:8px; background:#eef2f7; border-radius:6px; overflow:hidden; }
.score-fill { height:100%; background:linear-gradient(90deg,#2a8fd4,#4ad3ff); }

.reliability-indicator span { color:#f5b042; }

/* Expanded result details */
.result-details { margin-top:10px; padding-top:8px; border-top:1px dashed #eef2f7; display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
.detail-section h5 { margin:0 0 6px 0; font-size:14px; }
.concept-tag, .entity-tag { display:inline-block; background:#f3f7fb; padding:4px 8px; border-radius:999px; margin:4px; font-size:12px; }

/* Image Gallery */
.image-gallery-container .gallery-header, .video-gallery-container .gallery-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.image-grid, .video-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap:10px; }
.image-item, .video-item { cursor:pointer; border-radius:8px; overflow:hidden; background:#fff; border:1px solid #f1f5f9; }
.image-wrapper img, .video-thumb img, .video-thumb video { width:100%; height:110px; object-fit:cover; display:block; }
.image-caption, .video-caption { padding:6px 8px; font-size:13px; color:#374151; }

/* Lightbox styles */
.lightbox, .video-lightbox { position:fixed; inset:0; background:rgba(4,10,20,0.6); display:flex; align-items:center; justify-content:center; z-index:200; }
.lightbox-content, .video-lightbox-content { max-width:1100px; width:calc(100% - 40px); background:transparent; position:relative; }
.lightbox-close { position:absolute; right:8px; top:8px; background:rgba(255,255,255,0.9); border-radius:50%; width:36px; height:36px; border:none; font-size:22px; cursor:pointer; }
.lightbox-nav { position:absolute; top:50%; transform:translateY(-50%); background:rgba(255,255,255,0.9); width:44px; height:44px; border-radius:6px; border:none; font-size:20px; cursor:pointer; }
.lightbox-nav.prev { left:8px; }
.lightbox-nav.next { right:8px; }
.lightbox-content img { max-width:100%; max-height:80vh; display:block; margin:0 auto; }
.video-player-wrap { display:flex; align-items:center; justify-content:center; }

/* Video gallery thumbnail overlay */
.video-play-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:36px; color:#fff; pointer-events:none; }

/* Knowledge graph and SVG wrapper */
.knowledge-graph-container { background:#fff; padding:12px; border-radius:8px; box-shadow:0 1px 6px rgba(2,6,23,0.04); }
.graph-controls { display:flex; gap:8px; align-items:center; margin-bottom:8px; }
.graph-mode-btn { padding:6px 8px; border-radius:6px; border:1px solid #e6e9ef; background:#fff; cursor:pointer; }
.graph-mode-btn.active { background:#f7fbff; border-color:#d8ecff; }

/* Timeline and sentiment visuals */
.search-timeline { background:#fff; padding:12px; border-radius:8px; }
.timeline-step { padding:8px; border-bottom:1px solid #f1f5f9; display:flex; gap:10px; align-items:flex-start; }
.timeline-step .timeline-marker { width:40px; text-align:center; }
.progress-fill { background:#2a8fd4; height:8px; border-radius:8px; }

/* Cluster and list views */
.cluster { background:#fff; border-radius:8px; padding:10px; margin-bottom:10px; }

/* Responsive tweaks */
@media (max-width: 900px) {
  .result-details { grid-template-columns: 1fr; }
  .image-grid, .video-grid { grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); }
  .search-input-container { flex-direction:column; }
  .filter-panel { width:92%; left:0; right:0; }
}

@media (max-width: 480px) {
  .header-main h3 { font-size:1rem; }
  .image-caption, .video-caption { font-size:12px; }
}

/* Small utility helpers */
.muted { color:#6b7280; }
.tiny { font-size:12px; }

/* conversation history list */
/* ...existing code... */

/* message wrapper */
/* ...existing code... */

/* avatars */
/* ...existing code... */

/* messages */
/* ...existing code... */

/* user message style */
/* ...existing code... */

/* AION message style */
/* ...existing code... */

/* message header inside bubble */
/* ...existing code... */

/* message body */
/* ...existing code... */

/* code block inside messages */
/* ...existing code... */

/* inline code */
/* ...existing code... */

/* message actions toolbar (copy, speak, regenerate) */
/* ...existing code... */

/* action buttons */
/* ...existing code... */

/* typing indicator */
/* ...existing code... */

/* greeting / empty chat */
/* ...existing code... */

/* streaming indicator */
/* ...existing code... */

/* =================================================================== */
/* 6. INPUT AREA & CONTROLS                                             */
/* =================================================================== */

/* input section container */
/* ...existing code... */

/* textarea input */
/* ...existing code... */

/* input actions (mic, send) */
/* ...existing code... */

/* microphone button */
/* ...existing code... */

/* send button */
/* ...existing code... */

/* quick feelings row (shortcuts) */
/* ...existing code... */

/* =================================================================== */
/* 7. PANELS: Soul, Memories, Search, Math, Quantum, Neural, Creative  */
/* =================================================================== */
.panel-card, .agent-card, .soul-stat, .memory-item, .goal-item, .knowledge-item, .math-problem, .math-answer, .math-formula, .quantum-state, .neural-output-value, .creative-output-display, .settings-group {
  background: var(--bg-card);
  border-radius: var(--rounded);
  border: 1px solid var(--border-strong);
  padding: 20px;
  box-shadow: none;
}

.modal-content {
  background: var(--bg-surface);
  padding: 30px;
  border-radius: var(--rounded);
  border: 1px solid var(--border-strong);
  box-shadow: var(--shadow-lg);
}

.notification {
  background: var(--bg-card);
  border: 1px solid var(--border-strong);
  padding: 14px 22px;
  border-radius: var(--rounded);
  font-weight:700;
  box-shadow: var(--shadow-lg);
  animation: slideUp .28s ease;
  color: var(--text-primary); /* Default text color */
}
.notification.info { border-left: 3px solid var(--status-info); }
.notification.success { border-left: 3px solid var(--status-success); }
.notification.warning { border-left: 3px solid var(--status-warning); }
.notification.error { border-left: 3px solid var(--status-error); }

/* Canonical animation keyframes used by the app and ChatPanel.
  We keep a single definition here to avoid duplicates overriding each other. */
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideUp { from { transform: translate(-50%, 20px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); } }
@keyframes wave { 0%, 60%, 100% { transform: initial; } 30% { transform: translateY(-8px); } }

/* shared panel card style */
.panel-card, .agent-card {
  background: var(--bg-card);
  border-radius: 12px;
  border: 1px solid var(--border-strong);
  padding: 16px;
  box-shadow: var(--shadow-xs);
}

/* panel headers */
.panel-header, .math-header, .quantum-header, .neural-header, .creative-header, .goals-header, .knowledge-header {
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px;
}

/* agent dashboard layout (search) - left = plan/thoughts, right = results */
.agent-dashboard { display:grid; gap:16px; grid-template-columns: 1fr 2fr; align-items:start; }

/* agent left and right columns */
.agent-left-column, .agent-right-column { display:flex; flex-direction:column; gap:12px; max-height:60vh; overflow:auto; padding-right:6px; }

/* progress bar in plans */
.progress-bar-container { width:100%; height:8px; background: var(--bg-muted); border-radius:6px; overflow:hidden; margin-bottom:10px; }
.progress-bar { height:100%; background: var(--color-primary); transition: width .5s ease; }

/* research plan steps */
.agent-plan ol { list-style:none; padding-left:0; margin:0; display:flex; flex-direction:column; gap:10px; }
.plan-step { display:flex; gap:10px; align-items:center; font-size:.94rem; color:var(--text-primary); }
.plan-step .step-icon { width:18px; height:18px; border-radius:50%; border:2px solid var(--text-muted); display:inline-flex; align-items:center; justify-content:center; font-size:.7rem; }
.plan-step.in_progress .step-icon { border-color:var(--status-warning); animation: pulse 1.6s infinite; }
.plan-step.completed .step-icon { background:var(--status-success); border-color:var(--status-success); color:white; }

/* thought process */
.agent-thought-process pre { background: var(--bg-muted); padding:12px; border-radius:8px; font-family: var(--font-mono); font-size:.9rem; color:var(--text-primary); white-space:pre-wrap; }

/* search results grid and item (right column) */
.search-results { display:flex; flex-direction:column; gap:12px; }
.search-result { padding:12px; border-radius:8px; border:1px solid var(--border-soft); background: transparent; transition: box-shadow .12s ease, transform .12s ease; }
.search-result:hover { box-shadow: var(--shadow-sm); transform: translateY(-4px); }

/* MediaPanel styles */
.media-panel {
  padding: 12px;
  margin: 12px 0;
}
.media-panel .card-header h4 {
  margin: 0 0 8px 0;
  font-size: 16px;
}
.media-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
  align-items: start;
}
.media-thumb {
  position: relative;
  width: 100%;
  padding-top: 66%; /* 3:2 aspect */
  overflow: hidden;
  border-radius: 6px;
  background: var(--bg-muted);
  display: block;
}
.media-thumb img,
.media-thumb video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.media-thumb .play-overlay,
.media-thumb.video .play-overlay {
  position: absolute;
  right: 6px;
  bottom: 6px;
  background: rgba(0,0,0,0.5);
  color: #fff;
  padding: 6px 8px;
  border-radius: 4px;
  font-size: 12px;
}
.media-thumb:hover {
  transform: translateY(-2px);
  transition: transform 150ms ease;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

/* NewsPanel styles */
.news-panel {
  padding: 12px;
  margin: 12px 0;
}
.news-panel .card-header h4 {
  margin: 0 0 8px 0;
  font-size: 16px;
}
.news-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 8px;
}
.news-item {
  padding: 8px 10px;
  border-radius: 6px;
  display: flex;
  flex-direction: column;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
}
.news-item a {
  color: var(--text-primary);
  font-weight: 600;
  text-decoration: none;
}
.news-item a:hover { text-decoration: underline; }
.news-meta {
  font-size: 12px;
  color: var(--muted);
  margin-top: 4px;
}

@media (max-width: 640px) {
  .media-grid { grid-template-columns: repeat(2, 1fr); }
}

/* result item layout */
.result-main { display:flex; gap:12px; align-items:flex-start; }
.result-favicon { width:24px; height:24px; border-radius:4px; flex-shrink:0; }
.result-content h4 { margin:0 0 6px 0; font-size:1rem; }
.result-snippet { margin:0; font-size:.95rem; color:var(--text-muted); }
.result-meta { display:flex; gap:10px; margin-top:8px; font-size:.78rem; color:var(--text-muted); }

/* knowledge graph wrapper */
.key-entities-container .graph-wrapper { height:300px; display:flex; align-items:center; justify-content:center; background: var(--bg-muted); border-radius:8px; }

/* ===================================================================
   PREMIUM SOUL PANEL REDESIGN - ADVANCED & PROFESSIONAL
   =================================================================== */

.soul-grid {
  display: grid;
  gap: 16px;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  align-items: start;
  position: relative;
}

/* PREMIUM SOUL STAT CARD */
.soul-stat {
  padding: 18px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  border: 1.5px solid rgba(0,212,255,0.15);
  box-shadow: 0 12px 36px rgba(0,0,0,0.3);
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.soul-stat::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1.5px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.25), transparent);
}

.soul-stat:hover {
  border-color: rgba(0,212,255,0.3);
  box-shadow: 0 16px 48px rgba(0,212,255,0.15);
  transform: translateY(-4px);
}

/* STAT HEAD - PREMIUM STYLING */
.stat-head {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(0,212,255,0.12);
}

.stat-icon {
  font-size: 1.3rem;
  color: #00d4ff;
  opacity: 0.9;
}

.soul-stat h4 {
  margin: 0;
  font-size: 0.95rem;
  font-weight: 700;
  color: #00d4ff;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

/* STAT VALUE - PREMIUM */
.soul-stat .stat-value {
  font-size: 2rem;
  font-weight: 800;
  margin-bottom: 12px;
  background: linear-gradient(135deg, #00d4ff, #b24bff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-family: var(--font-mono);
}

/* STAT BAR - PREMIUM */
.soul-stat .stat-bar {
  width: 100%;
  height: 10px;
  background: linear-gradient(90deg, rgba(0,0,0,0.4), rgba(0,0,0,0.2));
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(0,212,255,0.12);
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
}

.soul-stat .stat-fill {
  height: 100%;
  background: linear-gradient(90deg, #00d4ff, #b24bff);
  border-radius: 8px;
  transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 0 15px rgba(0,212,255,0.4), inset 0 1px 0 rgba(255,255,255,0.2);
  position: relative;
}

.soul-stat .stat-fill::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* SYSTEM HEALTH - COLOR CODED */
.soul-stat.system-health {
  border-left: 4px solid transparent;
}

.soul-stat.system-health.optimal {
  border-left-color: #00ff88;
  border-top-color: rgba(0,255,136,0.2);
}

.soul-stat.system-health.optimal .stat-icon {
  color: #00ff88;
}

.soul-stat.system-health.optimal h4 {
  color: #00ff88;
}

.soul-stat.system-health.overloaded {
  border-left-color: #ffa500;
  border-top-color: rgba(255,165,0,0.2);
}

.soul-stat.system-health.overloaded .stat-icon {
  color: #ffa500;
}

.soul-stat.system-health.overloaded h4 {
  color: #ffa500;
}

.soul-stat.system-health.healing {
  border-left-color: #00d4ff;
  border-top-color: rgba(0,212,255,0.2);
}

.health-alerts {
  margin-top: 8px;
  font-size: 0.85rem;
  color: #00ff88;
  font-weight: 600;
  letter-spacing: 0.3px;
}

/* SOUL VALUES & EMOTIONS - PREMIUM GRID */
.soul-values, .soul-emotional-state {
  grid-column: span 1;
  padding: 18px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(6,12,32,0.4), rgba(12,16,24,0.5));
  border: 1.5px solid rgba(0,212,255,0.15);
  box-shadow: 0 12px 36px rgba(0,0,0,0.3);
  position: relative;
  overflow: hidden;
}

.soul-values::before, .soul-emotional-state::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1.5px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.25), transparent);
}

.soul-values h4, .soul-emotional-state h4 {
  margin: 0 0 14px 0;
  font-size: 1rem;
  font-weight: 800;
  color: #00d4ff;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(0,212,255,0.12);
}

/* VALUE ITEMS - PREMIUM */
.value-item, .emotion-item {
  margin-bottom: 14px;
  padding-bottom: 12px;
  border-bottom: 1px solid rgba(0,212,255,0.08);
}

.value-item:last-child, .emotion-item:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.value-item > span, .emotion-item > span:first-child {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  font-size: 0.9rem;
  font-weight: 600;
  color: rgba(255,255,255,0.8);
}

.emotion-value {
  font-size: 0.8rem;
  color: #00d4ff;
  font-weight: 700;
}

/* VALUE BARS - PREMIUM */
.value-bar, .emotion-bar {
  height: 10px;
  background: linear-gradient(90deg, rgba(0,0,0,0.4), rgba(0,0,0,0.2));
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(0,212,255,0.12);
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
}

.value-fill, .emotion-fill {
  height: 100%;
  background: linear-gradient(90deg, #00d4ff, #b24bff);
  border-radius: 8px;
  transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: 0 0 12px rgba(0,212,255,0.35), inset 0 1px 0 rgba(255,255,255,0.2);
  position: relative;
}

.value-fill::after, .emotion-fill::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: shimmer 2s infinite;
}

/* SOUL ACTIONS - PREMIUM BUTTONS */
.soul-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  grid-column: span 1;
}

.soul-action-button {
  padding: 14px 16px;
  border-radius: 12px;
  border: 1.5px solid rgba(0,212,255,0.2);
  background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(178,75,255,0.05));
  color: #00d4ff;
  font-weight: 700;
  font-size: 0.9rem;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  text-transform: uppercase;
  position: relative;
  overflow: hidden;
}

.soul-action-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,0.2), transparent);
  transition: left 0.6s ease;
}

.soul-action-button:hover {
  border-color: rgba(0,212,255,0.4);
  background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(178,75,255,0.1));
  box-shadow: 0 8px 24px rgba(0,212,255,0.2);
  transform: translateY(-3px);
}

.soul-action-button:hover::before {
  left: 100%;
}

.soul-action-button.positive-feedback {
  background: linear-gradient(135deg, rgba(0,255,136,0.15), rgba(0,200,100,0.08));
  border-color: rgba(0,255,136,0.3);
  color: #00ff88;
}

.soul-action-button.positive-feedback:hover {
  background: linear-gradient(135deg, rgba(0,255,136,0.25), rgba(0,200,100,0.15));
  border-color: rgba(0,255,136,0.5);
  box-shadow: 0 8px 24px rgba(0,255,136,0.2);
}

.soul-action-button.negative-feedback {
  background: linear-gradient(135deg, rgba(255,100,100,0.15), rgba(255,50,50,0.08));
  border-color: rgba(255,100,100,0.3);
  color: #ff6464;
}

.soul-action-button.negative-feedback:hover {
  background: linear-gradient(135deg, rgba(255,100,100,0.25), rgba(255,50,50,0.15));
  border-color: rgba(255,100,100,0.5);
  box-shadow: 0 8px 24px rgba(255,100,100,0.2);
}

.soul-action-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* =================================================================== */
/* MEMORIES PANEL                                                         */
/* =================================================================== */
/* Ultra Memory System Styles */
.memories-panel {
  padding: 20px;
  background: var(--background-primary);
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  max-height: 80vh;
  overflow-y: auto;
}

.memory-controls {
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--border-color);
}

.memory-search {
  display: flex;
  margin-bottom: 15px;
}

.memory-search-input {
  flex: 1;
  padding: 10px 15px;
  border: 1px solid var(--border-color);
  border-radius: 6px 0 0 6px;
  font-size: 14px;
}

.memory-search-button {
  padding: 10px 15px;
  background: var(--primary-color);
  color: white;
  border: none;
  border-radius: 0 6px 6px 0;
  cursor: pointer;
}

.memory-filters {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.filter-select {
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: white;
}

.analytics-toggle {
  padding: 8px 12px;
  background: var(--secondary-color);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
}

.analytics-toggle.active {
  background: var(--primary-color);
}

/* Memory Analytics */
.memory-analytics {
  background: var(--background-secondary);
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 20px;
}

.analytics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 15px;
}

.analytics-card {
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.stat-value {
  font-size: 24px;
  font-weight: bold;
  color: var(--primary-color);
}

.type-stats {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.type-stat {
  display: flex;
  justify-content: space-between;
}

.tag-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

.tag {
  background: var(--tag-color);
  padding: 3px 8px;
  border-radius: 12px;
  font-size: 12px;
}

/* Memory Grid */
.memory-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 15px;
  margin-top: 15px;
}

.memory-item {
  background: white;
  border-radius: 8px;
  padding: 15px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  border-left: 4px solid var(--border-color);
}

.memory-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.memory-item.short-term {
  border-left-color: var(--short-term-color);
}

.memory-item.long-term {
  border-left-color: var(--long-term-color);
}

.memory-item.episodic {
  border-left-color: var(--episodic-color);
}

.memory-item.procedural {
  border-left-color: var(--procedural-color);
}

.memory-item.reflection {
  border-left-color: var(--reflection-color);
}

.memory-item.retrieved {
  border: 2px solid var(--highlight-color);
}

.memory-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  font-size: 12px;
  color: var(--text-secondary);
}

.memory-type-badge {
  padding: 3px 8px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: bold;
  text-transform: uppercase;
}

.short-term .memory-type-badge {
  background: var(--short-term-color);
  color: white;
}

.long-term .memory-type-badge {
  background: var(--long-term-color);
  color: white;
}

.episodic .memory-type-badge {
  background: var(--episodic-color);
  color: white;
}

.procedural .memory-type-badge {
  background: var(--procedural-color);
  color: white;
}

.reflection .memory-type-badge {
  background: var(--reflection-color);
  color: white;
}

.importance-indicator {
  color: gold;
}

.memory-content-wrapper {
  margin-bottom: 10px;
}

.memory-question {
  font-weight: bold;
  margin-bottom: 8px;
  color: var(--primary-color);
}

.memory-content {
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 14px;
  line-height: 1.4;
  margin: 0;
}

.memory-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  margin-top: 10px;
}

.memory-tag {
  background: var(--tag-color);
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 11px;
}

.emotional-weight {
  margin-top: 8px;
  font-size: 12px;
  color: var(--text-secondary);
}

.memory-actions {
  display: flex;
  justify-content: flex-end;
  gap: 5px;
}

.memory-action-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
  border-radius: 4px;
  color: var(--text-secondary);
}

.memory-action-btn:hover {
  background: var(--background-secondary);
  color: var(--primary-color);
}

/* Memory Detail Modal */
.memory-detail-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background: white;
  border-radius: 12px;
  padding: 20px;
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--border-color);
}

.close-modal {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: var(--text-secondary);
}

.memory-detail {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.detail-section {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.detail-section label {
  font-weight: bold;
  color: var(--text-secondary);
  font-size: 14px;
}

.detail-content {
  white-space: pre-wrap;
  word-break: break-word;
  background: var(--background-secondary);
  padding: 10px;
  border-radius: 6px;
  font-size: 14px;
  line-height: 1.4;
}

.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

.modal-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 20px;
}

.btn-primary {
  background: var(--primary-color);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
}

.btn-secondary {
  background: var(--secondary-color);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
}

/* Memory Manager Styles */
.memory-manager {
  padding: 20px;
  background: var(--background-primary);
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.memory-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 15px;
  margin-bottom: 20px;
}

.stat {
  background: white;
  padding: 15px;
  border-radius: 8px;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.stat-label {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 5px;
}

.stat-value {
  display: block;
  font-size: 20px;
  font-weight: bold;
  color: var(--primary-color);
}

.memory-controls {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-bottom: 20px;
}

.search-section {
  display: flex;
  gap: 10px;
}

.search-input {
  flex: 1;
  padding: 10px 15px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 14px;
}

.search-btn {
  padding: 10px 20px;
  background: var(--primary-color);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.management-buttons {
  display: flex;
  gap: 10px;
}

.consolidate-btn, .cleanup-btn {
  padding: 10px 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}

.consolidate-btn {
  background: var(--primary-color);
  color: white;
}

.cleanup-btn {
  background: var(--secondary-color);
  color: white;
}

.consolidate-btn:disabled, .cleanup-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.retrieval-results {
  margin-top: 20px;
}

.results-list {
.memory-list { display:flex; flex-direction:column; gap:12px; }
.memory-item { padding:12px; border-radius:10px; background: var(--bg-card); border-left: 4px solid var(--secondary-color); }
.memory-time { font-size:.8rem; color:var(--text-muted); margin-bottom:6px; }

/* internal reflections and long-term memory */
.long-term-memory-section { margin-top:18px; border-top:1px dashed var(--border-soft); padding-top:12px; }

/* memory content pre block */
.memory-content { white-space: pre-wrap; font-family: var(--font-mono); background: var(--bg-muted); padding:10px; border-radius:8px; }

/* memory actions */
.memory-actions { display:flex; gap:10px; margin-top:12px; }
.memory-action-button { padding:10px 12px; border-radius:8px; border:none; cursor:pointer; background: rgba(255,255,255,0.04); color:var(--text-primary); }
.memory-action-button.danger { background: rgba(231,76,60,0.12); color: var(--status-error); }
}
/* =================================================================== */
/* MATH PANEL                                                              */
/* =================================================================== */

.math-solution { display:flex; flex-direction:column; gap:12px; }
.math-problem, .math-answer, .math-formula { padding:12px; border-radius:8px; background: var(--bg-card); border:1px solid var(--border-soft); }
.math-steps-list { padding-left:16px; margin:0; }
.math-step { margin-bottom:8px; font-size:.95rem; }
/* Math Panel Enhancements */
.math-panel {
  padding: 20px;
  max-height: calc(100vh - 150px);
  overflow-y: auto;
}

.graph-controls-section {
  margin: 20px 0;
  padding: 15px;
  background-color: var(--card-bg);
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.plot-controls {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.plot-controls input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 5px;
  background-color: var(--input-bg);
  color: var(--text-color);
}

.graph-settings {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.setting-row {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.setting-row label {
  font-size: 0.9rem;
  display: flex;
  flex-direction: column;
}

.setting-row input {
  padding: 5px;
  border: 1px solid var(--border-color);
  border-radius: 3px;
  background-color: var(--input-bg);
  color: var(--text-color);
}

.calculator-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 5px;
  margin-top: 10px;
}

.calculator-grid button {
  padding: 8px;
  border: 1px solid var(--border-color);
  border-radius: 5px;
  background-color: var(--button-bg);
  color: var(--text-color);
  cursor: pointer;
  transition: background-color 0.2s;
}

.calculator-grid button:hover {
  background-color: var(--button-hover-bg);
}

.capabilities-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 15px;
}

.capability {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 15px;
  background-color: var(--card-bg);
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.capability-icon {
  font-size: 24px;
  margin-bottom: 8px;
}

.capability-name {
  font-weight: bold;
  margin-bottom: 5px;
}

.capability-desc {
  font-size: 0.8rem;
  text-align: center;
  color: var(--text-secondary);
}

.solution-tabs {
  display: flex;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 15px;
}

.solution-tabs button {
  padding: 8px 15px;
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--text-color);
  cursor: pointer;
}

.solution-tabs button.active {
  border-bottom-color: var(--primary-color);
  color: var(--primary-color);
}

.solution-tabs button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* =================================================================== */
/* QUANTUM PANEL                                                          */
/* =================================================================== */

.quantum-description { margin-bottom:12px; color:var(--text-muted); }
.quantum-state { background: rgba(0,0,0,0.2); padding:12px; border-radius:8px; font-family:var(--font-mono); white-space:pre-wrap; color:var(--text-primary); }

/* quantum actions */
.quantum-actions { display:flex; gap:8px; flex-wrap:wrap; }
.quantum-action-button { padding:8px 12px; border-radius:8px; background: rgba(255,255,255,0.04); color:var(--text-primary); border:none; cursor:pointer; }

/* =================================================================== */
/* NEURAL PANEL                                                            */
/* =================================================================== */

.neural-description { color:var(--text-muted); margin-bottom:12px; }
.neural-output-values { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:10px; }
.neural-output-value { padding:10px; border-radius:8px; background: var(--bg-card); font-family: var(--font-mono); color:var(--text-primary); }

/* neural actions */
.neural-actions { display:flex; gap:8px; flex-wrap:wrap; margin-top:12px; }
.neural-action-button { padding:8px 12px; border-radius:8px; border:none; background: rgba(255,255,255,0.04); color:var(--text-primary); cursor:pointer; }

/* neural canvas */
.neural-visualization canvas { max-width:100%; height:auto; display:block; }

/* =================================================================== */
/* CREATIVE PANEL                                                          */
/* =================================================================== */

.creative-header { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.creative-description p { color:var(--text-muted); margin-bottom:6px; }
.creative-action-button { padding:10px 16px; border-radius:8px; border:none; background:var(--accent-color); color:var(--light-color); cursor:pointer; font-weight:700; }
.creative-action-button:hover { transform: translateY(-2px); }

/* creative output area */
.creative-output-display { margin-top:12px; padding:12px; border-radius:8px; background: var(--bg-card); }
.creative-output { white-space: pre-wrap; font-family: var(--font-mono); color:var(--text-primary); }

/* image generation block */
.image-generation-container { margin-top:14px; }
.image-placeholder { min-height:180px; border-radius:8px; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.06); padding:12px; }
.image-placeholder img { max-width:100%; max-height:400px; border-radius:6px; }

/* =================================================================== */
/* KNOWLEDGE PANEL                                                         */
/* =================================================================== */

.knowledge-header { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.add-knowledge-btn { padding:8px 12px; border-radius:6px; background: var(--color-primary); color:white; border:none; cursor:pointer; }
.add-knowledge-form { display:flex; flex-direction:column; gap:8px; }
.knowledge-controls { display:flex; gap:12px; align-items:center; }
.knowledge-search { padding:8px 12px; border-radius:6px; background: var(--bg-card); border:1px solid var(--border-soft); color:var(--text-primary); width:100%; }
.knowledge-sort { padding:8px 12px; border-radius:6px; }

.knowledge-item { padding:12px; border-radius:8px; background: var(--bg-card); border:1px solid var(--border-soft); }
.knowledge-meta { display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:10px; border-top:1px solid var(--border-soft); padding-top:8px; }

/* edit/view layouts */
.knowledge-display-view, .knowledge-edit-view { display:flex; flex-direction:column; gap:8px; }
.knowledge-edit-view textarea { min-height:80px; padding:8px; border-radius:6px; border:1px solid var(--border-soft); background:var(--bg-card); color:var(--text-primary); }

/* action buttons */
.action-button { padding:6px 10px; border-radius:6px; cursor:pointer; border:1px solid var(--border-soft); background:transparent; color:var(--text-primary); }
.action-button.save { border-color:var(--status-success); color:var(--status-success); }
.action-button.delete { border-color:var(--status-error); color:var(--status-error); }

/* modal confirm */
.modal-backdrop { position:fixed; inset:0; background: var(--bg-modal-overlay); display:flex; justify-content:center; align-items:center; z-index:1001; }
.modal-content { background: var(--bg-surface); padding:24px; border-radius:12px; border:1px solid var(--border-strong); box-shadow:var(--shadow-lg); }
.modal-actions { display:flex; gap:12px; justify-content:center; margin-top:18px; }
.modal-button { padding:8px 14px; border-radius:8px; cursor:pointer; border:none; }
.modal-button.cancel { background: var(--secondary-color); color: #fff; }
.modal-button.confirm { background: var(--error-color); color: #fff; }

/* =================================================================== */
/* GOALS PANEL                                                            */
/* =================================================================== */

.goals-panel .goals-header { display:flex; align-items:center; justify-content:space-between; }
.goal-list { display:flex; flex-direction:column; gap:10px; }
.goal-item { padding:12px; border-radius:8px; background: var(--bg-card); border-left: 4px solid var(--secondary-color); }
.goal-item.completed { border-left-color: var(--status-success); opacity:0.9; }
/* Add this to your App.css file */

.goals-panel {
  padding: 20px;
  background: var(--bg-card);
  border-radius: 12px;
  margin-bottom: 20px;
}

.goals-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--border-soft);
}

.back-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--bg-muted);
  border: 1px solid var(--border-soft);
  border-radius: 6px;
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.back-button:hover {
  background: var(--bg-hover);
}

.goals-description {
  margin-bottom: 20px;
  color: var(--text-muted);
}

.add-goal-section {
  margin-bottom: 20px;
  padding: 16px;
  background: var(--bg-muted);
  border-radius: 8px;
}

.goal-input-container {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.goal-input-container input {
  flex: 1;
  padding: 10px 16px;
  border-radius: 8px;
  border: 1px solid var(--border-soft);
  background: var(--bg-surface);
  color: var(--text-primary);
}

.goal-input-container button {
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  background: var(--color-primary);
  color: white;
  cursor: pointer;
}

.goal-input-container button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.goals-stats {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
  padding: 16px;
  background: var(--bg-muted);
  border-radius: 8px;
}

.stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.stat-number {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-primary);
}

.stat-label {
  font-size: 0.9rem;
  color: var(--text-muted);
}

.goals-list {
  margin-bottom: 20px;
}

.goals-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.goal-item {
  padding: 16px;
  border-radius: 8px;
  border: 1px solid var(--border-soft);
  background: var(--bg-surface);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
}

.goal-item.active {
  border-left: 4px solid var(--color-primary);
}

.goal-item.in-progress {
  border-left: 4px solid var(--status-warning);
}

.goal-item.completed {
  border-left: 4px solid var(--status-success);
  opacity: 0.8;
}

.goal-item.archived {
  border-left: 4px solid var(--text-muted);
  opacity: 0.6;
}

.goal-content {
  flex: 1;
}

.goal-description {
  margin-bottom: 8px;
  font-weight: 500;
}

.goal-meta {
  display: flex;
  gap: 12px;
  align-items: center;
}

.status-badge {
  padding: 4px 8px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.status-badge.active {
  background: rgba(142, 68, 173, 0.2);
  color: var(--color-primary);
}

.status-badge.in-progress {
  background: rgba(243, 156, 18, 0.2);
  color: var(--status-warning);
}

.status-badge.completed {
  background: rgba(39, 174, 96, 0.2);
  color: var(--status-success);
}

.status-badge.archived {
  background: rgba(160, 160, 160, 0.2);
  color: var(--text-muted);
}

.goal-time {
  font-size: 0.8rem;
  color: var(--text-muted);
}

.goal-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.goal-actions select {
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid var(--border-soft);
  background: var(--bg-surface);
  color: var(--text-primary);
}

.goal-actions button {
  padding: 6px;
  border-radius: 6px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 1rem;
}

.goal-edit {
  width: 100%;
}

.goal-edit input {
  width: 100%;
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid var(--border-soft);
  background: var(--bg-surface);
  color: var(--text-primary);
  margin-bottom: 8px;
}

.edit-actions {
  display: flex;
  gap: 8px;
}

.edit-actions button {
  padding: 6px 12px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
}

.edit-actions button:first-child {
  background: var(--status-success);
  color: white;
}

.edit-actions button:last-child {
  background: var(--bg-muted);
  color: var(--text-primary);
}

.empty-state {
  padding: 40px 20px;
  text-align: center;
  color: var(--text-muted);
}

.goals-insights {
  padding: 16px;
  background: var(--bg-muted);
  border-radius: 8px;
}

.insights-content p {
  margin-bottom: 8px;
  color: var(--text-primary);
}
/* =================================================================== */
/* SYSTEM PANEL                                                           */
/* =================================================================== */

.system-panel { display:flex; flex-direction:column; gap:12px; }
.system-status .status-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:10px; }
.status-item { padding:10px; background: var(--bg-card); border-radius:8px; border:1px solid var(--border-soft); }
.action-buttons { display:flex; gap:8px; flex-wrap:wrap; }

/* =================================================================== */
/* 8. SETTINGS MODAL (VOICE, BEHAVIOR, APPEARANCE, etc.)                 */
/* =================================================================== */

.settings-content { display:flex; flex-direction:column; max-height:90vh; }
.settings-grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); padding:12px; overflow:auto; }
.settings-group { background: var(--bg-card); padding:12px; border-radius:10px; border:1px solid var(--border-soft); }

.setting-item label { display:block; margin-bottom:6px; color:var(--text-muted); font-weight:600; }
.setting-item input[type="text"], .setting-item select { width:100%; padding:8px 10px; border-radius:8px; border:1px solid var(--border-soft); background:var(--bg-surface); color:var(--text-primary); }

/* toggle switch */
.switch { position:relative; width:52px; height:28px; display:inline-block; }
.switch input { display:none; }
.slider { position:absolute; inset:0; border-radius:28px; background:var(--bg-muted); cursor:pointer; transition: all .12s ease; }
.slider:before { content:""; position:absolute; left:4px; bottom:4px; width:20px; height:20px; background:#fff; border-radius:50%; transition: all .12s ease; }
.switch input:checked + .slider { background: var(--color-primary); }
.switch input:checked + .slider:before { transform: translateX(24px); }

/* settings-footer buttons */
.settings-footer { padding:12px 16px; border-top:1px solid var(--border-strong); display:flex; justify-content:space-between; align-items:center; gap:12px; }

/* =================================================================== */
/* 9. NOTIFICATIONS & TOASTS                                              */
/* =================================================================== */

.notification { position:fixed; left:50%; transform: translateX(-50%); bottom:20px; z-index:1002; padding:12px 20px; border-radius:10px; color: #fff; font-weight:700; box-shadow: var(--shadow-lg); animation: slideUp .28s ease; }
.notification.info { background: var(--status-info); }
.notification.success { background: var(--status-success); }
.notification.warning { background: var(--status-warning); color: var(--dark-color); }
.notification.error { background: var(--status-error); }

/* =================================================================== */
/* 10. ANIMATIONS                                                         */
/* =================================================================== */

@keyframes fadeIn { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }
@keyframes slideUp { from { transform: translate(-50%, 20px); opacity:0; } to { transform: translate(-50%, 0); opacity:1; } }
@keyframes spin { from { transform: rotate(0); } to { transform: rotate(360deg); } }
@keyframes pulse { 0% { transform: scale(1); opacity:1; } 50% { transform: scale(1.12); opacity:.85; } 100% { transform: scale(1); opacity:1; } }
@keyframes bounce { 0%,80%,100% { transform: scale(0); } 40% { transform: scale(1.0); } }
@keyframes wave { 0%,100% { height:8px; } 50% { height:16px; } }

/* =================================================================== */
/* 11. UTILITIES & HELPERS                                                */
/* =================================================================== */

/* spacing helpers */
.u-mt-4 { margin-top: 4px !important; }   .u-mt-8 { margin-top: 8px !important; }   .u-mt-12 { margin-top: 12px !important; }
.u-mb-4 { margin-bottom: 4px !important; } .u-mb-8 { margin-bottom: 8px !important; } .u-mb-12 { margin-bottom: 12px !important; }
.u-p-6 { padding: 6px !important; }       .u-p-8 { padding: 8px !important; }       .u-p-12 { padding: 12px !important; }

/* flex helpers */
.u-row { display:flex; flex-direction:row; gap:8px; align-items:center; }
.u-col { display:flex; flex-direction:column; gap:8px; }

/* text helpers */
.text-muted { color: var(--text-muted) !important; }
.text-primary { color: var(--text-primary) !important; }
.text-center { text-align:center !important; }

/* display helpers */
.hidden { display:none !important; }
.block { display:block !important; }
.inline { display:inline !important; }

/* width helpers */
.w-100 { width:100% !important; }
.max-w-480 { max-width:480px; }

/* misc */
.rounded { border-radius: var(--rounded) !important; }
.shadow-sm { box-shadow: var(--shadow-sm) !important; }
.shadow-md { box-shadow: var(--shadow-md) !important; }

/* =================================================================== */
/* 12. RESPONSIVE                                                         */
/* =================================================================== */

@media (max-width: 1024px) {
  .agent-dashboard { grid-template-columns: 1fr; }
  .soul-values { grid-column: span 1; }
  .app-container { padding-left: 12px; padding-right: 12px; }
}

@media (max-width: 768px) {
  .app-header h1 { font-size: 1.6rem; }
  .message-content, .aion-message { max-width: 86%; }
  .welcome-logo { width: 68px; height: 68px; font-size:1.6rem; }
  .agent-left-column, .agent-right-column { max-height: none; }
  .settings-grid { grid-template-columns: 1fr; }
}

@media (max-width: 480px) {
  .app-header { flex-direction: column; align-items:flex-start; gap:8px; }
  .header-left, .header-right { width:100%; justify-content:space-between; }
  .chat-input { padding-right: 80px; }
  .input-actions { right:8px; bottom:12px; }
  .tab-container { justify-content:center; }
  .avatar, .aion-avatar, .user-avatar { width:36px; height:36px; }
  .soul-grid { grid-template-columns: 1fr; }
  .welcome-logo { width:60px; height:60px; font-size:1.4rem; }
}

/* =================================================================== */
/* 13. PRINT STYLES (useful for exporting conversation)                 */
/* =================================================================== */

@media print {
  body { background: #fff; color:#000; }
  /* hide only decorative/ephemeral UI in print output */
  .background-animation, .icon-button, .settings-modal, .notification { display:none !important; }
  .conversation-history { color:#000; }
  .message-content, .aion-message { background: #f7f7f7 !important; border: none !important; box-shadow:none !important; color:#000 !important; }
}

/* =================================================================== */
/* 14. BACKWARDS COMPATIBILITY & LEGACY VARS (aliases)                   */
/* =================================================================== */

/* keep some legacy variables used earlier in project */
:root {
  --primary: var(--color-primary);
  --secondary: var(--color-secondary);
  --accent: var(--color-accent);
  --bg: var(--bg-page);
  --surface: var(--bg-surface);
  --card: var(--bg-card);
  --muted: var(--bg-muted);
}

/* =================================================================== */
/* 7. INPUT AREA                                                       */
/* =================================================================== */
.input-section {
  padding-top: 20px;
  border-top: 1px solid var(--border-primary);
}

.input-container {
  position: relative;
  margin-bottom: 15px;
}

.chat-input {
  width: 100%;
  min-height: 60px;
  max-height: 200px;
  padding: 18px 60px 18px 25px;
  border-radius: 30px;
  border: 1px solid var(--border-primary);
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 1rem;
  resize: none;
  transition: var(--transition-fast);
}
.chat-input:focus {
  outline: none;
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(142, 68, 173, 0.3);
}
.chat-input::placeholder {
  color: var(--text-placeholder);
}

.input-actions {
  position: absolute;
  right: 10px;
  bottom: 10px;
  display: flex;
  gap: 5px;
}

.mic-button { background-color: transparent; }
.mic-button:hover { background-color: var(--bg-interactive-hover); }
.mic-button.active { background-color: var(--status-error); color: white; }
.icon-mic.pulse::before {
  content: ''; position: absolute;
  top: -5px; left: -5px; right: -5px; bottom: -5px;
  border-radius: 50%;
  background-color: var(--status-error);
  animation: pulse 1.5s infinite;
}

.send-button {
  background-color: var(--color-primary);
  color: white;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: var(--transition-fast);
}
.send-button:hover {
  transform: scale(1.1);
  box-shadow: 0 0 10px var(--color-primary);
}
.send-button:disabled {
  background-color: var(--bg-tertiary);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}
.icon-spinner { animation: spin 1s linear infinite; }

/* Quick Feelings */
.quick-feelings { margin-bottom: 10px; }
.feelings-title { font-size: 0.9rem; margin-bottom: 10px; opacity: 0.8; }
.feeling-buttons { display: flex; gap: 10px; flex-wrap: wrap; }
.feeling-button {
  padding: 8px 15px;
  border-radius: 20px;
  border: 1px solid var(--border-primary);
  background-color: transparent;
  color: var(--text-secondary);
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  transition: var(--transition-fast);
}
.feeling-button:hover {
  background-color: var(--bg-interactive);
  border-color: var(--border-secondary);
  color: var(--text-primary);
  transform: translateY(-2px);
}
.icon-love::before { content: ''; }
.icon-joy::before { content: ''; }
.icon-sadness::before { content: ''; }
.icon-curiosity::before { content: ''; }
.icon-peace::before { content: ''; }
.icon-soul::before { content: ''; }
.icon-settings::before { content: ''; }
.icon-arrow-left::before { content: ''; }
.icon-send::before { content: ''; }
/* Fallback for icon fonts */
.icon-mic::before { content: ''; }
.icon-spinner::before { content: ''; }

/* =================================================================== */
/* 8. PANELS (Soul, Memories, Search, etc.)                            */
/* =================================================================== */
.soul-panel, .memories-panel, .search-panel, .math-panel,
.quantum-panel, .neural-panel, .creative-panel, .goals-panel, .knowledge-panel {
  flex: 1;
  overflow-y: auto;
  padding-right: 10px;
  margin-bottom: 20px;
  min-height: 0;
}

/* Common Panel Card Style */
.panel-card, .agent-card {
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 12px;
  padding: 20px;
  box-shadow: var(--shadow-sm);
  margin-bottom: 20px;
}
.agent-card:last-child {
  margin-bottom: 0;
}

.panel-header, .math-header, .quantum-header, .neural-header, .creative-header, .goals-header, .knowledge-header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 20px;
}

.back-button {
  background: none; border: none;
  color: var(--text-secondary);
  font-size: 0.9rem;
  cursor: pointer;
  display: flex; align-items: center; gap: 5px;
}
.back-button:hover { text-decoration: underline; }

/* --- Soul Panel --- */
.soul-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
}
.soul-stat {
  background-color: var(--bg-tertiary);
  border-radius: 10px;
  padding: 15px;
}
.soul-stat h4 { margin-bottom: 10px; font-size: 0.9rem; opacity: 0.8; }
.stat-value { font-size: 1.5rem; font-weight: 700; margin-bottom: 10px; color: var(--color-primary); }
.stat-bar { height: 8px; background-color: var(--bg-interactive); border-radius: 4px; overflow: hidden; }
.stat-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
  border-radius: 4px;
  transition: width 0.5s ease;
}

/* --- Memories Panel --- */
.memories-panel h3, .goals-panel h3, .knowledge-panel h3 { margin-bottom: 15px; color: var(--color-primary); }
.memory-list, .goal-list, .knowledge-list { display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
.memory-item, .goal-item, .knowledge-item {
  background-color: var(--bg-secondary);
  border-radius: 10px;
  padding: 15px;
  border-left: 4px solid var(--color-secondary);
}
.memory-time, .goal-time, .knowledge-time { font-size: 0.7rem; opacity: 0.7; margin-bottom: 5px; }

/* Search Panel Styles */
.search-panel {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
  color: #333;
}

.search-header {
  margin-bottom: 20px;
}

.search-input-container {
  position: relative;
  margin-bottom: 15px;
}

.search-input-wrapper {
  display: flex;
  align-items: center;
  border: 2px solid #ddd;
  border-radius: 24px;
  overflow: hidden;
  transition: border-color 0.3s;
}

.search-input-wrapper:focus-within {
  border-color: #4a90e2;
  box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
}

.search-input {
  flex: 1;
  padding: 14px 20px;
  border: none;
  outline: none;
  font-size: 16px;
}

.search-controls {
  display: flex;
  align-items: center;
  padding-right: 10px;
}

.voice-search-btn, .search-btn {
  background: none;
  border: none;
  padding: 10px;
  cursor: pointer;
  font-size: 18px;
  border-radius: 50%;
  transition: background-color 0.2s;
}

.voice-search-btn:hover, .search-btn:hover {
  background-color: #f0f0f0;
}

.suggestions-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #ddd;
  border-radius: 0 0 8px 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  max-height: 300px;
  overflow-y: auto;
}

.suggestion-item {
  padding: 12px 20px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.suggestion-item:hover {
  background-color: #f5f5f5;
}

/* Advanced Filters */
.advanced-filters {
  position: relative;
  display: inline-block;
}

.filter-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #f8f9fa;
  border: 1px solid #dadce0;
  border-radius: 18px;
  padding: 8px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.filter-toggle:hover {
  background: #e8f0fe;
}

.filter-count {
  background: #4a90e2;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.filter-panel {
  position: absolute;
  top: 100%;
  left: 0;
  background: white;
  border: 1px solid #dadce0;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 1001;
  width: 320px;
  margin-top: 8px;
}

.filter-group {
  margin-bottom: 16px;
}

.filter-group label {
  display: block;
  margin-bottom: 6px;
  font-weight: 500;
  font-size: 14px;
}

.filter-group input, .filter-group select {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #dadce0;
  border-radius: 4px;
  font-size: 14px;
}

.date-inputs {
  display: flex;
  align-items: center;
  gap: 8px;
}

.date-inputs input {
  flex: 1;
}

.date-inputs span {
  font-size: 14px;
  color: #5f6368;
}

.filter-actions {
  display: flex;
  justify-content: space-between;
  margin-top: 16px;
}

.clear-filters, .apply-filters {
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 14px;
  cursor: pointer;
}

.clear-filters {
  background: #f8f9fa;
  border: 1px solid #dadce0;
  color: #3c4043;
}

.apply-filters {
  background: #1a73e8;
  border: 1px solid #1a73e8;
  color: white;
}

/* Search Stats */
.search-stats {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
  font-size: 14px;
  color: #5f6368;
}

.view-controls {
  display: flex;
  gap: 8px;
}

.view-controls button {
  padding: 6px 12px;
  border: 1px solid #dadce0;
  background: white;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.view-controls button.active {
  background: #e8f0fe;
  border-color: #1a73e8;
  color: #1a73e8;
}

.search-actions {
  display: flex;
  gap: 8px;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: #f8f9fa;
  border: 1px solid #dadce0;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

/* Loading Indicator */
.loading-indicator {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 0;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #1a73e8;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 16px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Search Results */
.search-results {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.search-result {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  overflow: hidden;
  transition: box-shadow 0.2s;
}

.search-result:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.search-result.expanded {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.result-main {
  padding: 16px;
  cursor: pointer;
}

.result-header {
  display: flex;
  align-items: flex-start;
  margin-bottom: 8px;
}

.result-favicon {
  width: 16px;
  height: 16px;
  margin-right: 12px;
  margin-top: 4px;
}

.result-header h4 {
  flex: 1;
  margin: 0;
  font-size: 18px;
  font-weight: 400;
  color: #1a0dab;
}

.result-header h4 a {
  color: inherit;
  text-decoration: none;
}

.result-header h4 a:hover {
  text-decoration: underline;
}

.expand-toggle {
  background: none;
  border: none;
  font-size: 14px;
  cursor: pointer;
  padding: 4px;
  color: #5f6368;
}

.result-snippet {
  margin: 0;
  color: #4d5156;
  line-height: 1.5;
  font-size: 14px;
}

.result-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0 16px 16px;
  font-size: 12px;
  color: #5f6368;
}

.result-source {
  color: #006621;
}

.result-details {
  padding: 16px;
  border-top: 1px solid #e0e0e0;
  background: #f8f9fa;
}

.detail-section {
  margin-bottom: 16px;
}

.detail-section h5 {
  margin: 0 0 8px 0;
  font-size: 14px;
  color: #202124;
}

.detail-section ul {
  margin: 0;
  padding-left: 20px;
}

.detail-section li {
  margin-bottom: 4px;
  font-size: 14px;
  color: #4d5156;
}

.concept-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.concept-tag {
  background: #e8f0fe;
  color: #1a73e8;
  padding: 4px 8px;
  border-radius: 16px;
  font-size: 12px;
}

.citation {
  display: block;
  padding: 8px 12px;
  background: white;
  border: 1px solid #dadce0;
  border-radius: 4px;
  font-size: 12px;
  font-family: monospace;
  white-space: pre-wrap;
}

/* Reliability Indicator */
.reliability-indicator {
  display: flex;
  gap: 2px;
}

.reliability-indicator span {
  color: #dadce0;
  font-size: 12px;
}

.reliability-indicator span.active {
  color: #f4b400;
}

/* Sentiment Analysis */
.sentiment-analysis {
  margin-bottom: 24px;
  padding: 16px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
}

.sentiment-analysis h4 {
  margin: 0 0 12px 0;
  font-size: 16px;
  font-weight: 500;
}

.sentiment-chart {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.sentiment-bar {
  height: 24px;
  display: flex;
  border-radius: 12px;
  overflow: hidden;
}

.sentiment-positive {
  background: #0f9d58;
}

.sentiment-neutral {
  background: #f4b400;
}

.sentiment-negative {
  background: #db4437;
}

.sentiment-legend {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
}

.sentiment-legend .positive {
  color: #0f9d58;
}

.sentiment-legend .neutral {
  color: #f4b400;
}

.sentiment-legend .negative {
  color: #db4437;
}

/* Knowledge Graph */
.knowledge-graph-section {
  margin-bottom: 24px;
  padding: 16px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
}

.knowledge-graph-section h3 {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 500;
}

.knowledge-graph-svg-wrapper {
  width: 100%;
  overflow: auto;
}

/* Image Gallery */
.image-gallery-container {
  margin-bottom: 24px;
}

.image-gallery-container h4 {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 500;
}

.image-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.image-item {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s;
}

.image-item:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.image-item img {
  width: 100%;
  height: 150px;
  object-fit: cover;
}

.image-caption {
  margin: 0;
  padding: 8px;
  font-size: 14px;
  text-align: center;
  background: #f8f9fa;
}

.lightbox {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.lightbox-content {
  max-width: 90%;
  max-height: 90%;
  position: relative;
}

.lightbox-content img {
  max-width: 100%;
  max-height: 80vh;
  border-radius: 8px 8px 0 0;
}

.lightbox-caption {
  background: white;
  padding: 16px;
  border-radius: 0 0 8px 8px;
}

.lightbox-caption h4 {
  margin: 0 0 8px 0;
}

.lightbox-caption a {
  color: #1a73e8;
  text-decoration: none;
}

.lightbox-caption a:hover {
  text-decoration: underline;
}

/* Search Timeline */
.search-timeline {
  margin-bottom: 24px;
  padding: 16px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
}

.search-timeline h4 {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 500;
}

.timeline {
  position: relative;
  padding-left: 32px;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 15px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: #e0e0e0;
}

.timeline-step {
  position: relative;
  margin-bottom: 16px;
}

.timeline-step:last-child {
  margin-bottom: 0;
}

.timeline-marker {
  position: absolute;
  left: -32px;
  top: 4px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #1a73e8;
  border: 3px solid white;
  box-shadow: 0 0 0 2px #1a73e8;
}

.timeline-step.completed .timeline-marker {
  background: #0f9d58;
  box-shadow: 0 0 0 2px #0f9d58;
}

.timeline-step.pending .timeline-marker {
  background: #f4b400;
  box-shadow: 0 0 0 2px #f4b400;
}

.timeline-step.current .timeline-marker {
  background: white;
  box-shadow: 0 0 0 2px #1a73e8;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(26, 115, 232, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(26, 115, 232, 0); }
  100% { box-shadow: 0 0 0 0 rgba(26, 115, 232, 0); }
}

.timeline-content {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  background: #f8f9fa;
  border-radius: 6px;
}

.step-number {
  background: #1a73e8;
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: bold;
}

.timeline-step.completed .step-number {
  background: #0f9d58;
}

.timeline-step.pending .step-number {
  background: #f4b400;
}

.step-details {
  flex: 1;
}

.step-details strong {
  display: block;
  font-size: 14px;
  margin-bottom: 2px;
}

.step-details p {
  margin: 0;
  font-size: 12px;
  color: #5f6368;
}

.step-status {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 12px;
  background: #e8f0fe;
  color: #1a73e8;
}

.timeline-step.completed .step-status {
  background: #e6f4ea;
  color: #0f9d58;
}

.timeline-step.pending .step-status {
  background: #fef7e0;
  color: #f4b400;
}

/* Cluster View */
.cluster-view {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.cluster {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  overflow: hidden;
}

.cluster h4 {
  margin: 0;
  padding: 12px 16px;
  background: #f8f9fa;
  font-size: 16px;
  font-weight: 500;
  border-bottom: 1px solid #e0e0e0;
}

.cluster-results {
  padding: 16px;
}

/* No Results */
.no-results {
  text-align: center;
  padding: 40px 20px;
}

.no-results h3 {
  margin: 0 0 16px 0;
  font-size: 20px;
  color: #5f6368;
}

.no-results p {
  margin: 0 0 16px 0;
  color: #5f6368;
}

.no-results ul {
  text-align: left;
  max-width: 300px;
  margin: 0 auto;
  color: #5f6368;
}

/* Search History */
.search-history {
  margin-top: 32px;
  padding-top: 16px;
  border-top: 1px solid #e0e0e0;
}

.history-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.history-header h4 {
  margin: 0;
  font-size: 16px;
  font-weight: 500;
}

.clear-history-btn {
  background: none;
  border: none;
  color: #1a73e8;
  cursor: pointer;
  font-size: 14px;
}

.search-history ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.search-history li button {
  background: #f1f3f4;
  border: none;
  border-radius: 16px;
  padding: 6px 12px;
  font-size: 14px;
  cursor: pointer;
  color: #3c4043;
  transition: background-color 0.2s;
}

.search-history li button:hover {
  background: #e8f0fe;
}

/* Search Error */
.search-error {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: #fce8e6;
  border: 1px solid #f28b82;
  border-radius: 8px;
  margin-bottom: 16px;
  color: #c5221f;
}

.search-error button {
  background: none;
  border: none;
  color: #c5221f;
  cursor: pointer;
  text-decoration: underline;
}

/* Responsive Design */
@media (max-width: 768px) {
  .search-panel {
    padding: 16px;
  }
  
  .search-stats {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  
  .search-actions {
    align-self: stretch;
    justify-content: space-between;
  }
  
  .filter-panel {
    width: 280px;
    right: 0;
    left: auto;
  }
  
  .image-grid {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }
  
  .timeline-content {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
  
  .step-status {
    align-self: flex-start;
  }
}
.search-panel-header {
  display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;
  padding-bottom: 15px; border-bottom: 1px solid var(--border-primary);
}
.agent-status-container {
  display: flex; align-items: center; gap: 8px;
  background-color: var(--bg-tertiary);
  padding: 5px 12px; border-radius: 20px;
}
.status-indicator { width: 12px; height: 12px; border-radius: 50%; }
.status-indicator.searching, .status-indicator.in_progress, .status-indicator.planning, .status-indicator.synthesizing { background-color: var(--status-warning); animation: pulse 1.5s infinite; }
.status-indicator.idle { background-color: var(--status-success); }
.status-indicator.error { background-color: var(--status-error); }
.agent-status { font-weight: 600; text-transform: capitalize; }

.search-input-container { display: flex; gap: 10px; }
.search-input-container input {
  flex: 1; padding: 10px 15px; border-radius: 8px;
  border: 1px solid var(--border-primary);
  background-color: var(--bg-tertiary);
  color: var(--text-primary); font-size: 1rem;
}
.search-input-container button {
  padding: 10px 20px; border-radius: 8px; border: none;
  background-color: var(--color-primary); color: white;
  font-weight: 600; cursor: pointer;
}
.search-input-container button:disabled { opacity: 0.5; cursor: not-allowed; }

.agent-dashboard {
  display: grid; grid-template-columns: 1fr 2fr; gap: 20px;
  flex: 1; overflow: hidden;
}
.agent-left-column, .agent-right-column {
  display: flex; flex-direction: column; gap: 0; /* No gap here, handled by card margins */
  overflow-y: auto; padding-right: 10px;
}
.card-header {
    display: flex; justify-content: space-between; align-items: center; cursor: pointer;
    margin-bottom: 15px;
}
.toggle-vis-button {
    background: none; border: 1px solid var(--border-secondary); color: var(--text-secondary);
    padding: 3px 8px; font-size: 0.75rem; border-radius: 5px; cursor: pointer;
}

.progress-bar-container { width: 100%; height: 6px; background: var(--bg-interactive); border-radius: 3px; overflow: hidden; margin-bottom: 15px; }
.progress-bar { height: 100%; background-color: var(--color-primary); transition: width 0.5s ease; }

.agent-plan ol {
  list-style: none; padding: 0; display: flex; flex-direction: column; gap: 12px;
}
.plan-step {
  font-size: 0.9rem; opacity: 0.7; display: flex; align-items: center; gap: 10px;
}
.plan-step.in_progress { opacity: 1; font-weight: 600; color: var(--status-warning); }
.plan-step.completed { opacity: 0.7; text-decoration: line-through; }
.plan-step .step-icon {
  width: 16px; height: 16px; border: 2px solid var(--text-secondary);
  border-radius: 50%; position: relative; flex-shrink: 0;
}
.plan-step.in_progress .step-icon { border-color: var(--status-warning); }
.plan-step.completed .step-icon { border-color: var(--status-success); background-color: var(--status-success); }
.plan-step.completed .step-icon::after { content: ''; color: white; font-size: 10px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

.agent-thought-process pre { white-space: pre-wrap; word-wrap: break-word; font-family: monospace; font-size: 0.8rem; max-height: 250px; overflow-y: auto; background-color: var(--bg-interactive); padding: 10px; border-radius: 6px; }

/* Search Results */
.search-loading, .search-error, .no-results { text-align: center; padding: 40px; }
.loading-subtext { font-size: 0.9rem; color: var(--text-secondary); }
.error-message { color: var(--status-error); background: var(--bg-tertiary); padding: 10px; border-radius: 8px; margin-top: 10px; }

.summary-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.export-button {
  padding: 5px 12px; font-size: 0.8rem; background-color: var(--bg-interactive);
  border: 1px solid var(--border-primary); color: var(--text-primary);
  border-radius: 6px; cursor: pointer; transition: var(--transition-fast);
}
.export-button:hover { background-color: var(--bg-interactive-hover); }

.results-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px; }
.result-count { font-size: 0.9rem; color: var(--text-secondary); margin-left: 8px; }
.sort-controls { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; }
.sort-controls select {
  background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border-primary);
  border-radius: 6px; padding: 4px 8px;
}

.search-result {
  padding: 12px; border: 1px solid var(--border-primary); border-radius: 8px;
  transition: var(--transition-fast);
}
.search-result:hover { border-color: var(--border-secondary); background-color: var(--bg-interactive); }
.result-main { display: flex; align-items: flex-start; gap: 12px; }
.result-favicon { width: 24px; height: 24px; margin-top: 4px; border-radius: 4px; flex-shrink: 0; }
.result-content h4 a { font-size: 1rem; color: var(--text-primary); text-decoration: none; }
.result-content h4 a:hover { color: var(--color-secondary); text-decoration: underline; }
.result-snippet { font-size: 0.9rem; color: var(--text-secondary); }
.result-meta {
  display: flex; gap: 15px; font-size: 0.75rem;
  opacity: 0.7; margin-top: 8px; flex-wrap: wrap;
}
.result-source { padding: 2px 8px; background-color: var(--bg-interactive); border-radius: 10px; }
.suggested-queries ul { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 10px; }

/* Knowledge Graph */
.key-entities-container .graph-wrapper {
  height: 300px; width: 100%; border-radius: 8px;
  background-color: var(--bg-interactive);
  display: flex; align-items: center; justify-content: center;
}
.knowledge-graph-svg-wrapper { width: 300px; height: 300px; }
.graph-node { cursor: pointer; transition: var(--transition-fast); }
.graph-node:hover { transform: scale(1.1); }
.graph-node circle { fill: var(--color-secondary); transition: var(--transition-fast); }
.graph-node:hover circle { fill: var(--color-primary); }
.graph-node.center-node circle { fill: var(--status-success); }
.graph-node text { fill: var(--text-primary); font-size: 12px; pointer-events: none; }
.graph-node.center-node text { font-weight: bold; }

/* Add this to your App.css file */

.creative-panel {
  padding: 20px;
  background: var(--bg-card);
  border-radius: 12px;
  margin-bottom: 20px;
}

.creative-controls {
  margin-bottom: 20px;
}

.type-selector {
  margin-bottom: 15px;
}

.type-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 15px;
}

.type-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 15px;
  border: 1px solid var(--border-soft);
  background: var(--bg-muted);
  border-radius: 8px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.type-button.active {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

.type-icon {
  font-size: 1.2rem;
}

.custom-prompt {
  margin-bottom: 15px;
}

.custom-prompt textarea {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid var(--border-soft);
  background: var(--bg-surface);
  color: var(--text-primary);
  resize: vertical;
}

.generation-actions {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.generate-button {
  padding: 12px 20px;
  border-radius: 8px;
  border: none;
  background: var(--bg-muted);
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.generate-button.primary {
  background: var(--color-primary);
  color: white;
}

.generate-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.creative-output-section {
  margin-top: 20px;
  padding: 15px;
  background: var(--bg-card);
  border-radius: 8px;
  border: 1px solid var(--border-soft);
}

.output-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.output-actions {
  display: flex;
  gap: 10px;
}

.action-button {
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid var(--border-soft);
  background: transparent;
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.action-button:hover {
  background: var(--bg-hover);
}

.output-content {
  padding: 15px;
  background: var(--bg-surface);
  border-radius: 8px;
  white-space: pre-wrap;
}

.output-content.code-output {
  font-family: var(--font-mono);
  background: rgba(0, 0, 0, 0.1);
}

.formatted-output p {
  margin-bottom: 1em;
}

.image-output-section {
  margin-top: 20px;
}

.image-container {
  position: relative;
  margin-bottom: 15px;
}

.image-container img {
  max-width: 100%;
  border-radius: 8px;
}

.image-actions {
  display: flex;
  justify-content: center;
}

.download-button {
  padding: 10px 15px;
  background: var(--color-primary);
  color: white;
  border-radius: 6px;
  text-decoration: none;
  transition: var(--transition-fast);
}

.download-button:hover {
  background: var(--color-secondary);
}

.creative-tips {
  margin-top: 20px;
  padding: 15px;
  background: var(--bg-muted);
  border-radius: 8px;
}

.creative-tips ul {
  margin: 10px 0 0 20px;
}
/* =================================================================== */
/* 9. MODALS & NOTIFICATIONS                                           */
/* =================================================================== */
/* --- Settings Modal --- */
.settings-modal {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background-color: var(--bg-modal-backdrop);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000; padding: 20px;
}
.settings-content {
  background-color: var(--bg-secondary);
  border-radius: 15px;
  width: 100%; max-width: 900px; max-height: 90vh;
  overflow: hidden; display: flex; flex-direction: column;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border-primary);
}
.settings-header {
  padding: 20px; border-bottom: 1px solid var(--border-primary);
  display: flex; justify-content: space-between; align-items: center;
}
.settings-grid {
  flex: 1; overflow-y: auto; padding: 20px;
  display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
}
.setting-item label { display: block; margin-bottom: 5px; font-size: 0.9rem; opacity: 0.8; }
.setting-item.toggle { display: flex; justify-content: space-between; align-items: center; }

/* --- Notifications --- */
.notification {
  position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
  padding: 12px 20px; border-radius: 8px;
  color: white; font-weight: 600;
  z-index: 1000;
  animation: slideUp 0.3s ease;
  box-shadow: var(--shadow-lg);
}
.notification.info { background-color: var(--status-info); }
.notification.success { background-color: var(--status-success); }
.notification.warning { background-color: var(--status-warning); color: var(--text-primary); }
.notification.error { background-color: var(--status-error); }

/* =================================================================== */
/* 10. ANIMATIONS & KEYFRAMES                                          */
/* =================================================================== */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}
@keyframes slideUp {
  from { transform: translate(-50%, 20px); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}
@keyframes bounce {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1.0); }
}

/* =================================================================== */
/* 11. RESPONSIVE DESIGN                                               */
/* =================================================================== */
@media (max-width: 900px) {
  .agent-dashboard { grid-template-columns: 1fr; }
  .agent-left-column, .agent-right-column { overflow-y: visible; }
}

@media (max-width: 768px) {
  .soul-grid { grid-template-columns: 1fr; }
  .settings-grid { grid-template-columns: 1fr; }
}

@media (max-width: 480px) {
  .app-header { flex-direction: column; gap: 15px; }
  .header-left, .header-right { width: 100%; justify-content: space-between; }
  .chat-input { padding: 15px 50px 15px 15px; }
  .input-actions { right: 5px; bottom: 5px; }
}

/* Base Styles */
.empty-chat-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 40px;
  flex: 1;
  color: var(--secondary-color);
}

.welcome-logo {
  font-size: 3rem;
  font-weight: bold;
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
  color: var(--dark-color);
  margin-bottom: 20px;
}

.empty-chat-container h2 {
  font-size: 2rem;
  color: var(--primary-color);
  margin-bottom: 10px;
}

.example-prompts {
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
  max-width: 600px;
}

.example-prompts p {
  font-size: 0.9rem;
  opacity: 0.8;
}

.example-prompts span {
  background-color: rgba(255, 255, 255, 0.05);
  padding: 10px 15px;
  border-radius: 8px;
  font-size: 0.85rem;
  cursor: pointer;
  transition: var(--transition);
}
.light-theme .example-prompts span {
  background-color: rgba(0, 0, 0, 0.03);
}
.example-prompts span:hover {
  background-color: rgba(255, 255, 255, 0.1);
}
.light-theme .example-prompts span:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

/* Message Bubbles & Layout */
.message-wrapper {
  display: flex;
  gap: 15px;
  width: 100%;
  animation: fadeIn 0.5s ease;
}

.message-wrapper.user {
  justify-content: flex-end;
}

.avatar, .user-avatar, .aion-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.2rem;
  flex-shrink: 0;
}

.aion-avatar {
  background-color: var(--primary-color);
  color: var(--dark-color);
}

.user-avatar {
  background-color: var(--secondary-color);
  color: var(--light-color);
}

.light-theme .user-avatar {
    color: var(--dark-color);
}

.message-content, .aion-message {
  max-width: 80%;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 15px;
  padding: 12px 18px;
  position: relative;
}

.light-theme .message-content, .light-theme .aion-message {
  background-color: rgba(0, 0, 0, 0.03);
}

.message-wrapper.user .message-content {
  background-color: var(--primary-color);
  border-radius: 15px 15px 0 15px;
}

.message-wrapper .aion-message {
  border-radius: 15px 15px 15px 0;
}

/* Message Header (time, mood, etc) */
.message-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
  font-size: 0.75rem;
}

.aion-header {
  min-height: 20px; /* Reserve space for actions */
}

.user-header {
  justify-content: flex-end;
}

.message-header .time {
  opacity: 0.6;
}

/* Markdown & Code Block Styling */
.message-body {
  line-height: 1.7;
  word-wrap: break-word;
}

.message-body p {
  margin-bottom: 1em;
}

.message-body a {
  color: var(--success-color);
  text-decoration: none;
}
.message-body a:hover {
  text-decoration: underline;
}

.message-body pre {
  background-color: rgba(0, 0, 0, 0.3) !important;
  border-radius: 8px;
  padding: 15px !important;
  font-size: 0.85rem;
  margin: 1em 0;
  overflow-x: auto;
}

.message-body code {
    font-family: 'Courier New', Courier, monospace;
}

.light-theme .message-body pre {
  background-color: rgba(0, 0, 0, 0.05) !important;
}

/* Per-Message Action Toolbar */
.message-actions {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  gap: 5px;
  background-color: rgba(0, 0, 0, 0.2);
  padding: 4px;
  border-radius: 8px;
  opacity: 0;
  transition: var(--transition);
}

.aion-message:hover .message-actions {
  opacity: 1;
}

.message-actions button {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1rem;
  opacity: 0.7;
  transition: var(--transition);
}

.message-actions button:hover {
  opacity: 1;
  transform: scale(1.1);
}

/* Typing Indicator */
.typing-indicator {
  display: flex;
  gap: 5px;
  padding: 10px 0;
}
.typing-indicator span {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: var(--accent-color);
  animation: bounce 1.4s infinite ease-in-out both;
}
.typing-indicator span:nth-of-type(1) { animation-delay: -0.32s; }
.typing-indicator span:nth-of-type(2) { animation-delay: -0.16s; }

@keyframes bounce {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1.0); }
}

.background-animation {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events: none;
}

/* Header */
.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 18px 28px;
  margin-bottom: 20px;
  background: linear-gradient(90deg, rgba(5, 8, 16, 0.75) 0%, rgba(10, 14, 39, 0.7) 100%);
  backdrop-filter: blur(12px);
  border-bottom: 1.5px solid rgba(0, 212, 255, 0.15);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(0, 212, 255, 0.05);
  border-radius: 0 0 12px 12px;
}

.light-theme .app-header {
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

.app-header h1 {
  font-size: 2.5rem;
  /* Adjusting gradient to grayscale */
  background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  font-weight: 700;
}

.header-left, .header-right {
  display: flex;
  align-items: center;
  gap: 15px;
}

.soul-status {
  display: flex;
  align-items: center;
  gap: 10px;
}

.mood {
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: capitalize;
}

/* User ID Display (if implemented) */
.user-id-display {
  font-size: 0.8rem;
  opacity: 0.7;
  padding: 5px 10px;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 15px;
}

.light-theme .user-id-display {
  background-color: rgba(0, 0, 0, 0.03);
}

/* Moods - Changed to grayscale/monochromatic shades */
.mood.contemplative {
  background-color: #636e72; /* Dark gray */
  color: white;
}

.mood.joyful {
  background-color: #bbbbbb; /* Light gray */
  color: #2d3436; /* Dark text */
}

.mood.serious {
  background-color: #2d3436; /* Very dark gray */
  color: white;
}

.mood.playful {
  background-color: #888888; /* Medium gray */
  color: white;
}

.mood.wise {
  background-color: #444444; /* Darker gray */
  color: white;
}

.mood.compassionate {
  background-color: #666666; /* Medium-dark gray */
  color: white;
}

.mood.curious {
  background-color: #aaaaaa; /* Medium-light gray */
  color: white;
}

.mood.calm {
  background-color: #eeeeee; /* Very light gray */
  color: #2d3436; /* Dark text */
}

.mood.inspired { /* New mood */
  background-color: #777777; /* Medium gray */
  color: white;
}

.mood.resilient { /* New mood */
  background-color: #333333; /* Dark gray */
  color: white;
}

.energy-bar {
  width: 100px;
  height: 10px;
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 5px;
  overflow: hidden;
}

.light-theme .energy-bar {
  background-color: rgba(88, 87, 87, 0.1);
}

.energy-fill {
  height: 100%;
  /* Adjusting gradient to grayscale */
  background: linear-gradient(90deg, #444444, #aaaaaa);
  border-radius: 5px;
  transition: width 0.5s ease;
}

.icon-button {
  background: none;
  border: none;
  color: var(--light-color);
  font-size: 1.5rem;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
}

.icon-button:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.light-theme .icon-button {
  color: var(--light-color);
}

.icon-button.active {
  background-color: var(--primary-color);
  color: white;
}

/* Tab Navigation */
.tab-container {
  display: flex;
  gap: 5px;
  margin-bottom: 20px;
  overflow-x: auto; /* Enable horizontal scrolling for tabs */
  padding-bottom: 5px; /* Space for scrollbar */
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.tab-container::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

.tab-button {
  padding: 8px 15px;
  background-color: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 20px;
  color: var(--light-color);
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  transition: var(--transition);
  white-space: nowrap; /* Prevent text wrapping */
}

.light-theme .tab-button {
  background-color: rgba(0, 0, 0, 0.05);
  color: var(--light-color);
}

.tab-button:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.light-theme .tab-button:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

.tab-button.active {
  background-color: var(--primary-color);
  color: white;
}

.tab-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Main Content */
.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.chat-container {
  flex: 1;
  overflow-y: auto;
  margin-bottom: 20px;
  padding-right: 10px;
}

.conversation-history {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.conversation-entry {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  animation: fadeIn 0.3s ease;
}

.light-theme .conversation-entry {
  background-color: rgba(0, 0, 0, 0.03);
}

.conversation-entry.math-solution {
  border-left: 4px solid var(--success-color);
}

.user-question, .aion-response {
  margin-bottom: 10px;
}

.user-question .time, .aion-response .time {
  font-size: 0.7rem;
  opacity: 0.7;
  margin-bottom: 5px;
  display: block;
}

.user-question p {
  font-weight: 500;
  color: var(--secondary-color);
}

.aion-response p {
  line-height: 1.7;
}

.mood-indicator {
  display: inline-block;
  padding: 3px 8px;
  background-color: var(--primary-color);
  border-radius: 15px;
  font-size: 0.7rem;
  margin-bottom: 5px;
  text-transform: capitalize;
}

/* Sentiment Tag - Keeping original colors for status distinction */
.sentiment-tag {
  padding: 3px 8px;
  border-radius: 15px;
  font-size: 0.7rem;
  margin-left: 10px;
  text-transform: capitalize;
  font-weight: 600;
}

.sentiment-tag.positive {
  background-color: var(--success-color);
  color: white;
}

.sentiment-tag.negative {
  background-color: var(--error-color);
  color: white;
}

.sentiment-tag.neutral {
  background-color: var(--info-color);
  color: white;
}

/* Input Section */
.input-section {
  margin-top: auto;
  padding-top: 20px;
}

.input-container {
  position: relative;
  margin-bottom: 15px;
}

.chat-input {
  width: 100%;
  min-height: 60px;
  max-height: 200px;
  padding: 15px 60px 15px 20px;
  border-radius: 30px;
  border: none;
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--light-color);
  font-size: 1rem;
  resize: none;
  transition: var(--transition);
}

.light-theme .chat-input {
  background-color: rgba(0, 0, 0, 0.05);
  color: var(--light-color);
}

.chat-input:focus {
  outline: none;
  box-shadow: 0 0 0 2px var(--primary-color);
}

.chat-input::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

.light-theme .chat-input::placeholder {
  color: rgba(0, 0, 0, 0.3);
}

.input-actions {
  position: absolute;
  right: 10px;
  bottom: 10px;
  display: flex;
  gap: 5px;
}

.mic-button {
  background-color: rgba(255, 255, 255, 0.1);
}

.mic-button:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.mic-button.active {
  background-color: var(--error-color); /* Keeping original for status distinction */
  color: white;
}

.mic-button.active:hover {
  background-color: #5eb6ff; /* Keeping original for status distinction */
}

.icon-mic {
  position: relative;
  /* Basic icon styling, replace with Font Awesome or SVG if needed */
  font-family: 'Material Icons'; /* Example, assuming Material Icons or similar setup */
}

.icon-mic.pulse::before {
  content: '';
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.3);
  animation: pulse 1.5s infinite;
}

.send-button {
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: var(--transition);
}

.send-button:hover {
  background-color: #444444; /* Darker primary for hover */
}

.send-button:disabled {
  background-color: rgba(51, 51, 51, 0.5); /* Primary with opacity */
  cursor: not-allowed;
}

.icon-spinner {
  animation: spin 1s linear infinite;
}

/* Quick Feelings */

/* === Black & White Full Glass HUD (Fully Transparent) ===
   Usage:
   - Add `class="theme-hud theme-hud--light"` or `theme-hud--dark` to your top-level app container
   - Tweak `--hud-panel-alpha` to increase/decrease panel opacity (e.g. 0.06 - 0.28)
   - Designed to keep UI readable while letting desktop/video show through
*/
:root {
  --hud-backdrop-blur: 14px;
  --hud-panel-alpha: 0.16; /* default panel transparency */
  --hud-border-alpha: 0.22;
  --hud-accent-light: rgba(255,255,255,0.95);
  --hud-accent-dark: rgba(0,0,0,0.9);
  --hud-text: rgba(245,245,245,0.95);
  --hud-muted: rgba(200,200,200,0.6);
}

/* Root toggle class */
.theme-hud {
  background: transparent !important;
  color: var(--hud-text) !important;
  -webkit-font-smoothing: antialiased;
}

/* Light variant: white glass on darker scenes (recommended) */
.theme-hud--light {
  --hud-panel-color: rgba(255,255,255,var(--hud-panel-alpha));
  --hud-border-color: rgba(255,255,255,var(--hud-border-alpha));
  --hud-accent: var(--hud-accent-dark);
}

/* Dark variant: black glass on brighter scenes */
.theme-hud--dark {
  --hud-panel-color: rgba(0,0,0,var(--hud-panel-alpha));
  --hud-border-color: rgba(0,0,0,var(--hud-border-alpha));
  --hud-accent: var(--hud-accent-light);
}

/* Panels and surfaces */
.theme-hud .panel-card,
.theme-hud .agent-card,
.theme-hud .modal-content,
.theme-hud .search-panel,
.theme-hud .memories-panel,
.theme-hud .soul-panel,
.theme-hud .math-panel,
.theme-hud .creative-panel,
.theme-hud .goals-panel,
.theme-hud .knowledge-panel,
.theme-hud .message-content,
.theme-hud .aion-message,
.theme-hud .memory-item,
.theme-hud .goal-item,
.theme-hud .knowledge-item,
.theme-hud .input-section,
.theme-hud .chat-input,
.theme-hud .input-container {
  background: var(--hud-panel-color) !important;
  border: 1px solid var(--hud-border-color) !important;
  color: var(--hud-text) !important;
  backdrop-filter: blur(var(--hud-backdrop-blur)) saturate(140%);
  -webkit-backdrop-filter: blur(var(--hud-backdrop-blur)) saturate(140%);
  box-shadow: 0 6px 30px rgba(0,0,0,0.16);
  transition: background 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
}

/* Hover states increase opacity slightly for readability */
.theme-hud .panel-card:hover,
.theme-hud .agent-card:hover,
.theme-hud .modal-content:hover,
.theme-hud .message-content:hover {
  background: color-mix(in srgb, var(--hud-panel-color) 84%, transparent) !important;
  border-color: color-mix(in srgb, var(--hud-border-color) 86%, transparent) !important;
}

/* Headers & accents */
.theme-hud .app-header h1,
.theme-hud .panel-header h3,
.theme-hud .goals-header h3,
.theme-hud .knowledge-header h3 {
  color: var(--hud-accent) !important;
  font-weight: 700;
  letter-spacing: 0.6px;
}

/* Buttons */
.theme-hud .tab-button,
.theme-hud .icon-button,
.theme-hud .send-button,
.theme-hud .mic-button,
.theme-hud .soul-action-button,
.theme-hud .memory-action-button,
.theme-hud .action-button {
  background: color-mix(in srgb, var(--hud-panel-color) 70%, transparent) !important;
  border: 1px solid color-mix(in srgb, var(--hud-border-color) 85%, transparent) !important;
  color: var(--hud-accent) !important;
  padding: 6px 10px;
  border-radius: 8px;
  backdrop-filter: blur(6px);
}

.theme-hud .tab-button.active,
.theme-hud .icon-button.active,
.theme-hud .send-button:active,
.theme-hud .mic-button.active {
  background: color-mix(in srgb, var(--hud-panel-color) 86%, transparent) !important;
  box-shadow: 0 8px 28px rgba(0,0,0,0.22);
}

/* Inputs */
.theme-hud input, .theme-hud textarea, .theme-hud select {
  background: transparent !important;
  border: 1px solid color-mix(in srgb, var(--hud-border-color) 85%, transparent) !important;
  color: var(--hud-text) !important;
}

/* Avatars and badges */
.theme-hud .avatar, .theme-hud .user-avatar, .theme-hud .aion-avatar,
.theme-hud .status-badge, .theme-hud .sentiment-tag {
  background: color-mix(in srgb, var(--hud-panel-color) 68%, transparent) !important;
  border: 1px solid color-mix(in srgb, var(--hud-border-color) 86%, transparent) !important;
  color: var(--hud-accent) !important;
}

/* Scrollbar subtle */
.theme-hud ::-webkit-scrollbar { width: 10px; height: 10px; }
.theme-hud ::-webkit-scrollbar-track { background: transparent; }
.theme-hud ::-webkit-scrollbar-thumb { background: rgba(128,128,128,0.34); border-radius: 8px; }

/* Accessibility high-contrast helper */
.theme-hud.is-high-contrast {
  --hud-panel-alpha: 0.28;
  --hud-border-alpha: 0.36;
  --hud-text: rgba(255,255,255,0.98);
}

/* Device perf */
@media (max-width: 768px) {
  .theme-hud { --hud-backdrop-blur: 8px; }
}

/* Utility: quick set opacity via attribute on container */
.theme-hud[data-panel-alpha] {
  /* Back-compat hook: when a consumer sets the attribute `data-panel-alpha`
     we expose a fallback CSS variable that other rules can reference. This
     declaration is intentionally inert when the variable isn't set.
     Example usage elsewhere: `background: rgba(255,255,255,var(--hud-panel-alpha,0.12));` */
  --hud-panel-alpha: var(--hud-panel-alpha, 0.12);
}

/* End of Black & White Full Glass HUD */

/* === Convenience opacity presets ===
   - Use these helper classes on the same element as `theme-hud` to quickly adjust visibility.
   - Example: <div class="app-container theme-hud theme-hud--light theme-hud--60"> ...</div>
*/
.theme-hud--60 { /* UI ~60% visible, background ~40% visible */
  --hud-panel-alpha: 0.60 !important;
}

.theme-hud--40 { /* UI ~40% visible, background ~60% visible */
  --hud-panel-alpha: 0.40 !important;
}

/* You can also set via inline style or JS for finer control:
   document.querySelector('.theme-hud').style.setProperty('--hud-panel-alpha', '0.6')
*/

/* Full transparent preset: UI panels are fully transparent so desktop/video is fully visible.
   This keeps text and interactive controls readable by applying subtle outlines and increased contrast.
   Use with caution  interactive hit targets and text remain, but some visuals (like card backgrounds)
   will be gone. Example: <div class="theme-hud theme-hud--light theme-hud--full"> */
.theme-hud--full {
  --hud-panel-alpha: 0 !important;
  /* reduce shadows/borders but keep a crisp outline for text readability */
  --hud-border-alpha: 0.14 !important;
}

.theme-hud--full .panel-card,
.theme-hud--full .agent-card,
.theme-hud--full .modal-content,
.theme-hud--full .message-content,
.theme-hud--full .aion-message,
.theme-hud--full .input-section,
.theme-hud--full .chat-input {
  background: transparent !important;
  box-shadow: none !important;
  border: 1px solid rgba(255,255,255,0.06) !important; /* subtle outline */
}

.theme-hud--full .message-content, .theme-hud--full .aion-message {
  text-shadow: 0 1px 0 rgba(0,0,0,0.6), 0 8px 24px rgba(0,0,0,0.2);
}

.theme-hud--full .tab-button, .theme-hud--full .icon-button, .theme-hud--full .action-button {
  background: transparent !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: none !important;
}

.theme-hud--full .chat-input::placeholder { color: rgba(255,255,255,0.55) !important; }

.quick-feelings {
  margin-bottom: 20px;
}

.feelings-title {
  font-size: 0.9rem;
  margin-bottom: 10px;
  opacity: 0.8;
}

.feeling-buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.feeling-button {
  padding: 8px 15px;
  border-radius: 20px;
  border: none;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  transition: var(--transition);
}

/* Placeholder icons for feelings */
.icon-love::before { content: ''; }
.icon-joy::before { content: ''; }
.icon-sadness::before { content: ''; }
.icon-curiosity::before { content: ''; }
.icon-peace::before { content: ''; }
.icon-soul::before { content: ''; }
.icon-settings::before { content: ''; }
.icon-arrow-left::before { content: ''; }
.icon-send::before { content: ''; }

/* Feeling button colors - Changed to grayscale/monochromatic shades */
.feeling-button.love {
  background-color: rgba(180, 180, 180, 0.2);
  color: #dddddd;
}

/* === SearchPanel small fixes & compatibility tweaks === */

/* Result header tweaks */
.result-favicon { width:32px; height:32px; border-radius:6px; margin-right:8px; object-fit:cover; }
.result-title-container { flex:1; min-width:0; }
.result-title-container h4 { margin:0; font-size:15px; line-height:1.2; }
.result-meta { margin-top:6px; color:var(--muted); font-size:12px; display:flex; gap:8px; align-items:center; }

/* Action buttons */
.result-actions button { background:transparent; border:none; padding:6px; border-radius:6px; cursor:pointer; color:var(--muted); }
.result-actions button.active { color:var(--primary); }
.result-actions .expand-toggle { display:inline-flex; align-items:center; justify-content:center; }

/* Media preview overlays */
.play-overlay, .video-play-overlay { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:#fff; font-size:22px; background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.28)); }
.result-media { position:relative; border-radius:8px; overflow:hidden; }

/* Debug badge */
.media-debug { margin-top:8px; font-size:12px; opacity:0.7; }

/* Ensure videos are responsive inside thumbs and lightbox */
.video-thumb video, .result-media video, .video-player-wrap video { width:100%; height:auto; display:block; border-radius:6px; }

/* Small device tweaks */
@media (max-width: 720px) {
  .result-main { flex-direction:column; align-items:flex-start; }
  .result-favicon { margin-bottom:8px; }
  .result-actions { margin-top:8px; }
}

.feeling-button.love:hover {
  background-color: rgba(180, 180, 180, 0.3);
}

.feeling-button.joy {
  background-color: rgba(200, 200, 200, 0.2);
  color: #bbbbbb;
}

.feeling-button.joy:hover {
  background-color: rgba(200, 200, 200, 0.3);
}

.feeling-button.sadness {
  background-color: rgba(100, 100, 100, 0.2);
  color: #aaaaaa;
}

.feeling-button.sadness:hover {
  background-color: rgba(100, 100, 100, 0.3);
}

.feeling-button.curiosity {
  background-color: rgba(80, 80, 80, 0.2);
  color: #cccccc;
}

.feeling-button.curiosity:hover {
  background-color: rgba(80, 80, 80, 0.3);
}

.feeling-button.peace {
  background-color: rgba(150, 150, 150, 0.2);
  color: #eeeeee;
}

.feeling-button.peace:hover {
  background-color: rgba(150, 150, 150, 0.3);
}

/* Panels */
.soul-panel, .memories-panel, .search-panel,
.math-panel, .quantum-panel, .neural-panel, .creative-panel,
.goals-panel, .knowledge-panel /* New panels */ {
  flex: 1;
  overflow-y: auto;
  padding-right: 10px;
  margin-bottom: 20px;
}

/* Panel headers */
.math-header, .quantum-header, .neural-header, .creative-header,
.goals-header, .knowledge-header /* New headers */ {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.back-button {
  background: none;
  border: none;
  color: var(--secondary-color);
  font-size: 0.9rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
}

.back-button:hover {
  text-decoration: underline;
}

/* Soul Panel */
.soul-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
}

.soul-stat {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
}

.light-theme .soul-stat {
  background-color: rgba(0, 0, 0, 0.03);
}

.soul-stat h4 {
  margin-bottom: 10px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.stat-value {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 10px;
  color: var(--primary-color);
}

.stat-bar {
  height: 8px;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.light-theme .stat-bar {
  background-color: rgba(0, 0, 0, 0.05);
}

.stat-fill {
  height: 100%;
  /* Adjusting gradient to grayscale */
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border-radius: 4px;
  transition: width 0.5s ease; /* Added transition for smooth updates */
}

/* Specific stat bar colors for new metrics - Keeping original for status distinction */
.soul-stat .stat-fill[style*="background-color: var(--warning-color)"] {
  background: var(--warning-color); /* For cognitiveLoad high */
}
.soul-stat .stat-fill[style*="background-color: var(--info-color)"] {
  background: var(--info-color); /* For cognitiveLoad low */
}
.soul-stat .stat-fill[style*="background-color: var(--error-color)"] {
  background: var(--error-color); /* For emotionalStability low or ethicalAlignment low */
}
.soul-stat .stat-fill[style*="background-color: var(--success-color)"] {
  background: var(--success-color); /* For emotionalStability high */
}
.soul-stat .stat-fill[style*="background-color: var(--primary-color)"] {
  background: var(--primary-color); /* For ethicalAlignment high */
}

/* Soul Values */
.soul-values {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  grid-column: span 2; /* Span two columns in the grid */
}

.light-theme .soul-values {
  background-color: rgba(0, 0, 0, 0.03);
}

.soul-values h4 {
  margin-bottom: 15px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.value-item {
  margin-bottom: 10px;
}

.value-item span {
  display: block;
  margin-bottom: 5px;
  font-size: 0.8rem;
  opacity: 0.8;
}

.value-bar {
  height: 6px;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  overflow: hidden;
}

.light-theme .value-bar {
  background-color: rgba(0, 0, 0, 0.05);
}

.value-fill {
  height: 100%;
  /* Adjusting gradient to grayscale */
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border-radius: 3px;
  transition: width 0.5s ease; /* Added transition for smooth updates */
}

/* Soul Emotional State */
.soul-emotional-state {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  grid-column: span 2; /* Span two columns in the grid */
}

.light-theme .soul-emotional-state {
  background-color: rgba(0, 0, 0, 0.03);
}

.soul-emotional-state h4 {
  margin-bottom: 15px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.emotion-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  gap: 10px;
}

.emotion-item span:first-child {
  flex: 0 0 100px; /* Fixed width for emotion name */
  font-size: 0.8rem;
  opacity: 0.8;
}

.emotion-item .emotion-bar {
  flex: 1;
  height: 6px;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  overflow: hidden;
}

.light-theme .emotion-item .emotion-bar {
  background-color: rgba(0, 0, 0, 0.05);
}

.emotion-item .emotion-fill {
  height: 100%;
  background: var(--accent-color); /* Use grayscale accent color for emotion bars */
  border-radius: 3px;
  transition: width 0.5s ease;
}

.emotion-item .emotion-value {
  font-size: 0.8rem;
  opacity: 0.7;
  width: 40px; /* Fixed width for percentage */
  text-align: right;
}

/* Soul Actions */
.soul-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  grid-column: span 1; /* Span one column in the grid */
}

.soul-action-button {
  padding: 12px;
  border-radius: 8px;
  border: none;
  background-color: rgba(100, 100, 100, 0.2); /* Grayscale */
  color: var(--light-color);
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  text-align: center;
}

.soul-action-button:hover {
  background-color: rgba(100, 100, 100, 0.3); /* Grayscale */
}

.soul-action-button.positive-feedback {
  background-color: var(--success-color); /* Keeping original for status distinction */
  color: white;
}

.soul-action-button.positive-feedback:hover {
  background-color: #008f73; /* Keeping original for status distinction */
}

.soul-action-button.negative-feedback {
  background-color: var(--error-color); /* Keeping original for status distinction */
  color: white;
}

.soul-action-button.negative-feedback:hover {
  background-color: #a82425; /* Keeping original for status distinction */
}

/* Memories Panel */
.memories-panel h3 {
  margin-bottom: 15px;
  color: var(--primary-color);
}

.memory-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-bottom: 20px;
}

.memory-item {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
}

.light-theme .memory-item {
  background-color: rgba(0, 0, 0, 0.03);
}

.memory-time {
  font-size: 0.7rem;
  opacity: 0.7;
  margin-bottom: 5px;
}

.memory-content {
  margin-bottom: 10px;
}

.memory-question {
  font-weight: 500;
  color: var(--secondary-color);
  margin-bottom: 5px;
}

.memory-response {
  font-size: 0.9rem;
  opacity: 0.9;
}

.memory-mood {
  display: flex;
  gap: 10px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.mood-tag {
  padding: 3px 8px;
  border-radius: 15px;
  font-size: 0.7rem;
  text-transform: capitalize;
}

/* Mood tag styles (re-apply for consistency) - Changed to grayscale/monochromatic shades */
.mood-tag.contemplative { background-color: #636e72; color: white; }
.mood-tag.joyful { background-color: #bbbbbb; color: #2d3436; }
.mood-tag.serious { background-color: #2d3436; color: white; }
.mood-tag.playful { background-color: #888888; color: white; }
.mood-tag.wise { background-color: #444444; color: white; }
.mood-tag.compassionate { background-color: #666666; color: white; }
.mood-tag.curious { background-color: #aaaaaa; color: white; }
.mood-tag.calm { background-color: #eeeeee; color: #2d3436; }
.mood-tag.inspired { background-color: #777777; color: white; } /* New mood tag */
.mood-tag.resilient { background-color: #333333; color: white; } /* New mood tag */

.emotion-tag {
  padding: 3px 8px;
  border-radius: 15px;
  font-size: 0.7rem;
  background-color: rgba(255, 255, 255, 0.1);
}

.light-theme .emotion-tag {
  background-color: rgba(0, 0, 0, 0.05);
}

/* Long-Term Memory */
.long-term-memory-section {
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.light-theme .long-term-memory-section {
  border-top-color: rgba(0, 0, 0, 0.1);
}

.long-term-memory-section h3 {
  margin-bottom: 15px;
  color: var(--primary-color);
}

.long-term-memory-section .memory-item {
  background-color: rgba(255, 255, 255, 0.03);
  border-left: 4px solid var(--secondary-color); /* Changed from info-color to a grayscale secondary */
}

.light-theme .long-term-memory-section .memory-item {
  background-color: rgba(0, 0, 0, 0.02);
}

/* Internal Reflections */
.internal-reflections-section {
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.light-theme .internal-reflections-section {
  border-top-color: rgba(0, 0, 0, 0.1);
}

.internal-reflections-section h3 {
  margin-bottom: 15px;
  color: var(--accent-color);
}

.internal-reflections-section .memory-item {
  background-color: rgba(187, 187, 187, 0.05); /* Using accent color for background with opacity */
  border-left: 4px solid var(--accent-color);
}

.light-theme .internal-reflections-section .memory-item {
  background-color: rgba(187, 187, 187, 0.03);
}

.memory-actions {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.memory-action-button {
  padding: 10px 15px;
  border-radius: 8px;
  border: none;
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--light-color);
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  font-size: 0.8rem;
}

.light-theme .memory-action-button {
  background-color: rgba(0, 0, 0, 0.05);
}

.memory-action-button:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.light-theme .memory-action-button:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

.memory-action-button.danger {
  background-color: rgba(214, 48, 49, 0.2); /* Keeping original for status distinction */
  color: #ff7675; /* Keeping original for status distinction */
}

.memory-action-button.danger:hover {
  background-color: rgba(214, 48, 49, 0.3); /* Keeping original for status distinction */
}

/* Search Panel */
.search-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 200px;
  gap: 15px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid rgba(255, 255, 255, 0.1);
  border-top-color: var(--primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.light-theme .spinner {
  border-color: rgba(0, 0, 0, 0.1);
  border-top-color: var(--primary-color);
}

.search-results {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.search-result {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
}

.light-theme .search-result {
  background-color: rgba(0, 0, 0, 0.03);
}

.search-result h4 {
  margin-bottom: 10px;
}

.search-result h4 a {
  color: var(--secondary-color);
  text-decoration: none;
}

.search-result h4 a:hover {
  text-decoration: underline;
}

.result-snippet {
  font-size: 0.9rem;
  opacity: 0.8;
  margin-bottom: 5px;
}

.result-source {
  font-size: 0.7rem;
  opacity: 0.6;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.no-results {
  text-align: center;
  padding: 40px 20px;
  opacity: 0.7;
}

/* Math Panel */
.math-solution {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.math-problem, .math-answer, .math-formula {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
}

.light-theme .math-problem,
.light-theme .math-answer,
.light-theme .math-formula {
  background-color: rgba(0, 0, 0, 0.03);
}

.math-problem h4, .math-answer h4, .math-formula h4 {
  margin-bottom: 10px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.math-steps-container {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
}

.light-theme .math-steps-container {
  background-color: rgba(0, 0, 0, 0.03);
}

.math-steps-container h4 {
  margin-bottom: 10px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.math-steps-list {
  padding-left: 20px;
}

.math-step {
  margin-bottom: 8px;
  font-size: 0.9rem;
  opacity: 0.9;
}

.math-visualization {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  display: flex;
  justify-content: center;
}

.light-theme .math-visualization {
  background-color: rgba(0, 0, 0, 0.03);
}

.math-visualization canvas {
  max-width: 100%;
  height: auto;
  display: block;
}

.no-math {
  text-align: center;
  padding: 40px 20px;
  opacity: 0.7;
}

/* Quantum Panel */
.quantum-description {
  margin-bottom: 20px;
  opacity: 0.8;
  font-size: 0.9rem;
}

.quantum-state-container {
  margin-bottom: 20px;
}

.quantum-state-container h4 {
  margin-bottom: 10px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.quantum-state {
  background-color: rgba(0, 0, 0, 0.2);
  border-radius: 10px;
  padding: 15px;
  font-family: monospace;
  white-space: pre-wrap;
  overflow-x: auto;
  font-size: 0.8rem;
  line-height: 1.5;
}

.light-theme .quantum-state {
  background-color: rgba(0, 0, 0, 0.05);
}

.quantum-sim-button {
  margin-top: 10px;
  padding: 8px 15px;
  border-radius: 20px;
  border: none;
  background-color: rgba(100, 100, 100, 0.2); /* Grayscale */
  color: var(--light-color);
  font-size: 0.8rem;
  cursor: pointer;
  transition: var(--transition);
}

.quantum-sim-button:hover {
  background-color: rgba(100, 100, 100, 0.3); /* Grayscale */
}

.quantum-visualization {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}

.light-theme .quantum-visualization {
  background-color: rgba(0, 0, 0, 0.03);
}

.quantum-visualization canvas {
  max-width: 100%;
  height: auto;
  display: block;
}

.quantum-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.quantum-action-button {
  padding: 8px 15px;
  border-radius: 20px;
  border: none;
  background-color: rgba(100, 100, 100, 0.2); /* Grayscale */
  color: var(--light-color);
  font-size: 0.8rem;
  cursor: pointer;
  transition: var(--transition);
}

.quantum-action-button:hover {
  background-color: rgba(100, 100, 100, 0.3); /* Grayscale */
}

/* Neural Panel */
.neural-description {
  margin-bottom: 20px;
  opacity: 0.8;
  font-size: 0.9rem;
}

.neural-output-container {
  margin-bottom: 20px;
}

.neural-output-container h4 {
  margin-bottom: 10px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.neural-output-values {
  display: flex;
  gap: 15px;
  margin-bottom: 15px;
}

.neural-output-value {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 10px 15px;
  font-family: monospace;
}

.light-theme .neural-output-value {
  background-color: rgba(0, 0, 0, 0.03);
}

.neural-sim-button {
  padding: 8px 15px;
  border-radius: 20px;
  border: none;
  background-color: rgba(100, 100, 100, 0.2); /* Grayscale */
  color: var(--light-color);
  font-size: 0.8rem;
  cursor: pointer;
  transition: var(--transition);
}

.neural-sim-button:hover {
  background-color: rgba(100, 100, 100, 0.3); /* Grayscale */
}

.neural-visualization {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}

.light-theme .neural-visualization {
  background-color: rgba(0, 0, 0, 0.03);
}

.neural-visualization canvas {
  max-width: 100%;
  height: auto;
  display: block;
}

.neural-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap; /* Added flex-wrap for responsiveness */
}

.neural-action-button {
  padding: 8px 15px;
  border-radius: 20px;
  border: none;
  background-color: rgba(100, 100, 100, 0.2); /* Grayscale */
  color: var(--light-color);
  font-size: 0.8rem;
  cursor: pointer;
  transition: var(--transition);
}

.neural-action-button:hover {
  background-color: rgba(100, 100, 100, 0.3); /* Grayscale */
}

/* Creative Panel */
.creative-panel {
  flex: 1;
  overflow-y: auto;
  padding-right: 10px;
  margin-bottom: 20px;
}

.creative-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.creative-description {
  margin-bottom: 20px;
  opacity: 0.8;
  font-size: 0.9rem;
}

.creative-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 20px;
}

.creative-action-button {
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  background-color: var(--accent-color); /* Using grayscale accent color */
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.creative-action-button:hover {
  background-color: #999999; /* Darker accent for hover */
}

.creative-action-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.creative-output-display {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  margin-top: 20px;
}

.light-theme .creative-output-display {
  background-color: rgba(0, 0, 0, 0.03);
}

.creative-output-display h4 {
  margin-bottom: 10px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.creative-output {
  white-space: pre-wrap;
  font-family: monospace;
  font-size: 0.9rem;
  line-height: 1.6;
}

.image-generation-container {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  margin-top: 20px;
  text-align: center;
}

.light-theme .image-generation-container {
  background-color: rgba(0, 0, 0, 0.03);
}

.image-generation-container h4 {
  margin-bottom: 10px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.image-placeholder {
  min-height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  padding: 10px;
}

.light-theme .image-placeholder {
  background-color: rgba(0, 0, 0, 0.05);
}

.image-placeholder img {
  max-width: 100%;
  max-height: 400px; /* Limit height for better display */
  border-radius: 6px;
  box-shadow: var(--shadow);
}

/* Goals Panel */
.goals-panel h3, .knowledge-panel h3 {
  margin-bottom: 15px;
  color: var(--primary-color);
}

.goals-description, .knowledge-description {
  margin-bottom: 20px;
  opacity: 0.8;
  font-size: 0.9rem;
}

.goal-list, .knowledge-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.goal-item, .knowledge-item {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  border-left: 4px solid var(--secondary-color); /* Changed from info-color to secondary for grayscale */
}

.light-theme .goal-item, .light-theme .knowledge-item {
  background-color: rgba(0, 0, 0, 0.03);
}

.goal-item.completed {
  border-left-color: var(--success-color); /* Keeping original for status distinction */
  opacity: 0.8;
}

.goal-description, .knowledge-key {
  font-weight: 600;
  margin-bottom: 5px;
  color: var(--secondary-color);
}

.goal-status, .knowledge-value {
  font-size: 0.9rem;
  opacity: 0.9;
  margin-bottom: 5px;
}

.goal-time, .knowledge-time {
  font-size: 0.7rem;
  opacity: 0.7;
}
/* Settings Modal */
.settings-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.settings-content {
  background-color: var(--dark-color);
  border-radius: 15px;
  width: 100%;
  max-width: 900px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.light-theme .settings-content {
  background-color: var(--light-color);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.settings-header {
  padding: 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.light-theme .settings-header {
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

.settings-header h2 {
  font-size: 1.5rem;
  font-weight: 700;
}

.close-button {
  background: none;
  border: none;
  color: var(--light-color);
  font-size: 1.5rem;
  cursor: pointer;
  padding: 5px;
  transition: var(--transition);
}

.close-button:hover {
  color: var(--accent-color);
}

.settings-tabs {
  display: flex;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding: 0 20px;
  overflow-x: auto;
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.settings-tabs::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

.light-theme .settings-tabs {
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

.settings-tab {
  padding: 12px 20px;
  background: none;
  border: none;
  color: var(--light-color);
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  border-bottom: 2px solid transparent;
  white-space: nowrap;
}

.settings-tab:hover {
  color: var(--secondary-color);
}

.settings-tab.active {
  color: var(--primary-color);
  border-bottom-color: var(--primary-color);
}

.settings-grid {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
}

.settings-group {
  margin-bottom: 20px;
}

.settings-group h3 {
  margin-bottom: 15px;
  font-size: 1rem;
  color: var(--primary-color);
}

.setting-item {
  margin-bottom: 15px;
}

.setting-item label {
  display: block;
  margin-bottom: 5px;
  font-size: 0.9rem;
  opacity: 0.8;
}

.setting-item input[type="range"] {
  width: 100%;
  -webkit-appearance: none; /* Override default look */
  appearance: none;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 5px;
  outline: none;
  transition: background 0.2s;
}

.light-theme .setting-item input[type="range"] {
  background: rgba(0, 0, 0, 0.1);
}

.setting-item input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--primary-color);
  cursor: pointer;
  transition: background 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.setting-item input[type="range"]::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--primary-color);
  cursor: pointer;
  transition: background 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.setting-item select,
.setting-item input[type="text"] {
  width: 100%;
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background-color: rgba(255, 255, 255, 0.05);
  color: var(--light-color);
  font-size: 0.9rem;
}

.light-theme .setting-item select,
.light-theme .setting-item input[type="text"] {
  border-color: rgba(0, 0, 0, 0.1);
  background-color: rgba(0, 0, 0, 0.05);
  color: var(--light-color);
}

.setting-item.toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.1);
  transition: var(--transition);
  border-radius: 24px;
}

.light-theme .slider {
  background-color: rgba(0, 0, 0, 0.1);
}

.slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: var(--transition);
  border-radius: 50%;
}

input:checked + .slider {
  background-color: var(--primary-color);
}

input:checked + .slider:before {
  transform: translateX(26px);
}

.settings-footer {
  padding: 15px 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  justify-content: space-between;
}

.light-theme .settings-footer {
  border-top-color: rgba(0, 0, 0, 0.1);
}

.test-button, .save-button {
  padding: 10px 20px;
  border-radius: 6px;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.test-button {
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--light-color);
}

.test-button:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.test-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.save-button {
  background-color: var(--primary-color);
  color: white;
}

.save-button:hover {
  background-color: #444444; /* Darker primary for hover */
}

/* Notifications - Keeping original colors for status distinction */
.notification {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  padding: 12px 20px;
  border-radius: 6px;
  color: white;
  font-weight: 600;
  z-index: 1000;
  animation: slideUp 0.3s ease;
  box-shadow: var(--shadow);
}

.notification.info {
  background-color: var(--info-color);
}

.notification.success {
  background-color: var(--success-color);
}

.notification.warning {
  background-color: var(--warning-color);
  color: #2d3436;
}

.notification.error {
  background-color: var(--error-color);
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes slideUp {
  from { transform: translate(-50%, 20px); opacity: 0; }
  to { transform: translate(-50%, 0); opacity: 1; }
}

/* Responsive */
@media (max-width: 768px) {
  .app-container {
    padding: 10px;
  }

  .app-header h1 {
    font-size: 1.8rem;
  }

  .soul-grid {
    grid-template-columns: 1fr;
  }

  .soul-values {
    grid-column: span 1;
  }

  .settings-grid {
    grid-template-columns: 1fr;
  }

  .input-actions {
    bottom: 15px;
  }

  .feeling-buttons {
    justify-content: center;
  }

  .settings-content {
    max-width: 100%; /* Allow settings modal to take full width */
    margin: 10px;
  }

  .settings-tabs {
    flex-wrap: wrap; /* Allow tabs to wrap on smaller screens */
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .app-header {
    flex-direction: column;
    gap: 10px;
  }

  .header-left, .header-right {
    width: 100%;
    justify-content: space-between;
  }

  .chat-input {
    padding: 15px 50px 15px 15px;
  }

  .input-actions {
    right: 5px;
    bottom: 5px;
  }

  .settings-tabs {
    padding: 0 10px; /* Adjust padding for smaller screens */
  }

  .settings-tab {
    padding: 10px 15px; /* Adjust padding for smaller screens */
  }

  .tab-container {
    justify-content: center; /* Center tabs on small screens */
  }

  .memory-actions, .quantum-actions, .neural-actions, .creative-actions,
  .goals-panel .goals-header, .knowledge-panel .knowledge-header /* New headers for responsiveness */ {
    flex-direction: column;
    align-items: stretch;
  }

  .memory-action-button, .quantum-action-button, .neural-action-button, .creative-action-button {
    width: 100%;
  }

  .goals-header .back-button, .knowledge-header .back-button {
    margin-top: 10px;
    width: 100%;
    text-align: center;
    justify-content: center;
  }
}

/* =================================================================== */
/* == FINAL, CONSOLIDATED STYLES FOR AGENT & KNOWLEDGE PANELS == */
/* =================================================================== */

/* --- General Panel Layout --- */
.search-panel,
.knowledge-panel {
  display: flex;
  flex-direction: column;
  gap: 20px;
  height: 100%;
}

.search-panel-header,
.knowledge-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 15px;
  padding-bottom: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.light-theme .search-panel-header,
.light-theme .knowledge-header {
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

.agent-card {
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 20px;
}
.light-theme .agent-card {
  background-color: rgba(0, 0, 0, 0.03);
}

/* Add these to your App.css file */

/* Advanced Filters */
.advanced-filters {
  position: relative;
  display: inline-block;
}

.filter-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  border-radius: 20px;
  color: var(--text-primary);
  cursor: pointer;
  font-weight: 600;
  transition: var(--transition-fast);
}

.filter-toggle:hover {
  background: var(--bg-hover);
}

.filter-count {
  background: var(--color-primary);
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
}

.filter-panel {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 8px;
  background: var(--bg-surface);
  border: 1px solid var(--border-strong);
  border-radius: 12px;
  padding: 16px;
  width: 300px;
  z-index: 100;
  box-shadow: var(--shadow-md);
}

.filter-group {
  margin-bottom: 16px;
}

.filter-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  font-size: 0.9rem;
}

.filter-group input,
.filter-group select {
  width: 100%;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--border-soft);
  background: var(--bg-card);
  color: var(--text-primary);
}

.date-inputs {
  display: flex;
  align-items: center;
  gap: 8px;
}

.date-inputs span {
  color: var(--text-muted);
}

.filter-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-top: 16px;
}

.clear-filters,
.apply-filters {
  padding: 8px 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: var(--transition-fast);
}

.clear-filters {
  background: transparent;
  color: var(--status-error);
  border: 1px solid var(--status-error);
}

.apply-filters {
  background: var(--color-primary);
  color: white;
}

/* Image Gallery */
.image-gallery-container {
  margin-bottom: 24px;
}

.image-gallery-container h4 {
  margin-bottom: 16px;
  color: var(--text-primary);
}

.image-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.image-item {
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.image-item:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
}

.image-item img {
  width: 100%;
  height: 150px;
  object-fit: cover;
}

.image-caption {
  padding: 8px;
  font-size: 0.85rem;
  color: var(--text-muted);
  margin: 0;
  text-align: center;
}

.lightbox {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg-modal-overlay);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.lightbox-content {
  position: relative;
  max-width: 90vw;
  max-height: 90vh;
}

.lightbox-content img {
  max-width: 100%;
  max-height: 80vh;
  border-radius: 8px;
  box-shadow: var(--shadow-lg);
}

.lightbox-caption {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 16px;
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

.lightbox-caption h4 {
  margin: 0 0 8px 0;
  color: white;
}

.lightbox-caption a {
  color: var(--color-secondary);
  font-weight: 600;
}

/* View Mode Selector */
.view-mode-selector {
  display: flex;
  gap: 4px;
  background: var(--bg-muted);
  border-radius: 8px;
  padding: 4px;
}

.view-mode-selector button {
  padding: 6px 12px;
  border-radius: 6px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
}

.view-mode-selector button.active {
  background: var(--color-primary);
  color: white;
}

/* Export Options */
.export-options {
  display: flex;
  gap: 8px;
}

.export-options button {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--border-soft);
  background: transparent;
  color: var(--text-primary);
  cursor: pointer;
  font-size: 0.85rem;
  transition: var(--transition-fast);
}

.export-options button:hover {
  background: var(--bg-hover);
}

/* Expanded Result Details */
.result-details {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--border-soft);
}

.detail-section {
  margin-bottom: 16px;
}

.detail-section h5 {
  margin: 0 0 8px 0;
  font-size: 0.9rem;
  color: var(--text-primary);
}

.concept-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.concept-tag {
  padding: 4px 8px;
  background: var(--bg-muted);
  border-radius: 16px;
  font-size: 0.8rem;
  color: var(--text-muted);
}

.citation {
  display: block;
  padding: 12px;
  background: var(--bg-muted);
  border-radius: 8px;
  font-family: var(--font-mono);
  font-size: 0.85rem;
  white-space: pre-wrap;
}

/* Reliability Indicator */
.reliability-indicator {
  display: flex;
  gap: 2px;
}

.reliability-indicator span {
  color: var(--text-muted);
  font-size: 0.9rem;
}

.reliability-indicator span.active {
  color: var(--status-warning);
}

/* Sentiment Analysis */
.sentiment-analysis {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid var(--border-soft);
}

.sentiment-analysis h4 {
  margin-bottom: 12px;
}

.sentiment-chart {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.sentiment-bar {
  height: 8px;
  border-radius: 4px;
  overflow: hidden;
  display: flex;
  width: 100%;
}

.sentiment-positive {
  background: var(--status-success);
}

.sentiment-neutral {
  background: var(--status-info);
}

.sentiment-negative {
  background: var(--status-error);
}

.sentiment-legend {
  display: flex;
  gap: 16px;
  font-size: 0.8rem;
}

.sentiment-legend span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.sentiment-legend span::before {
  content: "";
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.sentiment-legend .positive::before {
  background: var(--status-success);
}

.sentiment-legend .neutral::before {
  background: var(--status-info);
}

.sentiment-legend .negative::before {
  background: var(--status-error);
}

/* Cluster View */
.cluster-view {
  margin-bottom: 24px;
}

.clusters-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  margin-top: 16px;
}

.cluster {
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  border-radius: 8px;
  padding: 16px;
}

.cluster h5 {
  margin: 0 0 12px 0;
  font-size: 1rem;
  color: var(--text-primary);
}

.cluster-results {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.cluster-result {
  padding: 8px;
  background: var(--bg-muted);
  border-radius: 6px;
}

.cluster-result a {
  font-weight: 600;
  color: var(--text-primary);
}

.cluster-result p {
  margin: 4px 0 0 0;
  font-size: 0.85rem;
  color: var(--text-muted);
}

.cluster-more {
  padding: 8px;
  text-align: center;
  font-size: 0.85rem;
  color: var(--text-muted);
  background: var(--bg-muted);
  border-radius: 6px;
}

/* Timeline View */
.timeline-view {
  margin-bottom: 24px;
}

.timeline-container {
  margin-top: 16px;
}

.timeline-year {
  margin-bottom: 24px;
}

.timeline-year h5 {
  margin: 0 0 12px 0;
  font-size: 1rem;
  color: var(--text-primary);
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border-soft);
}

.timeline-year-results {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.timeline-item {
  display: flex;
  gap: 12px;
  padding: 8px;
  background: var(--bg-card);
  border-radius: 6px;
}

.timeline-date {
  min-width: 80px;
  font-size: 0.8rem;
  color: var(--text-muted);
}

.timeline-item a {
  font-weight: 600;
  color: var(--text-primary);
}

.no-timeline-data {
  padding: 24px;
  text-align: center;
  color: var(--text-muted);
  background: var(--bg-muted);
  border-radius: 8px;
}

/* Search Timeline */
.search-timeline {
  margin-bottom: 24px;
}

.search-timeline h4 {
  margin-bottom: 16px;
}

.timeline {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.timeline-step {
  display: flex;
  gap: 12px;
  align-items: flex-start;
}

.timeline-marker {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--bg-muted);
  margin-top: 4px;
  flex-shrink: 0;
}

.timeline-step.current .timeline-marker {
  background: var(--color-primary);
  box-shadow: 0 0 0 4px rgba(142, 68, 173, 0.2);
}

.timeline-step.completed .timeline-marker {
  background: var(--status-success);
}

.timeline-content {
  flex: 1;
  display: flex;
  gap: 8px;
  align-items: flex-start;
  justify-content: space-between;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border-soft);
}

.step-number {
  background: var(--color-primary);
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  font-weight: 600;
  flex-shrink: 0;
}

.step-details {
  flex: 1;
}

.step-details strong {
  display: block;
  margin-bottom: 4px;
  color: var(--text-primary);
}

.step-details p {
  margin: 0;
  color: var(--text-muted);
  font-size: 0.9rem;
}

.step-status {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
}

.timeline-step.pending .step-status {
  background: var(--bg-muted);
  color: var(--text-muted);
}

.timeline-step.in_progress .step-status {
  background: rgba(243, 156, 18, 0.2);
  color: var(--status-warning);
}

.timeline-step.completed .step-status {
  background: rgba(39, 174, 96, 0.2);
  color: var(--status-success);
}

.timeline-step.error .step-status {
  background: rgba(231, 76, 60, 0.2);
  color: var(--status-error);
}

/* Knowledge Graph */
.key-entities-container .graph-wrapper {
  height: 300px;
  width: 100%;
  border-radius: 8px;
  background-color: rgba(0,0,0,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
}
.knowledge-graph-svg-wrapper { width: 300px; height: 300px; }
.graph-node { cursor: pointer; }
.graph-node:hover circle { transform: scale(1.2); fill: var(--primary-color); }
.graph-node circle { fill: var(--secondary-color); }
.graph-node.center-node circle { fill: var(--success-color); }
.graph-node text { fill: var(--light-color); }

/* --- Knowledge Panel Styles --- */
.knowledge-panel .header-actions { display: flex; gap: 10px; }
.add-knowledge-btn {
  padding: 8px 15px;
  border-radius: 6px;
  border: none;
  background-color: var(--primary-color);
  color: white;
  font-weight: 600;
  cursor: pointer;
}
.add-knowledge-form form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.add-knowledge-form input,
.add-knowledge-form textarea {
  padding: 10px 15px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background-color: rgba(0,0,0,0.2);
  color: var(--light-color);
  font-family: inherit;
}
.add-knowledge-form button {
  align-self: flex-end;
  padding: 8px 20px;
  border: none;
  border-radius: 6px;
  background-color: var(--success-color);
  color: white;
  font-weight: 600;
  cursor: pointer;
}
.knowledge-controls {
  display: flex;
  gap: 15px;
}
.knowledge-controls .knowledge-search {
  flex-grow: 1;
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background-color: rgba(0,0,0,0.2);
  color: var(--light-color);
}
.knowledge-controls .knowledge-sort {
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background-color: rgba(0,0,0,0.2);
  color: var(--light-color);
}
.knowledge-item { padding: 15px; }
.knowledge-display-view, .knowledge-edit-view {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.knowledge-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}
.knowledge-time { font-size: 0.75rem; opacity: 0.6; }
.knowledge-actions { display: flex; gap: 8px; }
.action-button {
  background: none;
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: var(--light-color);
  padding: 4px 10px;
  border-radius: 5px;
  font-size: 0.8rem;
  cursor: pointer;
}
.action-button.delete { border-color: var(--error-color); color: var(--error-color); }
.action-button.save { border-color: var(--success-color); color: var(--success-color); }
.knowledge-edit-view textarea {
  width: 100%;
  min-height: 60px;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background-color: rgba(0,0,0,0.3);
  color: var(--light-color);
  font-family: inherit;
}

/* Confirmation Modal */
.modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1001;
}
.modal-content {
    background-color: var(--dark-color);
    padding: 30px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.1);
    text-align: center;
    max-width: 400px;
}
.modal-actions {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 15px;
}
.modal-button {
    padding: 8px 20px;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
}
.modal-button.cancel { background-color: var(--secondary-color); color: white; }
.modal-button.confirm { background-color: var(--error-color); color: white; }

/* Responsive Adjustments for Panels */
@media (max-width: 900px) {
  .agent-dashboard {
    grid-template-columns: 1fr;
  }
  .agent-left-column, .agent-right-column {
    overflow-y: visible;
  }
}

/* Image Gallery Styles */
.image-gallery-container {
  margin-bottom: 20px;
}

.image-gallery-container h4 {
  margin-bottom: 15px;
  color: var(--text-primary);
  font-size: 18px;
}

.image-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 10px;
}

.image-item {
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  background: var(--card-bg);
}

.image-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.image-item img {
  width: 100%;
  height: 150px;
  object-fit: cover;
  display: block;
}

.image-caption {
  padding: 10px;
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .image-grid {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 10px;
  }

  .image-item img {
    height: 120px;
  }
}
/* Add these styles to your existing App.css */

/* System Health Status Styles */
.soul-stat.system-health {
    border-left: 4px solid transparent;
    transition: border-left-color 0.3s ease;
}

.soul-stat.system-health.optimal {
    border-left-color: var(--status-success);
}

.soul-stat.system-health.overloaded {
    border-left-color: var(--status-warning);
}

.soul-stat.system-health.healing {
    border-left-color: var(--status-info);
}

.health-alerts {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-top: 8px;
    line-height: 1.4;
}

/* Soul Panel Specific Styles */
.soul-panel {
    padding: 16px;
    overflow-y: auto;
}

.soul-grid {
    display: grid;
    gap: 16px;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
}

.soul-stat {
    background: var(--bg-card);
    border-radius: var(--rounded);
    padding: 16px;
    border: 1px solid var(--border-soft);
    box-shadow: var(--shadow-xs);
}

.stat-value {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--color-primary);
}

.stat-bar {
    width: 100%;
    height: 8px;
    background: var(--bg-muted);
    border-radius: 4px;
    overflow: hidden;
}

.stat-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--color-secondary), var(--color-primary));
    border-radius: 4px;
    transition: width 0.5s ease;
}

/* Value bars in soul-values section */
.value-item {
    margin-bottom: 12px;
}

.value-item span {
    display: block;
    margin-bottom: 4px;
    font-size: 0.9rem;
    color: var(--text-muted);
}

.value-bar {
    width: 100%;
    height: 6px;
    background: var(--bg-muted);
    border-radius: 3px;
    overflow: hidden;
}

.value-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--color-secondary), var(--color-primary));
    border-radius: 3px;
    transition: width 0.5s ease;
}

/* Emotional state bars */
.emotion-item {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
    gap: 10px;
}

.emotion-item span:first-child {
    flex: 0 0 100px;
    font-size: 0.9rem;
    color: var(--text-muted);
}

.emotion-bar {
    flex: 1;
    height: 6px;
    background: var(--bg-muted);
    border-radius: 3px;
    overflow: hidden;
}

.emotion-fill {
    height: 100%;
    background: var(--color-accent);
    border-radius: 3px;
    transition: width 0.5s ease;
}

.emotion-value {
    flex: 0 0 40px;
    text-align: right;
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Soul actions */
.soul-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.soul-action-button {
    padding: 12px 16px;
    border-radius: 8px;
    border: none;
    background: var(--bg-muted);
    color: var(--text-primary);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
    text-align: center;
}

.soul-action-button:hover {
    background: var(--bg-hover);
    transform: translateY(-2px);
}

.soul-action-button.positive-feedback {
    background: var(--status-success);
    color: white;
}

.soul-action-button.negative-feedback {
    background: var(--status-error);
    color: white;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .soul-grid {
        grid-template-columns: 1fr;
    }
    
    .emotion-item span:first-child {
        flex: 0 0 80px;
    }
}

/* Ultra Power Mode styles */
.power-toggle { align-items: center; display: flex; gap: 12px; margin: 8px 0 14px; z-index: 20 }
.power-toggle .muted { opacity: 0.85 }
.btn.power-on { position: relative; overflow: visible; }
.btn.power-on::after { content: ''; position: absolute; inset: -6px; border-radius: 12px; background: linear-gradient(90deg, rgba(0,240,255,0.14), rgba(159,107,255,0.12)); filter: blur(10px); opacity: 0.85; z-index: -1; animation: powerPulse 2.8s ease-in-out infinite; }
.btn.power-on { box-shadow: 0 18px 60px rgba(46,199,255,0.08), 0 6px 24px rgba(159,107,255,0.06) }

@keyframes powerPulse{
  0% { transform: scale(0.995); opacity: 0.9 }
  50% { transform: scale(1.03); opacity: 1 }
  100% { transform: scale(0.995); opacity: 0.9 }
}

/* Small responsive tweak */
@media (max-width:720px){ .power-toggle { flex-direction: column; align-items: flex-start } }

/* ------------------------------------------------------------------ */
/* GoalsPanel styles: polished, premium look matching the app theme       */
/* Appended to keep component styles centralized; safe, non-breaking     */
/* ------------------------------------------------------------------ */
.goals-panel {
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.004));
  border: 1px solid var(--glass-border);
  border-radius: 14px;
  padding: 18px;
  box-shadow: 0 18px 60px rgba(2,6,23,0.6);
  color: var(--text);
}
.goals-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
.goals-header h3{margin:0;font-size:1.05rem;font-weight:800;color:var(--text)}
.goals-header .back-button{background:transparent;border:1px solid var(--glass-border);padding:8px 10px;border-radius:10px;color:var(--text);cursor:pointer}

.goals-description p{color:var(--muted);margin:0 0 12px 0}

.add-goal-section h4{margin:0 0 8px 0;color:var(--text)}
.goal-input-container{display:flex;gap:8px;align-items:center}
.goal-input-container input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--border-soft);background:transparent;color:var(--text)}
.goal-input-container button{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#061016;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}

.goals-stats{display:flex;gap:18px;margin:14px 0}
.goals-stats .stat{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));padding:12px;border-radius:10px;border:1px solid var(--glass-border);min-width:110px;text-align:center}
.stat-number{display:block;font-size:1.4rem;font-weight:900;color:var(--text)}
.stat-label{font-size:0.85rem;color:var(--muted)}

.goals-list h4{margin:6px 0 10px 0;color:var(--text)}
.goals-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
.goal-item{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(0,0,0,0.28), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);box-shadow:0 8px 28px rgba(0,0,0,0.6);display:flex;flex-direction:column;gap:8px}
.goal-item.completed{opacity:0.85;filter:grayscale(0.05)}
.goal-content{display:flex;flex-direction:column;gap:6px}
.goal-description{font-weight:700;color:var(--text)}
.goal-meta{display:flex;justify-content:space-between;align-items:center;gap:8px}
.status-badge{padding:6px 10px;border-radius:999px;font-weight:800;font-size:0.8rem}
.status-badge.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#061016}
.status-badge.in-progress{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006));color:var(--muted);border:1px solid var(--glass-border)}
.status-badge.completed{background:linear-gradient(90deg, rgba(0,200,120,0.12), rgba(0,200,120,0.06));color:var(--text)}

.goal-actions{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin-top:6px}
.goal-actions select{padding:8px;border-radius:8px;border:1px solid var(--border-soft);background:transparent;color:var(--text)}
.goal-actions button{background:transparent;border:1px solid var(--glass-border);padding:8px;border-radius:8px;cursor:pointer}

.empty-state{padding:18px;border-radius:10px;border:1px dashed rgba(255,255,255,0.03);color:var(--muted);background:transparent}

.goals-insights h4{margin:12px 0 8px 0;color:var(--text)}
.insights-content{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.004));padding:12px;border-radius:10px;border:1px solid var(--glass-border);color:var(--muted)}

@media (max-width:900px){
  .goals-container{grid-template-columns:1fr}
  .goals-stats{flex-direction:column}
}

/* ------------------------------------------------------------------ */
/* SearchPanel visuals: thumbnails, media cards, related topics chips     */
/* Enhances discoverability with image/video previews and polished list   */
/* ------------------------------------------------------------------ */
.search-panel {
  margin-top: 18px;
  background: linear-gradient(180deg, rgba(255,255,255,0.008), rgba(255,255,255,0.004));
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 20px 60px rgba(2,6,23,0.6);
  color: var(--text);
}
.search-panel .search-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
.search-panel .search-header h3{margin:0;font-size:1.05rem;color:var(--text);font-weight:800}
.search-panel .search-actions{display:flex;gap:8px;align-items:center}

.search-results-list{display:grid;gap:10px}
.result-item{
  display:flex;gap:12px;align-items:center;padding:12px;border-radius:10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));
  border: 1px solid rgba(255,255,255,0.02);
  transition: transform .16s var(--ease-in-out), box-shadow .16s var(--ease-in-out);
}
.result-item:hover{transform:translateY(-6px);box-shadow:0 28px 100px rgba(0,0,0,0.6)}
.result-thumb{flex:0 0 120px;height:72px;border-radius:8px;overflow:hidden;background:linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.1));display:flex;align-items:center;justify-content:center}
.result-thumb img{width:100%;height:100%;object-fit:cover;display:block}
.result-body{flex:1;display:flex;flex-direction:column;gap:6px}
.result-title{font-weight:800;color:var(--text);font-size:0.98rem}
.result-snippet{color:var(--muted);font-size:0.9rem;line-height:1.25}
.result-meta{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:0.85rem}
.result-actions{display:flex;gap:8px;align-items:center}

/* Media panel grid (images/videos) */
.media-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-top:8px}
.media-thumb{position:relative;border-radius:8px;overflow:hidden;border:1px solid var(--border-soft);background:var(--bg-surface);box-shadow:var(--elev-1)}
.media-thumb img, .media-thumb video{width:100%;height:110px;object-fit:cover;display:block}
.media-thumb.video::after{content:'';position:absolute;right:8px;top:8px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#041316;padding:6px 8px;border-radius:8px;font-weight:800}
.media-thumb .play-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:2rem;color:rgba(255,255,255,0.9);background:linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.16));opacity:0;transition:opacity .18s}
.media-thumb:hover .play-overlay{opacity:1}

/* Related topics / chips */
.related-topics{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
.topic-chip{padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--accent-2),var(--accent));color:#041316;font-weight:700;border:1px solid var(--glass-border);cursor:pointer;box-shadow:0 10px 36px rgba(0,0,0,0.45)}
.topic-chip:hover{transform:translateY(-3px)}

/* Compact list variant used in smaller areas */
.compact-results .result-item{padding:10px}

@media (max-width:900px){
  .result-item{flex-direction:row}
  .result-thumb{flex:0 0 84px;height:56px}
}
