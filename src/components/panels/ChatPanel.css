/* ChatPanel styles - deduplicated. Full definitions appear below; earlier thin/partial duplicates removed to avoid repetition. */

/* Constrain images, videos and iframes inside messages to avoid full-page previews */
.message-body img,
.message-body video,
.message-body iframe {
  max-width: 100%;
  height: auto;
  max-height: 480px;
  border-radius: 8px;
  display: block;
}

/* Code blocks and long text previews should be scrollable and capped */
.message-body pre,
.code-block-container,
.content-preview {
  max-height: 420px;
  overflow: auto;
}

/* Prevent markdown tables or long words from breaking layout */
.message-body table { width: 100%; overflow: auto; display: block; }
.message-body td, .message-body th { word-break: break-word; }

.drag-over { outline: 3px dashed rgba(0,150,255,0.28); background: linear-gradient(90deg, rgba(0,150,255,0.02), rgba(0,0,0,0.01)); }
.drag-over { outline: 2px dashed rgba(255,255,255,0.06); background: rgba(255,255,255,0.01); }

.hidden { display:none !important; }

/* Simple icon mappings (fallback classes used by ChatPanel) */
.icon-button i, .action-btn i { background-size:contain; background-repeat:no-repeat; background-position:center; }
.icon-upload i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M5 20h14v-2H5v2zm7-18L5.33 9h3.84v6h4.66V9h3.84L12 2z'/></svg>"); }
.icon-search i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM10 14a4 4 0 110-8 4 4 0 010 8z'/></svg>"); }
.icon-edit i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1 1 0 000-1.41l-2.34-2.34a1 1 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z'/></svg>"); }
.icon-copy i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zM19 5H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z'/></svg>"); }
.icon-regenerate i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M12 6V3L8 7l4 4V8c2.76 0 5 2.24 5 5 0 .66-.13 1.28-.36 1.84l1.46 1.46C19.8 15.36 20 14.7 20 14c0-4.42-3.58-8-8-8zM6.36 6.36L4.9 4.9C3.24 6.56 2.13 8.66 2 11h2c.13-1.74.83-3.34 1.97-4.47l1.39 1.39zM4 20v-2h2v2H4z'/></svg>"); }
.icon-speak i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M7 9v6h4l5 5V4l-5 5H7z'/></svg>"); }
.icon-expand i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M10 4H6v4H4V4c0-1.1.9-2 2-2h4v2zm8 0v2h-2V6h-4V4h4c1.1 0 2 .9 2 2zM4 14h2v4h4v2H6c-1.1 0-2-.9-2-2v-4zm16 0v4c0 1.1-.9 2-2 2h-4v-2h4v-4h2z'/></svg>"); }
.icon-insert i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M5 20h14v-2H5v2zm7-14l-5 5h3v4h4v-4h3l-5-5z'/></svg>"); }
.icon-open i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M3 3h18v2H3V3zm0 4h12v2H3V7zm0 4h18v6H3v-6z'/></svg>"); }
.icon-thumbs-up i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M1 21h4V9H1v12zM23 10c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.21 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h7c.82 0 1.54-.5 1.84-1.26L23 10z'/></svg>"); }
.icon-thumbs-down i { background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M15 3H8c-.82 0-1.54.5-1.84 1.26L1 14c0 1.1.9 2 2 2h6v-9h6V3zM23 3h-4v12h4V3z'/></svg>"); }

/* Responsive Design */
@media (max-width: 640px) {
  .chat-container {
    gap: var(--panel-gap);
  }

  .message-content {
    max-width: 85%;
  }

  .uploaded-file-card {
    width: 100%;
  }

  .chat-controls {
    flex-wrap: wrap;
  }
}

@media (max-width: 768px) {
  .uploaded-files-grid {
    gap: calc(var(--panel-gap) / 2);
  }

  .uploaded-file-card {
    width: calc(50% - var(--panel-gap) / 2);
  }
}

@media (max-width: 1024px) {
  .message-content {
    max-width: 80%;
  }
}
@media (max-width: 720px) {
  .uploaded-file-card { width: 46%; }
  .chat-title { font-size: 0.95rem; }
}
/* Modern Professional Chat Panel Styles */
.chat-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: transparent;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  border-radius: 12px;
  overflow: hidden;
  backdrop-filter: blur(var(--hud-backdrop-blur, 14px));
  -webkit-backdrop-filter: blur(var(--hud-backdrop-blur, 14px));
  border: 1px solid rgba(255, 255, 255, 0.161);
}

.chat-header {
  padding: 16px 20px;
  background: var(--header-bg, rgba(255,255,255,0.03));
  border-bottom: 1px solid var(--header-border, rgba(255,255,255,0.08));
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.chat-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #1a1a1a);
  margin: 0;
}

.chat-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

.search-box {
  position: relative;
}

.search-box input {
  padding: 8px 12px 8px 36px;
  border-radius: 20px;
  border: 1px solid var(--border-color, rgba(0,0,0,0.06));
  background: var(--bg-primary, var(--bg-surface));
  color: var(--text-primary, #1a1a1a);
  font-size: 14px;
  width: 200px;
  transition: all 0.2s ease;
}

.search-box input:focus {
  outline: none;
  border-color: rgba(255,255,255,0.04);
  width: 240px;
  box-shadow: 0 0 0 6px rgba(255,255,255,0.03);
}

.search-icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-secondary, #666);
  font-size: 14px;
}

.filter-buttons {
  display: flex;
  gap: 6px;
}

.filter-buttons button {
  padding: 6px 12px;
  border-radius: 16px;
  border: 1px solid var(--panel-border, rgba(0,0,0,0.06));
  background: var(--bg-primary, var(--bg-surface));
  color: var(--text-secondary, var(--text-muted));
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.12s ease;
}

.filter-buttons button.active,
.filter-buttons button:hover {
  background: var(--text-primary);
  color: var(--bg-page);
  border-color: rgba(255,255,255,0.02);
}

.conversation-history {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.empty-chat-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 40px 20px;
  text-align: center;
  color: var(--text-secondary, #666);
}

/* Minimal ultra-professional welcome */
.minimal-welcome { padding: 48px 24px; }
.minimal-welcome .minimal-inner { max-width: 520px; display:flex; flex-direction:column; gap:20px; align-items:center; }
.brand-compact { display:flex; gap:14px; align-items:center; }
.brand-mark { width:auto; height:auto; border-radius:0; display:flex; align-items:center; justify-content:flex-start; font-weight:700; font-size:26px; background:transparent; color:inherit; box-shadow:none; padding:0; }
.brand-name { font-size:20px; font-weight:700; color:var(--text-primary,#111); }
.brand-tag { font-size:13px; color:var(--text-secondary,#666); margin-top:2px; }

/* Premium logo animations and welcome polish */
.brand-logo, .brand-logo-large {
  display: inline-block;
  font-weight: 900;
  letter-spacing: 0.6px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  user-select: text;
  -webkit-user-select: text;
  color: var(--text-primary);
  background: transparent !important;
  text-shadow: none;
}

.brand-logo { font-size: 1.05rem; }
.brand-logo-large { font-size: 2.2rem; }

/* make the typographic logo keyboard-focusable and accessible */
.brand-logo:focus, .brand-logo-large:focus { outline: none; box-shadow: 0 0 0 4px rgba(0,212,255,0.08); }

/* Glassy header variant for premium look */
.brand-premium.chat-header {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-bottom: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 6px 24px rgba(2,6,23,0.45);
}

/* Enforce monochrome AION brand for this panel to override any residual gradients */
.chat-header .brand-logo, .chat-header .brand-logo-large { color: var(--text-primary) !important; background: transparent !important; -webkit-background-clip: initial !important; background-clip: initial !important; text-shadow: none !important; }

/* Welcome screen refinements */
.minimal-welcome { background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); border-radius:12px; padding:36px; box-shadow: 0 12px 40px rgba(0,0,0,0.6); }
.minimal-inner { display:flex; flex-direction:column; align-items:center; gap:18px; }
.brand-mark { width:72px; height:72px; border-radius:999px; background: transparent !important; color: inherit; box-shadow:none !important; border: 0 !important; }
.welcome-ctas { display:flex; gap:12px; }
.primary-cta { padding:12px 18px; border-radius:12px; font-weight:700; background: var(--text-primary); color: var(--bg-page); border:none; box-shadow: 0 12px 30px rgba(0,0,0,0.5); }
.ghost-cta { padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--text-primary); }
.welcome-context h4 { margin:0; }

/* Ensure attachments and composer are visually elevated */
.chat-composer { display:flex; gap:8px; align-items:center; padding:8px 12px; border-top:1px solid rgba(255,255,255,0.012); background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06)); position: sticky; bottom: 0; z-index: 40; }
.composer-input { width: 100%; min-height:40px; border-radius:999px; padding:8px 10px; border:1px solid rgba(255,255,255,0.02); background: rgba(16,18,20,0.6); color:var(--text-primary); resize:none; font-size:0.95rem; }

/* Force composer actions to be compact dark icons */
.chat-composer .action-btn, .chat-composer .icon-button, .chat-composer .rich-text-button, .chat-composer .file-upload-button {
  width:36px; height:36px; border-radius:999px; background: rgba(10,12,14,0.64); border:1px solid rgba(255,255,255,0.02); box-shadow: 0 6px 18px rgba(0,0,0,0.45); color:var(--text-primary); padding:6px; display:inline-flex; align-items:center; justify-content:center;
}

/* Remove any floating white backgrounds inside composer */
.chat-composer button, .chat-composer input, .chat-composer .attachment-item { background: transparent !important; }

/* Strong overrides to remove any bright/white composer pills left by other styles */
.chat-composer, .composer-input, .composer-input-wrapper, .attachment-item, .attachment-thumb {
  background: rgba(16,18,20,0.6) !important;
  border-color: rgba(255,255,255,0.02) !important;
  color: var(--text-primary) !important;
}
.chat-composer .primary-cta, .chat-composer .ghost-cta { background: transparent !important; border: 1px solid rgba(255,255,255,0.04) !important; color: var(--text-primary) !important; }

/* Composer attachment previews (thumbnails inside the composer) */
.attachment-previews {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  padding: 8px 0 0 0;
  max-width: 100%;
}
.attachment-item {
  width: 72px;
  height: 72px;
  min-width: 48px;
  min-height: 48px;
  border-radius: 8px;
  overflow: hidden;
  background: var(--bg-card, rgba(255,255,255,0.02));
  border: 1px solid var(--border-soft, rgba(0,0,0,0.06));
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}
.attachment-thumb {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.attachment-item .remove-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: rgba(0,0,0,0.48);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
  cursor: pointer;
}

@media (max-width: 640px) {
  .attachment-item { width: 56px; height: 56px; }
}

/* Subtle animated background element for welcome screen */
.minimal-welcome::after {
  content: '';
  position: absolute;
  width: 220px;
  height: 220px;
  right: 12%;
  top: -40px;
  background: radial-gradient(circle at 30% 30%, rgba(0,212,255,0.06), transparent 30%), radial-gradient(circle at 70% 70%, rgba(0,86,255,0.04), transparent 30%);
  filter: blur(28px);
  pointer-events: none;
}
.welcome-ctas { display:flex; gap:12px; }
.primary-cta { background: var(--text-primary); color: var(--bg-page); padding:10px 16px; border-radius:10px; border:none; font-weight:600; cursor:pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
.ghost-cta { background:transparent; color:var(--text-primary); padding:10px 16px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); cursor:pointer; font-weight:600; }
.primary-cta:hover { transform:translateY(-2px); }
.ghost-cta:hover { background: rgba(0,0,0,0.02); }

.welcome-context {
  max-width: 600px;
  margin-bottom: 32px;
}

.welcome-context h4 {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-primary, #1a1a1a);
  margin: 0 0 12px 0;
}

.welcome-context p {
  font-size: 15px;
  line-height: 1.5;
  margin: 0 0 20px 0;
}

.welcome-stats {
  display: flex;
  justify-content: center;
  gap: 32px;
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid var(--border-color, #e1e5e9);
}

.stat-item {
  text-align: center;
}

.stat-value {
  display: block;
  font-size: 18px;
  font-weight: 700;
  color: var(--primary-color, #0066ff);
  margin-bottom: 4px;
}

.stat-label {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-secondary, #666);
}

/* Message Styles */
.message-wrapper {
  display: flex;
  gap: 12px;
  max-width: 85%;
  animation: fadeIn 0.3s ease;
}

.message-wrapper.user {
  align-self: flex-end;
  flex-direction: row-reverse;
}

.user-avatar, .aion-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-top: 4px;
}

.user-avatar {
  background: var(--user-avatar-bg, #0066ff);
  color: white;
  font-weight: 600;
}

.aion-avatar {
  background: var(--aion-avatar-bg, #6c757d);
  color: white;
  font-weight: 600;
}

.avatar-pulse {
  position: absolute;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: rgba(108, 117, 125, 0.3);
  animation: pulse 2s infinite;
}

.message-content, .aion-message {
  background: rgba(255,255,255,0.02);
  border-radius: 18px;
  padding: 12px 16px;
  box-shadow: none;
  position: relative;
  flex: 1;
  border: 1px solid rgba(255,255,255,0.08);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.message-wrapper.user .message-content {
  background: var(--user-message-bg, #0066ff);
  color: var(--user-message-color, white);
  border-bottom-right-radius: 6px;
}

.message-wrapper .aion-message {
  border-bottom-left-radius: 6px;
}

.message-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
  font-size: 13px;
}

.user-header {
  justify-content: flex-end;
}

.username {
  font-weight: 600;
  color: var(--text-primary, #1a1a1a);
}

.message-wrapper.user .username {
  color: var(--user-message-color, white);
}

.time {
  color: var(--text-tertiary, #999);
  font-size: 11px;
}

.message-wrapper.user .time {
  color: rgba(255, 255, 255, 0.8);
}

.message-id {
  font-size: 10px;
  color: var(--text-tertiary, #999);
  margin-left: auto;
}

.message-wrapper.user .message-id {
  color: rgba(255, 255, 255, 0.7);
}

.mood-indicator {
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 11px;
  background: rgba(0, 0, 0, 0.08);
  color: var(--text-secondary, #666);
  text-transform: capitalize;
}

.message-body {
  line-height: 1.5;
  font-size: 15px;
  word-wrap: break-word;
}

.message-wrapper.user .message-body {
  color: var(--user-message-color, white);
}

.user-question {
  margin-bottom: 8px;
}

/* Code Blocks */
.code-block-container {
  margin: 16px 0;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.code-block-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: #2d2d2d;
  color: #ccc;
  font-family: 'Fira Code', Monaco, Consolas, monospace;
  font-size: 13px;
}

.code-language {
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.5px;
}

/* Ensure the AION username and mood label are always visible
   Render them as high-contrast pills so 'AION contemplative' is readable
   regardless of the surrounding message background or theme. */
.message-wrapper .aion-message .message-header .username {
  display: inline-block;
  background: rgba(255,255,255,0.92) !important;
  color: #071426 !important;
  padding: 4px 10px !important;
  border-radius: 12px !important;
  font-weight: 800 !important;
  box-shadow: 0 8px 20px rgba(8,12,20,0.06) !important;
  margin-right: 8px;
}

.message-wrapper .aion-message .message-header .mood-indicator {
  display: inline-block;
  background: rgba(255,255,255,0.86) !important;
  color: #071426 !important;
  padding: 2px 8px !important;
  border-radius: 12px !important;
  font-size: 11px !important;
  font-weight: 600 !important;
  border: 1px solid rgba(7,20,36,0.04) !important;
}

/* Keep user message username styling intact for 'You' */
.message-wrapper.user .username { background: transparent !important; color: var(--user-message-color, white) !important; box-shadow: none !important; padding: 0 !important; }

/* Allow selecting the AION username and mood label with mouse/text selection */
.message-wrapper .aion-message .message-header .username,
.message-wrapper .aion-message .message-header .mood-indicator {
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  cursor: text !important;
}

.code-actions {
  display: flex;
  gap: 8px;
}

.action-btn {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: #ccc;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 4px;
}

.action-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.action-btn.copied {
  background: #4caf50;
  color: white;
}

/* Message Actions */
.message-actions {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.aion-message:hover .message-actions,
.message-content:hover .message-actions {
  opacity: 1;
}

/* Confidence Meter */
.confidence-meter {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  font-size: 13px;
}

.confidence-label {
  color: var(--text-secondary, #666);
}

.confidence-bar {
  flex: 1;
  height: 6px;
  background: var(--bg-tertiary, #e9ecef);
  border-radius: 3px;
  overflow: hidden;
}

.confidence-fill {
  height: 100%;
  background: linear-gradient(to right, #4caf50, #8bc34a);
  border-radius: 3px;
  transition: width 0.5s ease;
}

.confidence-value {
  font-weight: 600;
  color: var(--text-primary, #1a1a1a);
  min-width: 40px;
  text-align: right;
}

/* Feedback Section */
.feedback-section {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-color, #e1e5e9);
  font-size: 13px;
  color: var(--text-secondary, #666);
}

.feedback-buttons {
  display: flex;
  gap: 4px;
}

.feedback-btn {
  background: transparent;
  border: 1px solid var(--border-color, #e1e5e9);
  border-radius: 16px;
  padding: 4px 12px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.feedback-btn:hover,
.feedback-btn.active {
  background: var(--primary-color, #0066ff);
  color: white;
  border-color: var(--primary-color, #0066ff);
}

/* Message Metadata */
.message-metadata {
  margin-top: 16px;
  padding: 12px;
  background: var(--bg-tertiary, #f8f9fa);
  border-radius: 8px;
  font-size: 13px;
}

.metadata-item {
  display: flex;
  margin-bottom: 6px;
}

.metadata-item:last-child {
  margin-bottom: 0;
}

.metadata-label {
  font-weight: 600;
  color: var(--text-secondary, #666);
  min-width: 100px;
}

.metadata-value {
  color: var(--text-primary, #1a1a1a);
}

/* Typing Indicator */
.typing-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-secondary, #666);
  font-size: 14px;
}

.typing-dots {
  display: flex;
  gap: 3px;
}

.typing-dots span {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--text-secondary, #666);
  animation: bounce 1.4s infinite ease-in-out both;
}

.typing-dots span:nth-child(1) { animation-delay: -0.32s; }
.typing-dots span:nth-child(2) { animation-delay: -0.16s; }

/* Streaming Message */
.aion-message.streaming {
  border: 1px solid var(--border-color, #e1e5e9);
}

.streaming-controls {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-color, #e1e5e9);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.streaming-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-secondary, #666);
}

.wave-animation {
  display: flex;
  align-items: flex-end;
  height: 20px;
  gap: 2px;
}

.wave-animation div {
  width: 3px;
  background: var(--primary-color, #0066ff);
  border-radius: 2px;
  animation: wave 1.2s infinite ease-in-out;
}

.wave-animation div:nth-child(1) { height: 8px; animation-delay: -0.4s; }
.wave-animation div:nth-child(2) { height: 12px; animation-delay: -0.2s; }
.wave-animation div:nth-child(3) { height: 16px; animation-delay: 0s; }

.cancel-button {
  background: transparent;
  border: 1px solid var(--error-color, #dc3545);
  border-radius: 4px;
  padding: 4px 8px;
  color: var(--error-color, #dc3545);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.cancel-button:hover {
  background: var(--error-color, #dc3545);
  color: white;
}

/* Edit Container */
.edit-container {
  margin-top: 8px;
}

.edit-textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--border-color, #e1e5e9);
  border-radius: 8px;
  resize: vertical;
  font-family: inherit;
  font-size: 14px;
  line-height: 1.5;
  margin-bottom: 8px;
}

.edit-textarea:focus {
  outline: none;
  border-color: var(--primary-color, #0066ff);
  box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
}

.edit-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.edit-actions button {
  padding: 6px 12px;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.edit-actions .cancel {
  background: transparent;
  border: 1px solid var(--border-color, #e1e5e9);
  color: var(--text-secondary, #666);
}

.edit-actions .cancel:hover {
  background: var(--bg-tertiary, #e9ecef);
}

.edit-actions .save {
  background: var(--primary-color, #0066ff);
  border: 1px solid var(--primary-color, #0066ff);
  color: white;
}

.edit-actions .save:hover {
  background: var(--primary-dark, #0052cc);
  border-color: var(--primary-dark, #0052cc);
}

/* Chat Footer */
.chat-footer {
  padding: 12px 20px;
  background: var(--bg-secondary, #ffffff);
  border-top: 1px solid var(--border-color, #e1e5e9);
  flex-shrink: 0;
}

.conversation-stats {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  color: var(--text-secondary, #666);
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes bounce {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1); }
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.7; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes wave {
  0%, 100% { height: 8px; }
  50% { height: 16px; }
}

/* Premium welcome screen */
.premium-welcome {
  gap: 18px;
}

.premium-badge {
  display:flex; align-items:center; gap:16px; margin-bottom:14px;
}

.avatar-badge { position: relative; }
.avatar-circle { width:74px; height:74px; border-radius:18px; background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); display:flex; align-items:center; justify-content:center; color:var(--text-primary); font-weight:800; font-size:28px; }
.premium-star { position:absolute; right:-6px; top:-8px; background:gold; color:#222; width:22px; height:22px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px; box-shadow:0 2px 6px rgba(0,0,0,0.2); }

.premium-title h1 { margin:0; font-size:22px; color:var(--text-primary); }
.premium-title .subtitle { margin:4px 0 0 0; color:var(--text-secondary); font-size:13px; }
.lead { font-size:15px; color:var(--text-primary); margin-bottom:12px; }
.welcome-actions { display:flex; gap:12px; justify-content:center; margin-top:12px; }
.primary-cta { background: var(--text-primary); color: var(--bg-page); padding:10px 16px; border-radius:10px; border:none; cursor:pointer; }
.ghost-cta { background:transparent; color:var(--text-primary); padding:10px 16px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); cursor:pointer; }

/* Composer styles */
.chat-composer { display:flex; gap:12px; align-items:center; padding:10px 14px; border-top:1px solid rgba(255,255,255,0.02); background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent); }
.composer-left { display:flex; align-items:center; gap:8px; }
.composer-middle { flex:1; }
.composer-input { width:100%; padding:10px 12px; border-radius:999px; border:1px solid rgba(255,255,255,0.012); background: rgba(255,255,255,0.015); color:var(--text-primary); }
.composer-right { display:flex; gap:8px; }
.send-btn { background: var(--text-primary); color: var(--bg-page); padding:10px 14px; border-radius:10px; border:none; cursor:pointer; }

/* Dark Theme Support */
.dark-theme .chat-container {
  --bg-primary: #1a1a1a;
  --bg-secondary: #2d2d2d;
  --bg-tertiary: #3d3d3d;
  --text-primary: #f0f0f0;
  --text-secondary: #a0a0a0;
  --text-tertiary: #707070;
  --border-color: #404040;
  --primary-color: #3b82f6;
  --primary-dark: #2563eb;
  --user-message-bg: #3b82f6;
  --user-message-color: #ffffff;
  --aion-avatar-bg: #6b7280;
}

/* Responsive Design */
@media (max-width: 768px) {
  .chat-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  
  .chat-controls {
    width: 100%;
    justify-content: space-between;
  }
  
  .search-box input {
    width: 160px;
  }
  
  .search-box input:focus {
    width: 180px;
  }
  
  .message-wrapper {
    max-width: 90%;
  }
  
  .welcome-stats {
    flex-direction: column;
    gap: 16px;
  }
}

@media (max-width: 480px) {
  .chat-controls {
    flex-direction: column;
    gap: 8px;
  }
  
  .filter-buttons {
    width: 100%;
    justify-content: space-between;
  }
  
  .search-box {
    width: 100%;
  }
  
  .search-box input {
    width: 100%;
  }
  
  .message-wrapper {
    max-width: 95%;
  }
  
  .message-actions {
    position: static;
    opacity: 1;
    margin-top: 8px;
    justify-content: flex-end;
  }

  /* Mobile-specific composer and layout fixes */
  .chat-composer {
    padding: 12px 10px;
    gap: 8px;
    align-items: flex-end;
  }

  /* Larger, more readable composer input on phones */
  .composer-input, .composer-input textarea, .composer-input-wrapper .composer-input {
    font-size: 16px !important;
    min-height: 56px !important;
    padding: 12px 14px !important;
    border-radius: 12px !important;
  }

  /* Make action icons easy to tap */
  .chat-composer .action-btn, .chat-composer .icon-button, .chat-composer .file-upload-button {
    width: 44px !important;
    height: 44px !important;
    padding: 8px !important;
    border-radius: 10px !important;
  }

  /* Ensure conversation history leaves room for sticky composer */
  .conversation-history {
    padding-bottom: 90px; /* composer + safe area */
  }

  /* Lightbox and overlays full-screen on mobile */
  .lightbox-overlay {
    padding: 12px;
  }
  .lightbox-content { width: 100%; height: 100%; max-width: none; border-radius: 8px; }
}

/* High-specificity overrides to guarantee brand/header visibility and text selection
   Placed in ChatPanel.css so component-scoped styles win over global theme rules. */
.chat-header .brand, .chat-header .brand-logo, .chat-header .brand-name, .chat-header .brand-sub {
  /* Remove boxed badge — keep typographic AION only */
  background: transparent !important;
  color: var(--text-primary) !important;
  border: 0 !important;
  box-shadow: none !important;
}
.chat-header .brand-logo {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: auto;
  height: auto;
  border-radius: 0;
  font-weight: 900;
  font-size: 1.05rem;
}
.chat-header .brand-name, .chat-header .brand-sub {
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  cursor: text !important;
}

/* Make message header labels selectable and high-contrast */
.chat-header + .conversation-history .message-header .username,
.message-header .username,
A.message-header .mood-indicator {
  color: #ffffff !important;
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  cursor: text !important;
}
/* End of ChatPanel.css */