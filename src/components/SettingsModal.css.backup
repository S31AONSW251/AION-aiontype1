/* SettingsModal.css â€” refined, theme-aware settings modal for AION */

/* Design tokens & fallbacks (kept local to modal but honoring global vars) */
:root {
  --sm-modal-backdrop: rgba(2,6,23,0.5);
  --sm-content-radius: 14px;
  --sm-padding: 20px;
  --sm-accent: linear-gradient(90deg, rgba(124,58,237,0.98), rgba(0,212,255,0.98));
}

/* Base modal overlay & content */
.settings-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 28px;
  background: var(--modal-backdrop, var(--sm-modal-backdrop));
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
}

.settings-content {
  width: min(1100px, 96%);
  max-height: 90vh;
  overflow-y: auto;
  border-radius: var(--sm-content-radius);
  padding: var(--sm-padding);
  box-shadow: 0 30px 80px rgba(2,6,23,0.6);
  position: relative;
  transition: transform 180ms var(--ease-in-out, cubic-bezier(.2,.9,.2,1)), opacity 180ms ease;
  transform-origin: center;
  background: linear-gradient(180deg, rgba(8,10,14,0.92), rgba(12,14,18,0.86));
  color: var(--text, #e6f6ff);
  border: 1px solid rgba(255,255,255,0.04);
  overflow: hidden;
}

/* Decorative accent bar at top */
.settings-content::before {
  content: '';
  position: absolute;
  left: 0; right: 0; top: 0;
  height: 4px;
  background: var(--sm-accent);
  opacity: 0.98;
  border-top-left-radius: calc(var(--sm-content-radius) - 6px);
  border-top-right-radius: calc(var(--sm-content-radius) - 6px);
}

/* Light theme (when ancestor or body sets it) */
html.light-theme .settings-content,
body.light-theme .settings-content,
.chat-container.light-theme .settings-content {
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.96));
  color: var(--text-dark, #071426);
  border: 1px solid rgba(7,20,36,0.04);
  box-shadow: 0 18px 48px rgba(10,12,20,0.12);
}

/* Header */
.settings-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
}

.settings-header h2 {
  margin: 0;
  font-size: 1.35rem;
  letter-spacing: 0.2px;
  font-weight: 900;
}

.settings-subtitle { color: var(--muted, rgba(230,240,255,0.55)); font-size: 0.92rem; margin-top: 4px; }

.header-left { display:flex; gap:12px; align-items:center; }

.close-button {
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.04);
  color: var(--text, #e6f6ff);
  padding: 6px 10px;
  border-radius: 10px;
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}

.close-button:hover { transform: translateY(-3px); box-shadow: 0 8px 24px rgba(2,6,23,0.45); }

/* Grid layout for settings groups */
.settings-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 18px;
}

.settings-group {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  border-radius: 12px;
  padding: 14px;
  border: 1px solid rgba(255,255,255,0.03);
  min-height: 84px;
  box-shadow: 0 6px 20px rgba(2,6,23,0.45);
}

.settings-group h3 { margin: 0 0 8px 0; font-size: 1rem; font-weight: 800; }

.setting-item { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
.setting-item label { font-weight:700; font-size:0.95rem; }

.setting-item input[type="text"], .setting-item input[type="password"], .setting-item select { padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background: rgba(255,255,255,0.02); color: inherit; }
.setting-item input[type="range"] { width: 220px; }

/* Modern toggle */
.switch { position: relative; display: inline-block; width: 46px; height: 26px; }
.switch input { opacity:0; width:0; height:0; }
.switch .slider { position:absolute; inset:0; border-radius:999px; background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.03); transition: .18s; }
.switch .slider::before { content: ''; position:absolute; width:20px; height:20px; left:3px; top:3px; background: #fff; border-radius:50%; box-shadow: 0 6px 18px rgba(2,6,23,0.32); transition: .18s; }
.switch input:checked + .slider { background: var(--sm-accent); border-color: rgba(0,0,0,0.12); }
.switch input:checked + .slider::before { transform: translateX(20px); }

/* Footer actions */
.settings-footer { display:flex; align-items:center; justify-content:flex-end; gap:12px; margin-top:14px; }
.test-button, .save-button { padding:8px 14px; border-radius:10px; font-weight:800; cursor:pointer; border:1px solid rgba(255,255,255,0.04); background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); color: inherit; }
.test-button:hover, .save-button:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
.save-button { background: var(--sm-accent); color: #fff; border: none; }

.muted.small { font-size:12px; color: var(--text-muted, rgba(255,255,255,0.65)); }
.chat-container.light-theme .muted.small { color: rgba(7,20,36,0.6); }

/* Explicit dark theme tokens for modal -- keep contrast consistent */
html.dark-theme .settings-content,
body.dark-theme .settings-content,
.chat-container.dark-theme .settings-content,
.settings-content.dark-theme { --bg-surface: rgba(10,12,14,0.88); --glass-border: rgba(255,255,255,0.04); --bg-card-plain: rgba(16,18,20,0.6); }

/* Light theme group cards */
html.light-theme .settings-group, body.light-theme .settings-group, .chat-container.light-theme .settings-group { background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.96)); border:1px solid rgba(7,20,36,0.04); box-shadow: 0 8px 20px rgba(10,12,20,0.06); }

/* Responsive */
@media (max-width: 980px) { .settings-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 640px) { .settings-grid { grid-template-columns: 1fr; } .setting-item { flex-direction: column; align-items:flex-start; } .settings-footer { flex-direction: column-reverse; align-items:stretch; } }

/* Accessibility: focus states */
.setting-item input:focus, .setting-item select:focus, .close-button:focus, .test-button:focus, .save-button:focus { outline: 3px solid rgba(2,100,210,0.12); outline-offset: 2px; }

/* Dark-mode cleanup: ensure no bright boxes appear */
.chat-container.dark-theme .settings-group, .settings-content.dark-theme { background: linear-gradient(180deg, rgba(6,8,12,0.88), rgba(10,12,14,0.78)); border:1px solid rgba(255,255,255,0.03); box-shadow: 0 10px 30px rgba(2,6,23,0.55); }
.chat-container.dark-theme .settings-group .setting-item, .chat-container.dark-theme .settings-group .setting-item > * { background: transparent !important; box-shadow:none !important; }
.chat-container.dark-theme .setting-item input[type="text"], .chat-container.dark-theme .setting-item input[type="password"], .chat-container.dark-theme .setting-item select, .chat-container.dark-theme .setting-item textarea { background: rgba(255,255,255,0.02) !important; color: var(--text, #e6f6ff) !important; border: 1px solid rgba(255,255,255,0.03) !important; }
.chat-container.dark-theme .switch .slider { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.02); }
.chat-container.dark-theme .settings-group .panel, .chat-container.dark-theme .settings-group .card, .chat-container.dark-theme .settings-group .panel-card { background: transparent !important; border: none !important; box-shadow:none !important; }
.chat-container.dark-theme .muted.small { color: rgba(230,246,255,0.52); }
.chat-container.dark-theme .test-button, .chat-container.dark-theme .save-button { border-color: rgba(255,255,255,0.04); }

/* small polish */
.settings-content .help-link { color: rgba(200,230,255,0.8); text-decoration: underline; }

/* end SettingsModal.css */
