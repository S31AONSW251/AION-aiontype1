/* SettingsModal.css â€” attractive, theme-aware settings modal for AION */

/* Base modal overlay & content */
.settings-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 24px;
  background: rgba(2,6,23,0.45); /* dim backdrop, dark by default */
  backdrop-filter: blur(6px);
}

.settings-content {
  width: min(1100px, 96%);
  max-height: 90vh;
  overflow-y: auto;
  border-radius: 14px;
  padding: 20px;
  box-shadow: 0 30px 80px rgba(2,6,23,0.7);
  position: relative;
  transition: transform 0.16s ease, opacity 0.16s ease;
  transform-origin: center;
}

/* Light / Dark theme root-aware styles */
/* Dark theme (default panel appearance) */
.chat-container.dark-theme .settings-modal,
.settings-modal.dark-theme,
:root .settings-modal {
  background: rgba(2,6,23,0.45);
}

.chat-container.dark-theme .settings-content,
.settings-content.dark-theme,
:root .settings-content {
  background: linear-gradient(180deg, rgba(6,8,12,0.96), rgba(10,12,14,0.92));
  color: var(--text, #e6f6ff);
  border: 1px solid rgba(255,255,255,0.04);
}

/* Light theme adjustments when an ancestor sets light-theme class on chat-container */
.chat-container.light-theme .settings-modal {
  background: rgba(255,255,255,0.28);
}

.chat-container.light-theme .settings-content {
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.96));
  color: var(--text-dark, #071426);
  border: 1px solid rgba(7,20,36,0.04);
  box-shadow: 0 18px 48px rgba(10,12,20,0.12);
}

/* Header */
.settings-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
}

.settings-header h2 {
  margin: 0;
  font-size: 1.35rem;
  letter-spacing: 0.4px;
}

.close-button {
  background: transparent;
  border: none;
  font-size: 1.6rem;
  line-height: 1;
  color: inherit;
  cursor: pointer;
  padding: 6px 8px;
  border-radius: 8px;
  transition: background 0.12s ease, transform 0.12s ease;
}

.close-button:hover { background: rgba(255,255,255,0.02); transform: translateY(-2px); }

/* Grid layout for settings groups */
.settings-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

.settings-group {
  /* Use design tokens so the card matches light/dark themes */
  background: var(--bg-surface, rgba(11,14,18,0.6));
  border-radius: 10px;
  padding: 12px;
  border: 1px solid var(--glass-border, rgba(255,255,255,0.03));
  min-height: 84px;
  box-shadow: 0 8px 28px rgba(2,6,23,0.45);
}

.settings-group h3 {
  margin: 0 0 8px 0;
  font-size: 1rem;
  font-weight: 800;
}

.setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.setting-item label { font-weight: 700; font-size: 0.95rem; }

.setting-item input[type="text"],
.setting-item input[type="password"],
.setting-item select,
.setting-item input[type="range"] {
  font-size: 0.95rem;
}

.setting-item input[type="text"],
.setting-item input[type="password"],
.setting-item select {
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid var(--glass-border, rgba(255,255,255,0.04));
  background: var(--bg-card-plain, rgba(255,255,255,0.02));
  color: inherit;
}

/* Range inputs look native but spaced nicely */
.setting-item input[type="range"] { width: 220px; }

/* Toggle switch */
.switch {
  position: relative;
  display: inline-block;
  width: 46px;
  height: 26px;
}
.switch input { opacity: 0; width: 0; height: 0; }
.switch .slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(255,255,255,0.08);
  transition: .2s;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.03);
}
.switch .slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  top: 3px;
  background: white;
  border-radius: 50%;
  transition: .2s;
  box-shadow: 0 6px 18px rgba(2,6,23,0.32);
}
.switch input:checked + .slider { background: linear-gradient(90deg, rgba(124,58,237,0.98), rgba(0,212,255,0.98)); }
.switch input:checked + .slider:before { transform: translateX(20px); background: white; }

/* Footer actions */
.settings-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 12px;
}

.test-button, .save-button {
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.04);
  background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  color: inherit;
  cursor: pointer;
  font-weight: 800;
}

.test-button:hover, .save-button:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.45); }

.save-button {
  background: linear-gradient(90deg, rgba(124,58,237,0.98), rgba(0,212,255,0.98));
  color: white;
  border: none;
}

/* Small muted text */
.muted.small { font-size: 12px; color: var(--text-muted, rgba(255,255,255,0.6)); }
.chat-container.light-theme .muted.small { color: rgba(7,20,36,0.6); }

/* Explicit dark theme tweaks to ensure good contrast inside modal */
.chat-container.dark-theme .settings-content,
.settings-content.dark-theme {
  --bg-surface: rgba(10,12,14,0.85);
  --glass-border: rgba(255,255,255,0.04);
  --bg-card-plain: rgba(16,18,20,0.6);
}

/* Light theme overrides for group cards */
.chat-container.light-theme .settings-group,
body.light-theme .settings-group {
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.96));
  border: 1px solid rgba(7,20,36,0.04);
  box-shadow: 0 8px 20px rgba(10,12,20,0.06);
}

/* Responsive */
@media (max-width: 980px) {
  .settings-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 640px) {
  .settings-grid { grid-template-columns: 1fr; }
  .setting-item { flex-direction: column; align-items: flex-start; }
  .settings-footer { flex-direction: column-reverse; align-items: stretch; }
}

/* Accessibility: focus states */
.setting-item input:focus, .setting-item select:focus, .close-button:focus, .test-button:focus, .save-button:focus {
  outline: 3px solid rgba(2,100,210,0.08);
  outline-offset: 2px;
}

/* Make placeholder text readable in light-mode */
.chat-container.light-theme .setting-item input[type="text"],
.chat-container.light-theme .setting-item input[type="password"],
.chat-container.light-theme .setting-item select {
  background: white; color: var(--text-dark, #071426);
}

/* --------------------- Dark mode cleanup: remove bright inner boxes --------------------- */
/* These overrides ensure the small white/bright boxes don't appear in dark theme */
.chat-container.dark-theme .settings-group,
.settings-content.dark-theme {
  background: linear-gradient(180deg, rgba(6,8,12,0.88), rgba(10,12,14,0.78));
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 10px 30px rgba(2,6,23,0.55);
}

.chat-container.dark-theme .settings-group .setting-item,
.chat-container.dark-theme .settings-group .setting-item > * {
  background: transparent !important;
  box-shadow: none !important;
}

/* Inputs/selects keep a subtle dark fill, not a white card */
.chat-container.dark-theme .setting-item input[type="text"],
.chat-container.dark-theme .setting-item input[type="password"],
.chat-container.dark-theme .setting-item select,
.chat-container.dark-theme .setting-item textarea {
  background: rgba(255,255,255,0.02) !important; /* subtle glass */
  color: var(--text, #e6f6ff) !important;
  border: 1px solid rgba(255,255,255,0.03) !important;
}

/* Make switches less bright */
.chat-container.dark-theme .switch .slider {
  background: rgba(255,255,255,0.03);
  border-color: rgba(255,255,255,0.02);
}

/* Remove inner strong rounded white panels sometimes caused by other rules */
.chat-container.dark-theme .settings-group .panel,
.chat-container.dark-theme .settings-group .card,
.chat-container.dark-theme .settings-group .panel-card {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Tweak muted text for dark background */
.chat-container.dark-theme .muted.small { color: rgba(230,246,255,0.52); }

/* Ensure footer buttons keep contrast in dark */
.chat-container.dark-theme .test-button, .chat-container.dark-theme .save-button {
  border-color: rgba(255,255,255,0.04);
}

/* end dark mode cleanup */
