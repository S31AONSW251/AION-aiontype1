/* MathPanel.css
   Clean, light/dark-aware styles for the MathPanel component.
   Uses CSS variables where available. Designed to be visually attractive
   on both light-theme and dark-theme root classes.
*/

:root {
  --math-bg: #ffffff;
  --math-surface: #fbfdff;
  --math-border: rgba(15,23,35,0.06);
  --math-text: #0b1a28;
  --math-muted: #556370;
  --math-primary: #0b63d6;
  --math-primary-dark: #094fb0;
  --math-accent: rgba(11,99,214,0.08);
}

/* Light theme explicit overrides applied when math-panel has .light-theme */
.math-panel.light-theme {
  --math-bg: #f4f7fb;
  --math-surface: #ffffff;
  --math-border: rgba(11,22,35,0.08);
  --math-text: #071124;
  --math-muted: #4a5966;
  --math-primary: #0b63d6;
  --math-primary-dark: #0645b6;
  --math-accent: rgba(11,99,214,0.10);
}

/* Dark theme overrides when .dark-theme is applied on panel root */
.math-panel.dark-theme {
  --math-bg: #0f1620;
  --math-surface: rgba(10,12,18,0.36);
  --math-border: rgba(255,255,255,0.06);
  --math-text: #eef6ff;
  --math-muted: #9fb1c8;
  --math-primary: #3b82f6;
  --math-primary-dark: #2563eb;
  --math-accent: rgba(59,130,246,0.06);
}

.math-panel {
  display: block;
  padding: 12px;
  color: var(--math-text);
  background: transparent;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}

.math-header {
  display:flex;
  align-items:center;
  gap:12px;
  justify-content:space-between;
  margin-bottom: 12px;
}
.math-header h3 { margin:0; font-size:1.15rem; letter-spacing:0.2px; }
.math-header .back-button { display:inline-flex; align-items:center; gap:8px; }

/* Card style for major sections */
.math-top-controls,
.math-description,
.custom-math-section,
.graph-controls-section,
.math-solution-container,
.math-capabilities {
  background: var(--math-surface);
  border: 1px solid var(--math-border);
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 12px 30px rgba(12,18,25,0.04);
  margin-bottom: 14px;
}

/* New classes to replace inline styles */
.steps-controls { display:flex; justify-content:space-between; align-items:center; }
.steps-controls-right { display:flex; gap:8px; align-items:center; }
.btn-compact { padding:6px 10px; border-radius:8px; border:1px solid var(--math-border); background: transparent; cursor:pointer; }
.step-row { display:flex; justify-content:space-between; align-items:center; }
.step-text { flex:1; margin-right:8px; }
.step-actions { display:flex; gap:8px; }
.icon-btn { display:inline-flex; align-items:center; gap:8px; padding:6px 8px; border-radius:8px; border:1px solid var(--math-border); background: transparent; cursor:pointer; }
.icon-btn svg { display:block; }
.back-text { margin-left:8px; }
.math-hint { color: var(--math-muted); font-size:13px; }
.controls-right { margin-left:auto; }
.math-extra-controls { display:flex; gap:12px; margin-top:12px; align-items:center; }
.checkbox-inline { display:flex; gap:8px; align-items:center; }
.preset-buttons { display:flex; gap:8px; align-items:center; }
.evaluate-area { margin-left:auto; display:flex; gap:8px; align-items:center; }
.small-input { width:120px; padding:6px 8px; border-radius:6px; border:1px solid var(--math-border); }
.math-label { margin-right:8px; }
.eval-result { padding:6px 10px; background: rgba(0,0,0,0.04); border-radius:8px; }
.math-canvas { border:1px solid var(--math-border); border-radius:5px; cursor:grab; }
.repl-row { display:flex; gap:8px; align-items:center; margin-bottom:12px; }
.repl-input { flex:1; padding:8px 10px; border-radius:8px; border:1px solid var(--math-border); }
.repl-history-wrap { margin-bottom:12px; }

.math-description p { margin:0; color: var(--math-muted); }

/* Input area */
.math-input-container { display:flex; gap:12px; align-items:flex-start; }
.math-input-container textarea {
  flex: 1; min-height:64px; resize:vertical; padding:12px; border-radius:8px;
  border: 1px solid var(--math-border); background: var(--math-bg); color: var(--math-text);
  box-shadow: none; font-size: 14px; line-height: 1.4;
}
.math-input-container button { min-width:88px; }

.math-error { color: #b00020; margin-top:8px; }

.input-history, .smart-suggestions { margin-top:12px; }
.input-history ul, .smart-suggestions ul { display:flex; flex-wrap:wrap; gap:8px; padding:0; margin:8px 0 0 0; list-style:none; }
.input-history li, .smart-suggestions li { background: transparent; padding: 6px 10px; border-radius: 999px; border: 1px dashed var(--math-border); color: var(--math-muted); cursor: pointer; }
.example-button { background: transparent; border-radius: 8px; padding:6px 10px; border: 1px solid transparent; color: var(--math-primary); cursor: pointer; }
.example-button:hover { transform: translateY(-2px); box-shadow: 0 10px 30px var(--math-accent); }
.history-controls { margin-top:8px; display:flex; gap:8px; }

/* Plot controls */
.plot-controls { display:flex; gap:8px; align-items:center; }
.plot-controls input[type="text"] { flex:1; padding:8px 10px; border-radius:8px; border:1px solid var(--math-border); background: var(--math-bg); color:var(--math-text); }
.plot-controls button { padding:8px 10px; border-radius:8px; }
.graph-settings { margin-top:12px; }
.graph-settings .setting-row { display:flex; gap:12px; margin-top:8px; }
.graph-settings input { width:120px; padding:6px 8px; border-radius:6px; border:1px solid var(--math-border); }

/* Solution tabs */
.solution-tabs { display:flex; gap:8px; margin-bottom:12px; }
.solution-tabs button { background: transparent; border: 1px solid transparent; padding:8px 12px; border-radius:8px; cursor:pointer; }
.solution-tabs button.active { background: linear-gradient(90deg,var(--math-primary),var(--math-primary-dark)); color:white; box-shadow: 0 10px 24px rgba(11,63,150,0.12); }

.solution-content { display:block; }
.math-problem p { font-weight:600; color:var(--math-text); margin:6px 0; }
.math-answer h4 { margin:6px 0; }
.solution-row { display:flex; gap:8px; align-items:center; }
.action-buttons button { margin-left:8px; }

.latex-render { margin-top:8px; }

/* Visualization */
.math-visualization { display:flex; flex-direction:column; gap:12px; }
.math-visualization canvas { width:100%; max-width:880px; height:auto; border-radius:8px; background: linear-gradient(180deg,var(--math-bg),var(--math-surface)); border:1px solid var(--math-border); }
.visualization-notes { color: var(--math-muted); font-size:13px; }

/* Solution actions */
.solution-actions { display:flex; gap:12px; align-items:center; margin-top:12px; flex-wrap:wrap; }
.solution-actions button { padding:8px 12px; border-radius:8px; border: none; background: linear-gradient(90deg,var(--math-primary),var(--math-primary-dark)); color:white; cursor:pointer; }
.view-controls button { background: transparent; border:1px solid var(--math-border); color: var(--math-text); }
.toggle-steps { display:flex; align-items:center; gap:8px; }

/* Steps list */
.math-steps-container { margin-top:8px; }
.math-steps-list { padding-left: 18px; }
.math-step { margin-bottom:8px; display:flex; gap:12px; align-items:flex-start; }
.step-number { min-width:26px; height:26px; border-radius:999px; background: var(--math-primary); color: white; display:flex; align-items:center; justify-content:center; font-weight:700; }
.step-content { flex:1; background: transparent; padding:6px 8px; border-radius:6px; }
.step-content button { margin-left:8px; }

/* Calculator / REPL */
.math-calculator { margin-top:8px; }
.calculator-grid { display:flex; gap:8px; flex-wrap:wrap; }
.calculator-grid button { padding:8px 10px; border-radius:8px; border:1px solid var(--math-border); background: transparent; cursor:pointer; }

.repl-history { margin-top:8px; max-height: 160px; overflow:auto; border-top:1px dashed var(--math-border); padding-top:8px; }
.repl-history li { padding:6px 8px; border-radius:6px; background: transparent; color: var(--math-text); }

/* Placeholder and input color tuning for accessibility */
input::placeholder, textarea::placeholder { color: var(--math-muted); opacity:1; }
input, textarea, select { color: var(--math-text); }

/* Buttons default readable style in light theme */
button { color: var(--math-text); }
/* Keep primary buttons styled separately */
.solution-actions button { color: #fff; }

/* Capabilities grid */
.capabilities-list { display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:12px; margin-top:12px; }
.capability {
  background: var(--math-surface);
  padding:10px;
  border-radius:8px;
  border:1px solid var(--math-border);
  display:flex;
  align-items:center;
  gap:10px;
  color: var(--math-text);
}
.math-panel.dark-theme .capability { background: rgba(255,255,255,0.02); border-color: rgba(255,255,255,0.04); }
.capability-icon { font-size:20px; }
.capability-name { font-weight:700; }
.capability-desc { display:block; color:var(--math-muted); font-size:13px; }

/* Responsive */
@media (max-width: 880px) {
  .math-visualization canvas { max-width:100%; height:300px; }
  .graph-settings input { width:100px; }
}

/* Small hover / micro-animations */
button { transition: transform 0.12s ease, box-shadow 0.12s ease; }
button:hover { transform: translateY(-3px); }

/* Disabled states */
button[disabled] { opacity:0.6; transform:none; box-shadow:none; }
